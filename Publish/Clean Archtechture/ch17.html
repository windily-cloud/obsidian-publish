<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.51" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://windily-cloud.github.io/obsidian-publish/Publish/Clean%20Archtechture/ch17.html"><meta property="og:site_name" content="Windily Cloud"><meta property="og:title" content="Chap17. BOUNDARIES: DRAWING LINES åˆ’åˆ†è¾¹ç•Œ"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-09-20T11:11:04.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:modified_time" content="2022-09-20T11:11:04.000Z"><title>Chap17. BOUNDARIES: DRAWING LINES åˆ’åˆ†è¾¹ç•Œ | Windily Cloud</title><meta name="description" content="Windily Cloud's Blog">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/obsidian-publish/assets/style.12da8f21.css">
    <link rel="modulepreload" href="/obsidian-publish/assets/app.887b133c.js"><link rel="modulepreload" href="/obsidian-publish/assets/ch17.html.165fc3da.js"><link rel="modulepreload" href="/obsidian-publish/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/obsidian-publish/assets/ch17.html.d50b6029.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.c7e76e53.js"><link rel="prefetch" href="/obsidian-publish/assets/home.html.f01af163.js"><link rel="prefetch" href="/obsidian-publish/assets/å¯¼èˆª.html.d24325cb.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.fc3247cd.js"><link rel="prefetch" href="/obsidian-publish/assets/afterword.html.279a3dae.js"><link rel="prefetch" href="/obsidian-publish/assets/ch1.html.ad67b7a0.js"><link rel="prefetch" href="/obsidian-publish/assets/ch10.html.74f49c94.js"><link rel="prefetch" href="/obsidian-publish/assets/ch11.html.7b8b868f.js"><link rel="prefetch" href="/obsidian-publish/assets/ch12.html.0897d88d.js"><link rel="prefetch" href="/obsidian-publish/assets/ch13.html.871f1a29.js"><link rel="prefetch" href="/obsidian-publish/assets/ch14.html.9cf7c1a7.js"><link rel="prefetch" href="/obsidian-publish/assets/ch15.html.1ee0e012.js"><link rel="prefetch" href="/obsidian-publish/assets/ch16.html.b2dc5528.js"><link rel="prefetch" href="/obsidian-publish/assets/ch18.html.f9083031.js"><link rel="prefetch" href="/obsidian-publish/assets/ch19.html.a8daed86.js"><link rel="prefetch" href="/obsidian-publish/assets/ch2.html.f712f0c4.js"><link rel="prefetch" href="/obsidian-publish/assets/ch20.html.008de7bb.js"><link rel="prefetch" href="/obsidian-publish/assets/ch21.html.bc3946ee.js"><link rel="prefetch" href="/obsidian-publish/assets/ch22.html.dcd080ee.js"><link rel="prefetch" href="/obsidian-publish/assets/ch23.html.4bd6fad0.js"><link rel="prefetch" href="/obsidian-publish/assets/ch24.html.5af7f550.js"><link rel="prefetch" href="/obsidian-publish/assets/ch25.html.cdcf732e.js"><link rel="prefetch" href="/obsidian-publish/assets/ch26.html.d56c6b1b.js"><link rel="prefetch" href="/obsidian-publish/assets/ch27.html.1d0c5f03.js"><link rel="prefetch" href="/obsidian-publish/assets/ch28.html.a9585c5e.js"><link rel="prefetch" href="/obsidian-publish/assets/ch29.html.7898d2ef.js"><link rel="prefetch" href="/obsidian-publish/assets/ch3.html.4e106aa0.js"><link rel="prefetch" href="/obsidian-publish/assets/ch30.html.efd82950.js"><link rel="prefetch" href="/obsidian-publish/assets/ch31.html.054b22ad.js"><link rel="prefetch" href="/obsidian-publish/assets/ch32.html.25d75f30.js"><link rel="prefetch" href="/obsidian-publish/assets/ch33.html.058b06f6.js"><link rel="prefetch" href="/obsidian-publish/assets/ch34.html.61d3f411.js"><link rel="prefetch" href="/obsidian-publish/assets/ch4.html.a6691c1e.js"><link rel="prefetch" href="/obsidian-publish/assets/ch5.html.326ac1a0.js"><link rel="prefetch" href="/obsidian-publish/assets/ch6.html.b00c3f6a.js"><link rel="prefetch" href="/obsidian-publish/assets/ch7.html.4e35799e.js"><link rel="prefetch" href="/obsidian-publish/assets/ch8.html.f553bf58.js"><link rel="prefetch" href="/obsidian-publish/assets/ch9.html.1abe47e0.js"><link rel="prefetch" href="/obsidian-publish/assets/part1.html.61a30e56.js"><link rel="prefetch" href="/obsidian-publish/assets/part2.html.c688cf00.js"><link rel="prefetch" href="/obsidian-publish/assets/part3.html.19a54833.js"><link rel="prefetch" href="/obsidian-publish/assets/part4.html.e97d623d.js"><link rel="prefetch" href="/obsidian-publish/assets/part5.html.59f213ed.js"><link rel="prefetch" href="/obsidian-publish/assets/part6.html.565d8d69.js"><link rel="prefetch" href="/obsidian-publish/assets/obsidainæ–‡æ¡£å¯¼å‡ºçš„æ–¹æ³•.html.8c97282e.js"><link rel="prefetch" href="/obsidian-publish/assets/ç¬”è®°åˆ†ç±»æ–¹æ³•çš„æ€è€ƒ.html.7a0981ad.js"><link rel="prefetch" href="/obsidian-publish/assets/æ‚è¯ï¼šä»æ„è¯†å½¢æ€åˆ†æè¥¿æ–¹ç–«æƒ….html.609d0549.js"><link rel="prefetch" href="/obsidian-publish/assets/è¯»æ¸…æ”¿åºœæ˜¯å¦åº”è¯¥ä¿®å»ºé“è·¯ä¸€æ–‡.html.0ce08377.js"><link rel="prefetch" href="/obsidian-publish/assets/404.html.cc115e5e.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.60ae3ce2.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.c09081fd.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.70634028.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.3b70efd7.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.f5a6049f.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.d91b9c1f.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.32852561.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.0a68a710.js"><link rel="prefetch" href="/obsidian-publish/assets/home.html.93b7cca5.js"><link rel="prefetch" href="/obsidian-publish/assets/å¯¼èˆª.html.a1c9d7de.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.0da27cdd.js"><link rel="prefetch" href="/obsidian-publish/assets/afterword.html.b850d04a.js"><link rel="prefetch" href="/obsidian-publish/assets/ch1.html.5aa5f6f6.js"><link rel="prefetch" href="/obsidian-publish/assets/ch10.html.413c371f.js"><link rel="prefetch" href="/obsidian-publish/assets/ch11.html.3cd7a242.js"><link rel="prefetch" href="/obsidian-publish/assets/ch12.html.175ce04d.js"><link rel="prefetch" href="/obsidian-publish/assets/ch13.html.fc4a1701.js"><link rel="prefetch" href="/obsidian-publish/assets/ch14.html.199a9f38.js"><link rel="prefetch" href="/obsidian-publish/assets/ch15.html.5b8799e9.js"><link rel="prefetch" href="/obsidian-publish/assets/ch16.html.20b93b21.js"><link rel="prefetch" href="/obsidian-publish/assets/ch18.html.4cd429e5.js"><link rel="prefetch" href="/obsidian-publish/assets/ch19.html.3e2d64e7.js"><link rel="prefetch" href="/obsidian-publish/assets/ch2.html.384a9648.js"><link rel="prefetch" href="/obsidian-publish/assets/ch20.html.b1ad3804.js"><link rel="prefetch" href="/obsidian-publish/assets/ch21.html.58811bd6.js"><link rel="prefetch" href="/obsidian-publish/assets/ch22.html.44e934ae.js"><link rel="prefetch" href="/obsidian-publish/assets/ch23.html.d77e680e.js"><link rel="prefetch" href="/obsidian-publish/assets/ch24.html.79a8927d.js"><link rel="prefetch" href="/obsidian-publish/assets/ch25.html.a6d9e7e0.js"><link rel="prefetch" href="/obsidian-publish/assets/ch26.html.c53b41bf.js"><link rel="prefetch" href="/obsidian-publish/assets/ch27.html.fdbedd86.js"><link rel="prefetch" href="/obsidian-publish/assets/ch28.html.8d17578d.js"><link rel="prefetch" href="/obsidian-publish/assets/ch29.html.69ad75a7.js"><link rel="prefetch" href="/obsidian-publish/assets/ch3.html.ef8bfaee.js"><link rel="prefetch" href="/obsidian-publish/assets/ch30.html.d5d16d0e.js"><link rel="prefetch" href="/obsidian-publish/assets/ch31.html.33b5c44c.js"><link rel="prefetch" href="/obsidian-publish/assets/ch32.html.6c12ea21.js"><link rel="prefetch" href="/obsidian-publish/assets/ch33.html.7adbcd24.js"><link rel="prefetch" href="/obsidian-publish/assets/ch34.html.c7a5cd99.js"><link rel="prefetch" href="/obsidian-publish/assets/ch4.html.f4b07606.js"><link rel="prefetch" href="/obsidian-publish/assets/ch5.html.0f2533d2.js"><link rel="prefetch" href="/obsidian-publish/assets/ch6.html.c64dc16e.js"><link rel="prefetch" href="/obsidian-publish/assets/ch7.html.d8f304e4.js"><link rel="prefetch" href="/obsidian-publish/assets/ch8.html.ac3dd3f7.js"><link rel="prefetch" href="/obsidian-publish/assets/ch9.html.e8bdc588.js"><link rel="prefetch" href="/obsidian-publish/assets/part1.html.f20e95e2.js"><link rel="prefetch" href="/obsidian-publish/assets/part2.html.46fb949d.js"><link rel="prefetch" href="/obsidian-publish/assets/part3.html.37fde797.js"><link rel="prefetch" href="/obsidian-publish/assets/part4.html.e291bbe5.js"><link rel="prefetch" href="/obsidian-publish/assets/part5.html.7deee47f.js"><link rel="prefetch" href="/obsidian-publish/assets/part6.html.6126ed62.js"><link rel="prefetch" href="/obsidian-publish/assets/obsidainæ–‡æ¡£å¯¼å‡ºçš„æ–¹æ³•.html.f99ad030.js"><link rel="prefetch" href="/obsidian-publish/assets/ç¬”è®°åˆ†ç±»æ–¹æ³•çš„æ€è€ƒ.html.f2f4101a.js"><link rel="prefetch" href="/obsidian-publish/assets/æ‚è¯ï¼šä»æ„è¯†å½¢æ€åˆ†æè¥¿æ–¹ç–«æƒ….html.9eadd293.js"><link rel="prefetch" href="/obsidian-publish/assets/è¯»æ¸…æ”¿åºœæ˜¯å¦åº”è¯¥ä¿®å»ºé“è·¯ä¸€æ–‡.html.71c36bf1.js"><link rel="prefetch" href="/obsidian-publish/assets/404.html.24a96f75.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.b76fc3f0.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.ba71ba2a.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.103ba7cd.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.7d4c0d5f.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.b1a4c497.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.0c6eca16.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.394348dd.js"><link rel="prefetch" href="/obsidian-publish/assets/auto.56c9cb2e.js"><link rel="prefetch" href="/obsidian-publish/assets/index.1f644ee1.js"><link rel="prefetch" href="/obsidian-publish/assets/flowchart.parse.1479ec3f.js"><link rel="prefetch" href="/obsidian-publish/assets/mermaid.esm.min.0e041931.js"><link rel="prefetch" href="/obsidian-publish/assets/highlight.esm.9b852bc5.js"><link rel="prefetch" href="/obsidian-publish/assets/markdown.esm.77e8db25.js"><link rel="prefetch" href="/obsidian-publish/assets/math.esm.cb9d4be3.js"><link rel="prefetch" href="/obsidian-publish/assets/notes.esm.62c5f19d.js"><link rel="prefetch" href="/obsidian-publish/assets/reveal.esm.41ec5d7f.js"><link rel="prefetch" href="/obsidian-publish/assets/search.esm.04894411.js"><link rel="prefetch" href="/obsidian-publish/assets/zoom.esm.78977eba.js"><link rel="prefetch" href="/obsidian-publish/assets/VuePlayground.3cfc7758.js"><link rel="prefetch" href="/obsidian-publish/assets/photoswipe.esm.f594e77b.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/obsidian-publish/" class="brand"><img class="logo" src="/obsidian-publish/logo.svg" alt="Windily Cloud"><!----><span class="site-name hide-in-pad">Windily Cloud</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/obsidian-publish/" class="nav-link" aria-label="åšå®¢ä¸»é¡µ"><span class="icon iconfont icon-home"></span>åšå®¢ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/obsidian-publish/home.html" class="nav-link" aria-label="å›¾è°±"><span class="icon iconfont icon-home"></span>å›¾è°±<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://vuepress-theme-hope.github.io/v2/zh/" rel="noopener noreferrer" target="_blank" aria-label="ä¸»é¢˜æ–‡æ¡£" class="nav-link"><span class="icon iconfont icon-note"></span>ä¸»é¢˜æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/windily-cloud/obsidian-publish" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading clickable active"><span class="icon iconfont icon-folder"></span><a href="/obsidian-publish/" class="title">Vault</a><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-folder"></span><span class="title">è§é—»</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-folder"></span><span class="title">Obsidian</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-folder"></span><span class="title">Clean Archtechture</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/" class="nav-link sidebar-link sidebar-page" aria-label="README.md"><span class="icon iconfont icon-file"></span>README.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/afterword.html" class="nav-link sidebar-link sidebar-page" aria-label="afterword.md"><span class="icon iconfont icon-file"></span>afterword.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch1.html" class="nav-link sidebar-link sidebar-page" aria-label="ch1.md"><span class="icon iconfont icon-file"></span>ch1.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch10.html" class="nav-link sidebar-link sidebar-page" aria-label="ch10.md"><span class="icon iconfont icon-file"></span>ch10.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch11.html" class="nav-link sidebar-link sidebar-page" aria-label="ch11.md"><span class="icon iconfont icon-file"></span>ch11.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch12.html" class="nav-link sidebar-link sidebar-page" aria-label="ch12.md"><span class="icon iconfont icon-file"></span>ch12.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch13.html" class="nav-link sidebar-link sidebar-page" aria-label="ch13.md"><span class="icon iconfont icon-file"></span>ch13.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch14.html" class="nav-link sidebar-link sidebar-page" aria-label="ch14.md"><span class="icon iconfont icon-file"></span>ch14.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch15.html" class="nav-link sidebar-link sidebar-page" aria-label="ch15.md"><span class="icon iconfont icon-file"></span>ch15.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html" class="nav-link sidebar-link sidebar-page" aria-label="ch16.md"><span class="icon iconfont icon-file"></span>ch16.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="ch17.md"><span class="icon iconfont icon-file"></span>ch17.md<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html#a-couple-of-sad-stories-å‡ ä¸ªæ‚²ä¼¤çš„æ•…äº‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="A COUPLE OF SAD STORIES å‡ ä¸ªæ‚²ä¼¤çš„æ•…äº‹"><!---->A COUPLE OF SAD STORIES å‡ ä¸ªæ‚²ä¼¤çš„æ•…äº‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html#fitnesse" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="FITNESSE"><!---->FITNESSE<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html#which-lines-do-you-draw-and-when-do-you-draw-them-åº”åœ¨ä½•æ—¶ã€ä½•å¤„ç”»è¿™äº›çº¿" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="WHICH LINES DO YOU DRAW, AND WHEN DO YOU DRAW THEM? åº”åœ¨ä½•æ—¶ã€ä½•å¤„ç”»è¿™äº›çº¿"><!---->WHICH LINES DO YOU DRAW, AND WHEN DO YOU DRAW THEM? åº”åœ¨ä½•æ—¶ã€ä½•å¤„ç”»è¿™äº›çº¿<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html#what-about-input-and-output-è¾“å…¥å’Œè¾“å‡ºæ€ä¹ˆåŠ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="WHAT ABOUT INPUT AND OUTPUT? è¾“å…¥å’Œè¾“å‡ºæ€ä¹ˆåŠ"><!---->WHAT ABOUT INPUT AND OUTPUT? è¾“å…¥å’Œè¾“å‡ºæ€ä¹ˆåŠ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html#plugin-architecture-æ’ä»¶å¼æ¶æ„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="PLUGIN ARCHITECTURE æ’ä»¶å¼æ¶æ„"><!---->PLUGIN ARCHITECTURE æ’ä»¶å¼æ¶æ„<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html#the-plugin-argument-æ’ä»¶å¼æ¶æ„çš„å¥½å¤„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="THE PLUGIN ARGUMENT æ’ä»¶å¼æ¶æ„çš„å¥½å¤„"><!---->THE PLUGIN ARGUMENT æ’ä»¶å¼æ¶æ„çš„å¥½å¤„<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html#conclusion-æœ¬ç« å°ç»“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="CONCLUSION æœ¬ç« å°ç»“"><!---->CONCLUSION æœ¬ç« å°ç»“<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch18.html" class="nav-link sidebar-link sidebar-page" aria-label="ch18.md"><span class="icon iconfont icon-file"></span>ch18.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch19.html" class="nav-link sidebar-link sidebar-page" aria-label="ch19.md"><span class="icon iconfont icon-file"></span>ch19.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch2.html" class="nav-link sidebar-link sidebar-page" aria-label="ch2.md"><span class="icon iconfont icon-file"></span>ch2.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch20.html" class="nav-link sidebar-link sidebar-page" aria-label="ch20.md"><span class="icon iconfont icon-file"></span>ch20.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch21.html" class="nav-link sidebar-link sidebar-page" aria-label="ch21.md"><span class="icon iconfont icon-file"></span>ch21.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch22.html" class="nav-link sidebar-link sidebar-page" aria-label="ch22.md"><span class="icon iconfont icon-file"></span>ch22.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch23.html" class="nav-link sidebar-link sidebar-page" aria-label="ch23.md"><span class="icon iconfont icon-file"></span>ch23.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch24.html" class="nav-link sidebar-link sidebar-page" aria-label="ch24.md"><span class="icon iconfont icon-file"></span>ch24.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch25.html" class="nav-link sidebar-link sidebar-page" aria-label="ch25.md"><span class="icon iconfont icon-file"></span>ch25.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch26.html" class="nav-link sidebar-link sidebar-page" aria-label="ch26.md"><span class="icon iconfont icon-file"></span>ch26.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch27.html" class="nav-link sidebar-link sidebar-page" aria-label="ch27.md"><span class="icon iconfont icon-file"></span>ch27.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch28.html" class="nav-link sidebar-link sidebar-page" aria-label="ch28.md"><span class="icon iconfont icon-file"></span>ch28.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch29.html" class="nav-link sidebar-link sidebar-page" aria-label="ch29.md"><span class="icon iconfont icon-file"></span>ch29.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch3.html" class="nav-link sidebar-link sidebar-page" aria-label="ch3.md"><span class="icon iconfont icon-file"></span>ch3.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch30.html" class="nav-link sidebar-link sidebar-page" aria-label="ch30.md"><span class="icon iconfont icon-file"></span>ch30.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch31.html" class="nav-link sidebar-link sidebar-page" aria-label="ch31.md"><span class="icon iconfont icon-file"></span>ch31.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch32.html" class="nav-link sidebar-link sidebar-page" aria-label="ch32.md"><span class="icon iconfont icon-file"></span>ch32.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch33.html" class="nav-link sidebar-link sidebar-page" aria-label="ch33.md"><span class="icon iconfont icon-file"></span>ch33.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch34.html" class="nav-link sidebar-link sidebar-page" aria-label="ch34.md"><span class="icon iconfont icon-file"></span>ch34.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch4.html" class="nav-link sidebar-link sidebar-page" aria-label="ch4.md"><span class="icon iconfont icon-file"></span>ch4.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch5.html" class="nav-link sidebar-link sidebar-page" aria-label="ch5.md"><span class="icon iconfont icon-file"></span>ch5.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch6.html" class="nav-link sidebar-link sidebar-page" aria-label="ch6.md"><span class="icon iconfont icon-file"></span>ch6.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch7.html" class="nav-link sidebar-link sidebar-page" aria-label="ch7.md"><span class="icon iconfont icon-file"></span>ch7.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch8.html" class="nav-link sidebar-link sidebar-page" aria-label="ch8.md"><span class="icon iconfont icon-file"></span>ch8.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch9.html" class="nav-link sidebar-link sidebar-page" aria-label="ch9.md"><span class="icon iconfont icon-file"></span>ch9.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/part1.html" class="nav-link sidebar-link sidebar-page" aria-label="part1.md"><span class="icon iconfont icon-file"></span>part1.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/part2.html" class="nav-link sidebar-link sidebar-page" aria-label="part2.md"><span class="icon iconfont icon-file"></span>part2.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/part3.html" class="nav-link sidebar-link sidebar-page" aria-label="part3.md"><span class="icon iconfont icon-file"></span>part3.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/part4.html" class="nav-link sidebar-link sidebar-page" aria-label="part4.md"><span class="icon iconfont icon-file"></span>part4.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/part5.html" class="nav-link sidebar-link sidebar-page" aria-label="part5.md"><span class="icon iconfont icon-file"></span>part5.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/part6.html" class="nav-link sidebar-link sidebar-page" aria-label="part6.md"><span class="icon iconfont icon-file"></span>part6.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/%E5%AF%BC%E8%88%AA.html" class="nav-link sidebar-link sidebar-page" aria-label="å¯¼èˆª.md"><span class="icon iconfont icon-file"></span>å¯¼èˆª.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Chap17. BOUNDARIES: DRAWING LINES åˆ’åˆ†è¾¹ç•Œ</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down" localizeddate="2022å¹´9æœˆ20æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://windily-cloud.github.io" target="_blank" rel="noopener noreferrer">Windily-Cloud</a></span><span property="author" content="Windily-Cloud"></span></span><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022å¹´9æœˆ20æ—¥</span><meta property="datePublished" content="2022-09-20T11:03:58.000Z"></span><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" localizeddate="2022å¹´9æœˆ20æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 32 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT32M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html#chap17-boundaries-drawing-lines-åˆ’åˆ†è¾¹ç•Œ" class="router-link-active router-link-exact-active toc-link level1">Chap17. BOUNDARIES: DRAWING LINES åˆ’åˆ†è¾¹ç•Œ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html#a-couple-of-sad-stories-å‡ ä¸ªæ‚²ä¼¤çš„æ•…äº‹" class="router-link-active router-link-exact-active toc-link level2">A COUPLE OF SAD STORIES å‡ ä¸ªæ‚²ä¼¤çš„æ•…äº‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html#fitnesse" class="router-link-active router-link-exact-active toc-link level2">FITNESSE</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html#which-lines-do-you-draw-and-when-do-you-draw-them-åº”åœ¨ä½•æ—¶ã€ä½•å¤„ç”»è¿™äº›çº¿" class="router-link-active router-link-exact-active toc-link level2">WHICH LINES DO YOU DRAW, AND WHEN DO YOU DRAW THEM? åº”åœ¨ä½•æ—¶ã€ä½•å¤„ç”»è¿™äº›çº¿</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html#what-about-input-and-output-è¾“å…¥å’Œè¾“å‡ºæ€ä¹ˆåŠ" class="router-link-active router-link-exact-active toc-link level2">WHAT ABOUT INPUT AND OUTPUT? è¾“å…¥å’Œè¾“å‡ºæ€ä¹ˆåŠ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html#plugin-architecture-æ’ä»¶å¼æ¶æ„" class="router-link-active router-link-exact-active toc-link level2">PLUGIN ARCHITECTURE æ’ä»¶å¼æ¶æ„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html#the-plugin-argument-æ’ä»¶å¼æ¶æ„çš„å¥½å¤„" class="router-link-active router-link-exact-active toc-link level2">THE PLUGIN ARGUMENT æ’ä»¶å¼æ¶æ„çš„å¥½å¤„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html#conclusion-æœ¬ç« å°ç»“" class="router-link-active router-link-exact-active toc-link level2">CONCLUSION æœ¬ç« å°ç»“</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="chap17-boundaries-drawing-lines-åˆ’åˆ†è¾¹ç•Œ" tabindex="-1"><a class="header-anchor" href="#chap17-boundaries-drawing-lines-åˆ’åˆ†è¾¹ç•Œ" aria-hidden="true">#</a> Chap17. BOUNDARIES: DRAWING LINES åˆ’åˆ†è¾¹ç•Œ</h1><p>Software architecture is the art of drawing lines that I call boundaries. Those boundaries separate software elements from one another, and restrict those on one side from knowing about those on the other. Some of those lines are drawn very early in a projectâ€™s lifeâ€”even before any code is written. Others are drawn much later. Those that are drawn early are drawn for the purposes of deferring decisions for as long as possible, and of keeping those decisions from polluting the core business logic.</p><blockquote><p>è½¯ä»¶æ¶æ„è®¾è®¡æœ¬èº«å°±æ˜¯ä¸€é—¨åˆ’åˆ†è¾¹ç•Œçš„è‰ºæœ¯ã€‚ä¹Ÿç•Œçš„ä½œç”¨æ˜¯å°†è½¯ä»¶åˆ†å‰²æˆå„ç§å…ƒç´ ï¼Œä»¥ä¾¿çº¦æŸè¾¹ç•Œä¸¤ä¾§ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚å…¶ä¸­æœ‰ä¸€äº›è¾¹ç•Œæ˜¯ä½œé¡¹ç›®åˆæœŸâ€”â€”ç”šè‡³åœ¨ç¼–å†™ä»£ç ä¹‹å‰â€”â€”å°±å·²ç»åˆ’åˆ†å¥½ï¼Œè€Œå…¶ä»–çš„è¾¹ç•Œåˆ™æ˜¯åæ¥æ‰åˆ’åˆ†çš„ã€‚åœ¨é¡¹ç›®åˆæœŸåˆ’åˆ†è¿™äº›è¾¹ç•Œçš„ç›®çš„æ˜¯æ–¹ä¾¿æˆ‘ä»¬å°½é‡å°†ä¸€äº›å†³ç­–å»¶åè¿›è¡Œï¼Œå¹¶ä¸”ç¡®ä¿æœªæ¥è¿™äº›å†³ç­–ä¸ä¼šå¯¹ç³»ç»Ÿçš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘äº§ç”Ÿå¹²æ‰°ã€‚</p></blockquote><p>Recall that the goal of an architect is to minimize the human resources required to build and maintain the required system. What it is that saps this kind of people-power? Couplingâ€”and especially coupling to premature decisions.</p><blockquote><p>æ­£å¦‚æˆ‘ä»¬ä¹‹å‰æ‰€è¯´ï¼Œæ¶æ„å¸ˆä»¬æ‰€è¿½æ±‚çš„ç›®æ ‡æ˜¯æœ€å¤§é™åº¦åœ°é™ä½æ„å»ºå’Œç»´æŠ¤ä¸€ä¸ªç³»ç»Ÿæ‰€éœ€çš„äººåŠ›èµ„æºã€‚é‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦äº†è§£ä¸€ä¸ªç³»ç»Ÿæœ€æ¶ˆè€—äººåŠ›èµ„æºçš„æ˜¯ä»€ä¹ˆï¼Ÿç­”æ¡ˆæ˜¯ç³»ç»Ÿä¸­å­˜åœ¨çš„è€¦åˆå°¤å…¶æ˜¯é‚£äº›è¿‡æ—©åšå‡ºçš„ã€ä¸æˆç†Ÿçš„å†³ç­–æ‰€å¯¼è‡´çš„è€¦åˆã€‚</p></blockquote><p>Which kinds of decisions are premature? Decisions that have nothing to do with the business requirementsâ€”the use casesâ€”of the system. These include decisions about frameworks, databases, web servers, utility libraries, dependency injection, and the like. A good system architecture is one in which decisions like these are rendered ancillary and deferrable. A good system architecture does not depend on those decisions. A good system architecture allows those decisions to be made at the latest possible moment, without significant impact.</p><blockquote><p>é‚£ä¹ˆï¼Œæ€æ ·çš„å†³ç­–ä¼šè¢«è®¤ä¸ºæ˜¯è¿‡æ—©ä¸”ä¸æˆç†Ÿçš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯é‚£äº›å†³ç­–ä¸ç³»ç»Ÿçš„ä¸šåŠ¡éœ€æ±‚ï¼ˆä¹Ÿå°±æ˜¯ç”¨ä¾‹ï¼‰æ— å…³ã€‚è¿™éƒ¨åˆ†å†³ç­–åŒ…æ‹¬æˆ‘ä»¬è¦é‡‡ç”¨çš„æ¡†æ¶ã€æ•°æ®åº“ã€Web æœåŠ¡å™¨ã€å·¥å…·åº“ã€ä¾èµ–æ³¨å…¥ç­‰ã€‚åœ¨ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„ç³»ç»Ÿæ¶æ„ä¸­ï¼Œè¿™äº›ç»†èŠ‚æ€§çš„å†³ç­–éƒ½åº”è¯¥æ˜¯è¾…åŠ©æ€§çš„ï¼Œå¯ä»¥è¢«æ¨è¿Ÿçš„ã€‚ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„ç³»ç»Ÿæ¶æ„ä¸åº”è¯¥ä¾èµ–äºè¿™äº›ç»†èŠ‚?è€Œåº”è¯¥å°½å¯èƒ½åœ°æ¨è¿Ÿè¿™äº›ç»†èŠ‚æ€§çš„å†³ç­–ï¼Œå¹¶è‡´åŠ›äºå°†è¿™ç§æ¨è¿Ÿæ‰€äº§ç”Ÿçš„å½±å“é™åˆ°æœ€ä½ã€‚</p></blockquote><h2 id="a-couple-of-sad-stories-å‡ ä¸ªæ‚²ä¼¤çš„æ•…äº‹" tabindex="-1"><a class="header-anchor" href="#a-couple-of-sad-stories-å‡ ä¸ªæ‚²ä¼¤çš„æ•…äº‹" aria-hidden="true">#</a> A COUPLE OF SAD STORIES å‡ ä¸ªæ‚²ä¼¤çš„æ•…äº‹</h2><p>Hereâ€™s the sad story of company P, which serves as a warning about making premature decisions. In the 1980s the founders of P wrote a simple monolithic desktop application. They enjoyed a great deal of success and grew the product through the 1990s into a popular and successful desktop GUI application.</p><blockquote><p>ä¸‹é¢è¦è®²çš„æ˜¯ä¸€ä¸ªæ¥è‡ª P å…¬å¸çš„æ‚²ä¼¤çš„æ•…äº‹ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæ˜¯å°†å®ƒä½œä¸ºä¸€ä¸ªè‰ç‡å†³ç­–çš„åé¢æ¡ˆä¾‹ç»™å¤§å®¶å±•ç¤ºçš„ã€‚åœ¨ 20 ä¸–çºª 80 å¹´ä»£ï¼ŒP å…¬å¸çš„åˆ›å§‹å›¢é˜Ÿå¼€å‘äº†ä¸€ä¸ªå•ä½“ç»“æ„çš„ç®€å•æ¡Œé¢åº”ç”¨ã€‚ç„¶åï¼Œäº§å“è·å¾—äº†æå¤§çš„æˆåŠŸï¼Œå¹¶åœ¨ 20 ä¸–çºª 90 å¹´ä»£æˆåŠŸåœ°æˆé•¿ä¸ºä¸€ä¸ªå¹¿ä¸ºäººçŸ¥çš„æ¡Œé¢ GUI åº”ç”¨ã€‚</p></blockquote><p>But then, in the late 1990s, the web emerged as a force. Suddenly everybody had to have a web solution, and P was no exception. Pâ€™s customers clamored for a version of the product on the web. To meet this demand, the company hired a bunch of hotshot twenty-something Java programmers and embarked upon a project to webify their product.</p><blockquote><p>ç„¶è€Œåˆ°äº† 20 ä¸–çºª 90 å¹´ä»£æœ«æœŸï¼ŒWeb å·èµ·äº†ä¸€è‚¡æµªæ½®ï¼Œçªç„¶é—´æ¯ä¸ªå…¬å¸éƒ½åœ¨æ¨å‡ºè‡ªå·±çš„ Web è§£å†³æ–¹æ¡ˆï¼ŒP å…¬å¸è‡ªç„¶ä¹Ÿä¸èƒ½ç½®èº«äº‹å¤–ã€‚P å…¬å¸çš„å®¢æˆ·åµé—¹ç€è¦æ±‚å®ƒæä¾›ä¸€ä¸ª Web ç‰ˆçš„äº§å“ã€‚ä¸ºäº†åº”å¯¹è¿™ç§éœ€æ±‚ï¼Œè¯¥å…¬å¸é›‡ç”¨äº†ä¸€ç¾¤äºŒåå‡ å²çš„ Java ç¨‹åºå‘˜ï¼Œå¼€å§‹ç€æ‰‹å°†ä»–ä»¬çš„äº§å“ Web åŒ–ã€‚</p></blockquote><p>The Java guys had dreams of server farms dancing in their heads, so they adopted a rich three-tiered â€œarchitectureâ€1 that they could distribute through such farms. There would be servers for the GUI, servers for the middleware, and servers for the database. Of course.</p><blockquote><p>ç»“æœï¼Œè¿™ç¾¤ Java å°å­æ»¡è„‘å­æœæ€æš®æƒ³çš„å°±æ˜¯å¦‚ä½•å°†å¤§è§„æ¨¡æœåŠ¡å™¨é›†ç¾¤åº”ç”¨èµ·æ¥ï¼Œæ‰€ä»¥ä»–ä»¬é‡‡ç”¨äº†ä¸€ä¸ªä¸‰å±‚çš„å¯Œâ€œæ¶æ„â€ï¼Œå°†ç³»ç»Ÿçš„å„å±‚åº”ç”¨åˆ†å¸ƒåˆ°ä¸€ä¸ªå¤§å‹æœåŠ¡é›†ç¾¤ä¸­ï¼Œè¿™æ ·ä¸€æ¥ï¼ŒGUIã€ä¸­é—´ä»¶å’Œæ•°æ®åº“è‡ªç„¶å°±éƒ½è¦è¿è¡Œåœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚</p></blockquote><p>The programmers decided, very early on, that all domain objects would have three instantiations: one in the GUI tier, one in the middleware tier, and one in the database tier. Since these instantiations lived on different machines, a rich system of interprocessor and inter-tier communications was set up. Method invocations between tiers were converted to objects, serialized, and marshaled across the wire.</p><blockquote><p>è¿™å¸®ç¨‹åºå‘˜åœ¨å¼€å‘åˆæœŸå°±å†³å®šç³»ç»Ÿä¸­æ‰€æœ‰é¢†åŸŸå¯¹è±¡éƒ½è¦æœ‰ä¸‰ä»½å®ä¾‹ï¼šGUI å±‚ä¸€ä»½ã€ä¸­é—´ä»¶å±‚ä¸€ä»½ã€æ•°æ®åº“å±‚ä¸€ä»½ã€‚è€Œç”±äºè¿™äº›å®ä¾‹è¦è¿è¡Œåœ¨ä¸åŒçš„æœºå™¨ä¸Šï¼Œäºæ˜¯ä¸€å¥—å®Œæ•´çš„è·¨å¤„ç†å™¨ï¼Œè·¨å±‚é€šä¿¡çš„å¯Œç³»ç»Ÿè¢«è®¾è®¡äº†å‡ºæ¥ã€‚è¯¥ç³»ç»Ÿå„å±‚ä¹‹é—´çš„å‡½æ•°è°ƒç”¨éƒ½ä¼šè¢«è½¬å˜ä¸ºå¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡åœ¨ç»è¿‡åºåˆ—åŒ–å’Œç¼–ç å¤„ç†ä¹‹åè¿›è¡Œç½‘ç»œä¼ è¾“ã€‚</p></blockquote><p>Now imagine what it took to implement a simple feature like adding a new field to an existing record. That field had to be added to the classes in all three tiers, and to several of the inter-tier messages. Since data traveled in both directions, four message protocols needed to be designed. Each protocol had a sending and receiving side, so eight protocol handlers were required. Three executables had to be built, each with three updated business objects, four new messages, and eight new handlers.</p><blockquote><p>ç°åœ¨å‡è®¾æˆ‘ä»¬æƒ³è¦å¢åŠ ä¸€ä¸ªç‰¹åˆ«ç®€å•çš„åŠŸèƒ½ï¼Œä¸ºç°æœ‰çš„è®°å½•æ·»åŠ ä¸€ä¸ªå­—æ®µã€‚åœ¨ä¸Šè¿°æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå­—æ®µå¿…é¡»è¢«åŒæ­¥æ·»åŠ åˆ°ç³»ç»Ÿæ‰€æœ‰ä¸‰ä¸ªåˆ†å±‚çš„ç±»ï¼Œä»¥åŠå‡ ä¸ªç”¨äºè·¨å±‚é€šä¿¡çš„æ¶ˆæ¯ç»“æ„ä¸­ã€‚ç”±äºæ•°æ®æ˜¯åŒå‘æµåŠ¨çš„ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬è¦ä¸ºæ­¤è®¾è®¡å››ä¸ªä¼ è¾“åè®®ã€‚è€Œåˆç”±äºæ¯ä¸ªåè®®éƒ½æœ‰å„è‡ªçš„å‘é€æ–¹å’Œæ¥æ”¶æ–¹ï¼Œæ‰€ä»¥æˆ‘ä»¬æ€»å…±éœ€è¦å®ç°å…«ä¸ªä¼ è¾“åè®®å¤„ç†å‡½æ•°ã€‚æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åšçš„æ˜¯åŒæ—¶æ„å»ºä¸‰ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½è¦åŒ…å«ä¸‰ä¸ªå˜æ›´è¿‡çš„ä¸šåŠ¡å¯¹è±¡ã€å››ä¸ªæ–°çš„æ¶ˆæ¯ç»“æ„ä»¥åŠå…«ä¸ªæ–°çš„å¤„ç†å‡½æ•°ã€‚</p></blockquote><p>And think of what those executables had to do to implement the simplest of features. Think of all the object instantiations, all the serializations, all the marshaling and de-marshaling, all the building and parsing of messages, all the socket communications, timeout managers, retry scenarios, and all the other extra stuff that you have to do just to get one simple thing done.</p><blockquote><p>è¿™å°±æ˜¯æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæœ€ç®€å•çš„åŠŸèƒ½æ‰€éœ€è¦åšçš„äº‹æƒ…ã€‚è¯»è€…å¯ä»¥æƒ³æƒ³æ‰€æœ‰è¿™äº›æ–°å¢å¯¹è±¡è¦è¿›è¡Œçš„åˆå§‹åŒ–ã€åºåˆ—åŒ–ã€ç¼–ç å’Œåç¼–ç ã€æ¶ˆæ¯æ„å»ºå’Œè§£æã€socket é€šä¿¡ã€è¶…æ—¶ç®¡ç†ã€é‡è¯•æƒ…å†µå¤„ç†ç­‰è¿‡ç¨‹ï¼Œæˆ‘ä»¬åšæ‰€æœ‰çš„è¿™äº›äº‹æƒ…å°±åªæ˜¯ä¸ºäº†å®Œæˆä¸€ç‚¹å°å°çš„åŠŸèƒ½å—ï¼Ÿè¿™ä»£ä»·æœªå…å¤ªå¤§äº†ç‚¹ã€‚</p></blockquote><p>Of course, during development the programmers did not have a server farm. Indeed, they simply ran all three executables in three different processes on a single machine. They developed this way for several years. But they were convinced that their architecture was right. And so, even though they were executing in a single machine, they continued all the object instantiations, all the serializations, all the marshaling and de-marshaling, all the building and parsing of messages, all the socket communications, and all the extra stuff in a single machine.</p><blockquote><p>å½“ç„¶ï¼Œè¿™å¸®ç¨‹åºå‘˜åœ¨å¼€å‘è¿‡ç¨‹ä¸­å®é™…ä¸Šæ˜¯æ²¡æœ‰å¤§å‹æœåŠ¡å™¨é›†ç¾¤å¯ä»¥ç”¨çš„ã€‚ä»–ä»¬å…¶å®ä»ç„¶æ˜¯åœ¨ä¸€å°æœºå™¨ä¸Šè¿è¡Œé‚£ä¸‰ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè€Œä¸”å°±è¿™æ ·å¼€å‘äº†å‡ å¹´æ—¶é—´ã€‚ç„¶è€Œï¼Œå³ä½¿è¿™ä¸ªç³»ç»Ÿåªåœ¨ä¸€å°æœºå™¨ä¸Šæ‰§è¡Œï¼Œä¹Ÿè¿˜æ˜¯è¦ç»å†æ‰€æœ‰è¿™äº›å¯¹è±¡çš„åˆå§‹åŒ–ã€åºåˆ—åŒ–ã€ç¼–ç ä¸åç¼–ç ã€æ¶ˆæ¯çš„æ„å»ºå’Œè§£æã€socket é€šä¿¡ç­‰è¿‡ç¨‹çš„ï¼Œä½†ä»–ä»¬ç›´åˆ°æœ€åè¿˜æ˜¯åšä¿¡è‡ªå·±çš„æ¶æ„æ˜¯æ­£ç¡®çš„ã€‚</p></blockquote><p>The irony is that company P never sold a system that required a server farm. Every system they ever deployed was a single server. And in that single server all three executables continued all the object instantiations, all the serializations, all the marshaling and de-marshaling, all the building and parsing of messages, all the socket communications, and all the extra stuff, in anticipation of a server farm that never existed, and never would.</p><blockquote><p>è¿™é‡Œæœ€è®½åˆºçš„æ˜¯ï¼ŒP å…¬å¸ä»æ¥å°±æ²¡æœ‰é”€å”®è¿‡ä¸€ä¸ªéœ€è¦æœåŠ¡å™¨é›†ç¾¤çš„ç³»ç»Ÿï¼Œä»–ä»¬æ‰€æœ‰æ›¾ç»éƒ¨ç½²è¿‡çš„ç³»ç»Ÿéƒ½æ˜¯åœ¨ä¸€å°æœºå™¨ä¸Šå®Œæˆçš„ã€‚ç„¶ååœ¨è¿™å°æœºå™¨ä¸Šï¼Œç³»ç»Ÿä¸­æ‰€æœ‰çš„ä¸‰ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä»ç„¶ç»§ç»­ç€è¿™äº›å¯¹è±¡åˆå§‹åŒ–ã€åºåˆ—åŒ–ã€ç¼–ç ä¸åç¼–ç ã€æ¶ˆæ¯çš„æ„å»ºä¸è§£æã€socket é€šä¿¡ç­‰ä¸å¿…è¦çš„å·¥ä½œï¼Œå°±æ˜¯ä¸ºäº†é€‚åº”ä¸€ä¸ªå¹¶ä¸å­˜åœ¨ä¸”ä¹Ÿæ°¸è¿œä¸ä¼šå­˜åœ¨çš„é›†ç¾¤ç¯å¢ƒã€‚</p></blockquote><p>The tragedy is that the architects, by making a premature decision, multiplied the development effort enormously.</p><blockquote><p>è¿™ä¸ªæ•…äº‹çš„æ‚²å‰§ä¹‹å¤„åœ¨äºï¼Œè½¯ä»¶æ¶æ„å¸ˆé€šè¿‡ä¸€ä¸ªè‰ç‡çš„å†³å®šæ— è°“åœ°å°†å¼€å‘æˆæœ¬æ”¾å¤§äº†æ•°å€ä¹‹å¤šã€‚</p></blockquote><p>The story of P is not isolated. Iâ€™ve seen it many times and in many places. Indeed, P is a superposition of all those places.</p><blockquote><p>è€Œä¸”ï¼ŒP å…¬å¸çš„æ•…äº‹ç»ä¸æ˜¯ä¸ªæ¡ˆï¼Œæˆ‘åœ¨å¾ˆå¤šåœ°æ–¹çœ‹åˆ°è¿‡è¿™ä¸ªæ•…äº‹çš„å„ç§ç‰ˆæœ¬ã€‚</p></blockquote><p>But there are worse fates than P.</p><blockquote><p>æ¥ä¸‹æ¥ï¼Œè¿˜æœ‰æ¯” P å…¬å¸æ›´ç³Ÿç³•çš„æ•…äº‹ã€‚</p></blockquote><p>Consider W, a local business that manages fleets of company cars. They recently hired an â€œArchitectâ€ to get their rag-tag software effort under control. And, let me tell you, control was this guyâ€™s middle name. He quickly realized that what this little operation needed was a full-blown, enterprise-scale, service-oriented â€œARCHITECTURE.â€ He created a huge domain model of all the different â€œobjectsâ€ in the business, designed a suite of services to manage these domain objects, and put all the developers on a path to Hell. As a simple example, suppose you wanted to add the name, address, and phone number of a contact person to a sales record. You had to go to the ServiceRegistry and ask for the service ID of the ContactService. Then you had to send a CreateContact message to the ContactService. Of course, this message had dozens of fields that all had to have valid data in themâ€”data to which the programmer had no access, since all the programmer had was a name, address, and phone number. After faking the data, the programmer had to jam the ID of the newly created contact into the sales record and send the UpdateContact message to the SaleRecordService.</p><blockquote><p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ W å…¬å¸çš„æ•…äº‹ã€‚è¯¥å…¬å¸æœ‰ä¸€é¡¹ç®¡ç†å…¶ç§Ÿèµè½¦é˜Ÿçš„æœ¬åœ°ä¸šåŠ¡ï¼Œä»–ä»¬æœ€è¿‘æ‹›è˜äº†ä¸€ä½â€œæ¶æ„å¸ˆâ€æ¥æ§åˆ¶ä»–ä»¬ç›®å‰çš„è½¯ä»¶å¼€å‘æˆæœ¬ã€‚è€Œä¸”æ®è¯´â€œæ§åˆ¶â€è¿™ä¸ªè¯å°±æ˜¯è¿™å®¶ä¼™çš„ä¸­é—´å- æ€»ä¹‹è¿™ä½â€œæ¶æ„å¸ˆâ€æ¥äº†ä¹‹åå¾ˆå¿«åšäº†åˆ¤æ–­ï¼Œè®¤ä¸ºè¿ä½œè¿™ä¸ªå°å°çš„ä¸šåŠ¡éœ€è¦çš„æ˜¯ä¸€ä¸ªå…¨å¥—çš„ã€ä¼ä¸šçº§çš„ã€é¢å‘æœåŠ¡çš„â€œæ¶æ„&quot;ã€‚äºæ˜¯ï¼Œä»–å°±åˆ›å»ºäº†ä¸€ä¸ªå·¨å¤§çš„åŸŸæ¨¡å‹ï¼Œå…¶ä¸­åŒ…å«äº†è¯¥ä¸šåŠ¡æ‰€æ¶‰åŠçš„æ‰€æœ‰â€œå¯¹è±¡â€ï¼Œå¹¶è®¾è®¡äº†ä¸€æ•´å¥—æœåŠ¡æ¥ç®¡ç†è¿™äº›å¯¹è±¡ï¼Œå·®ç‚¹å°†æ‰€æœ‰å¼€å‘äººå‘˜é€¼ç–¯ã€‚åœ¨ä»–è¿™å¥—â€œæ¶æ„â€ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨é”€å”®è®°å½•ä¸­æ·»åŠ ä¸€ä¸ªè”ç³»äººï¼Œæä¾›åå­—ã€åœ°å€å’Œç”µè¯å·ç ï¼Œå°±å¿…é¡»å…ˆè®¿é—® ServiceRegistryï¼ŒæŸ¥è¯¢ ContactService çš„ IDã€‚ç„¶åéœ€è¦å‘é€ä¸€æ¡ CreateContact æ¶ˆæ¯ç»™ ContactServiceã€‚å½“ç„¶ï¼Œè¿™ä¸ªæ¶ˆæ¯ç»“æ„æœ‰å‡ åä¸ªå­—æ®µï¼Œæ¯ä¸€ä¸ªå­—æ®µéƒ½éœ€è¦æœ‰æ•ˆçš„æ•°æ®æ¥å¡«å……â€”â€”è¿™äº›æ•°æ®æ˜¯æ™®é€šç¨‹åºå‘˜æ— æ³•è®¿é—®çš„ï¼Œä»–ä»¬æ‰‹é‡Œåªæœ‰åå­—ã€åœ°å€å’Œç”µè¯å·ç ã€‚åªæœ‰åœ¨ä¼ªé€ æ•°æ®ä¹‹åï¼Œç¨‹åºå‘˜æ‰èƒ½å°†æ–°å»ºçš„ Contact è®°å½• ID å¡«å…¥ UpdateContact æ¶ˆæ¯ä¸­ï¼Œæœ€åè¿˜è¦å‘é€ç»™ SaleRecordServiceã€‚</p></blockquote><p>Of course, to test anything you had to fire up all the necessary services, one by one, and fire up the message bus, and the BPel server, and â€¦ And then, there were the propagation delays as these messages bounced from service to service, and waited in queue after queue.</p><blockquote><p>å½“ç„¶ï¼Œä¸ºäº†æµ‹è¯•è¿™ä¸€åˆ‡ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»å°†æ‰€æœ‰çš„æœåŠ¡å…¨éƒ¨è¿è¡Œèµ·æ¥ï¼ŒåŒæ—¶è¿˜è¦è¿è¡Œæ¶ˆæ¯æ€»çº¿ã€BPel æœåŠ¡å™¨ç­‰ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œè¿™äº›æ¶ˆæ¯è¿˜ä¼šåœ¨æ¯ä¸ªæœåŠ¡ä¹‹é—´ä¼ é€’æ—¶å‡ºç°å»¶è¿Ÿï¼Œéœ€è¦ä¸€ä¸ªé˜Ÿåˆ—æ¥ä¸€ä¸ªé˜Ÿåˆ—åœ°ç­‰å¾…ã€‚</p></blockquote><p>And then if you wanted to add a new featureâ€”well, you can imagine the coupling between all those services, and the sheer volume of WSDLs that needed changing, and all the redeployments those changes necessitated â€¦</p><blockquote><p>å¦‚æœè¿˜éœ€è¦æ·»åŠ æ–°åŠŸèƒ½çš„è¯ï¼Œè¯»è€…å¯ä»¥æƒ³è±¡ä¸€ä¸‹æ‰€æœ‰è¿™äº›æœåŠ¡ä¹‹é—´çš„è€¦åˆå…³ç³»ã€é‚£äº›éœ€è¦ä¿®æ”¹çš„å¤§é‡ WSDL æ–‡ä»¶ä»¥åŠéœ€è¦è¿›è¡Œçš„é‡æ–°éƒ¨ç½²ã€‚</p></blockquote><p>Hell starts to seem like a nice place by comparison.</p><blockquote><p>è¯´çœŸçš„ï¼Œåœ°ç‹±çœ‹èµ·æ¥ä¹Ÿä¸è¿‡å¦‚æ­¤å§!</p></blockquote><p>Thereâ€™s nothing intrinsically wrong with a software system that is structured around services. The error at W was the premature adoption and enforcement of a suite of tools that promised SoAâ€”that is, the premature adoption of a massive suite of domain object services. The cost of those errors was sheer person-hoursâ€”person-hours in drovesâ€”flushed down the SoA vortex.</p><blockquote><p>æŒ‰ç…§æœåŠ¡æ¥ç»„ç»‡ä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿçš„ç»“æ„è¿™ä»¶äº‹æœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼ŒW å…¬å¸çš„é”™è¯¯ä¸»è¦åœ¨äºå¤ªè¿‡è‰ç‡åœ°é‡‡ç”¨å’Œå¼ºåˆ¶æ¨å¹¿äº†ä¸€å¥—å·ç§°æ˜¯ SOA ä½“ç³»çš„å·¥å…·â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œä»–ä»¬è¿‡äºè‰ç‡åœ°é‡‡ç”¨äº†ä¸€æ•´å¥—åŸŸå¯¹è±¡æœåŠ¡ä½“ç³»ã€‚è¿™ä¸ªé”™è¯¯è®©å…¬å¸å¤§é‡çš„äººåŠ›éƒ½è€—è´¹åœ¨äº†å®ç°è¿™ä¸ªæ‰€è°“çš„ SOA æ¶æ„ä¸Šã€‚</p></blockquote><p>I could go on describing one architectural failure after another. But letâ€™s talk about an architectural success instead.</p><blockquote><p>æˆ‘ä»¬è¿˜å¯ä»¥ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æè¿°å¾ˆå¤šè¿™ç±»æ¶æ„è®¾è®¡å¤±è´¥çš„æ¡ˆä¾‹ï¼Œä½†è¿˜æ˜¯å…ˆæ¥è®²ä¸€äº›æˆåŠŸçš„æ¡ˆä¾‹å§ã€‚</p></blockquote><h2 id="fitnesse" tabindex="-1"><a class="header-anchor" href="#fitnesse" aria-hidden="true">#</a> FITNESSE</h2><p>My Son, Micah, and I started work on FitNesse in 2001. The idea was to create a simple wiki that wrapped Ward Cunninghamâ€™s FIT tool for writing acceptance tests.</p><blockquote><p>æˆ‘å’Œæˆ‘å„¿å­ Micah åœ¨ 2001 å¹´åˆ›ç«‹äº†ä¸€å®¶å« FitNesse çš„å…¬å¸ã€‚æƒ³æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªç®€å•çš„ wiki æ¥åŒ…è£…ä¸€ä¸‹ Ward Cunningham çš„ FIT å·¥å…·ï¼Œä»¥ç¼–å†™éªŒæ”¶æµ‹è¯•ï¼ˆacceptance testï¼‰ã€‚</p></blockquote><p>This was back in the days before Maven â€œsolvedâ€ the jar file problem. I was adamant that anything we produced should not require people to download more than one jar file. I called this rule, â€œDownload and Go.â€ This rule drove many of our decisions.</p><blockquote><p>è¿™ä»¶äº‹æƒ…å‘ç”Ÿåœ¨ Maven å·¥å…·é¢ä¸–å¹¶â€œè§£å†³äº†â€ jar æ–‡ä»¶é—®é¢˜ä¹‹å‰ã€‚æˆ‘å½“æ—¶åšä¿¡æˆ‘ä»¬çš„äº§å“ä¸åº”è¯¥è®©ç”¨æˆ·ä¸‹è½½è¶…è¿‡ä¸€ä¸ªçš„ jar æ–‡ä»¶ï¼Œæˆ‘ç§°è¿™æ¡è§„åˆ™ä¸ºâ€œä¸‹è½½å³å¯æ‰§è¡Œâ€ã€‚è¿™æ¡è§„åˆ™æŒ‡å¯¼äº†æˆ‘ä»¬ä¹‹åçš„å¾ˆå¤šå†³ç­–ã€‚</p></blockquote><p>One of the first decisions was to write our own web server, specific to the needs of FitNesse. This might sound absurd. Even in 2001 there were plenty of open source web servers that we could have used. Yet writing our own turned out to be a really good decision because a bare-bones web server is a very simple piece of software to write and it allowed us to postpone any web framework decision until much later.2</p><blockquote><p>ç¬¬ä¸€ä¸ªå†³ç­–æ˜¯æ ¹æ® FitNesse çš„éœ€è¦ä¸“é—¨ç¼–å†™äº†å±äºæˆ‘ä»¬è‡ªå·±çš„ Web æœåŠ¡å™¨ã€‚è¿™å¯èƒ½å¬èµ·æ¥å¾ˆå‚»ï¼Œå³ä½¿åœ¨ 2001 å¹´ï¼Œå¸‚é¢ä¸Šä¹Ÿæœ‰è¶³å¤Ÿå¤šçš„å¼€æºçš„ Web æœåŠ¡å™¨å¯ä¾›é€‰ç”¨ã€‚ç„¶è€Œç¼–å†™å±äºè‡ªå·±çš„ Web æœåŠ¡å™¨å®é™…ä¸Šæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„å†³ç­–ï¼Œå› ä¸ºä¸€ä¸ªåªåŒ…å«åŸºæœ¬åŠŸèƒ½çš„ Web æœåŠ¡å™¨éƒ¨ç½²èµ·æ¥éå¸¸ç®€å•ï¼Œå®ƒå…è®¸æˆ‘ä»¬å°†ä»»ä½•ä¸å…·ä½“ Web æ¡†æ¶ç›¸å…³çš„å†³ç­–å»¶åã€‚</p></blockquote><p>Another early decision was to avoid thinking about a database. We had MySQL in the back of our minds, but we purposely delayed that decision by employing a design that made the decision irrelevant. That design was simply to put an interface between all data accesses and the data repository itself.</p><blockquote><p>æˆ‘ä»¬åšçš„å¦ä¸€ä¸ªæ—©æœŸå†³ç­–æ˜¯é¿å…è€ƒè™‘æ•°æ®åº“é—®é¢˜ã€‚æˆ‘ä»¬å½“æ—¶ç¡®å®è€ƒè™‘è¿‡ä½¿ç”¨ MySQLï¼Œä½†æœ€åè¿˜æ˜¯æ•…æ„é‡‡ç”¨äº†ä¸€ç§ä¸æ•°æ®åº“æ— å…³çš„è®¾è®¡ï¼Œè€Œå»¶åäº†è¿™æ–¹é¢çš„å†³ç­–ã€‚è¿™éƒ¨åˆ†çš„è®¾è®¡ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨æ‰€æœ‰æ•°æ®è®¿é—®é€»è¾‘ä¸æ•°æ®ä»“åº“ä¹‹é—´å¢åŠ ä¸€ä¸ªæ¥å£ã€‚</p></blockquote><p>We put the data access methods into an interface named WikiPage. Those methods provided all the functionality we needed to find, fetch, and save pages. Of course, we didnâ€™t implement those methods at first; we simply stubbed them out while we worked on features that didnâ€™t involve fetching and saving the data.</p><blockquote><p>æˆ‘ä»¬å°†æ•°æ®è®¿é—®æ–¹æ³•æ”¾åœ¨ä¸€ä¸ªåä¸º WikiPage çš„æ¥å£ä¸­ã€‚è¿™éƒ¨åˆ†æ–¹æ³•è´Ÿè´£æä¾›æ‰€éœ€çš„æŸ¥æ‰¾ã€è·å–å’Œä¿å­˜é¡µé¢çš„åŠŸèƒ½ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬æœ€åˆå¹¶æ²¡æœ‰å…·ä½“å®ç°è¿™äº›æ–¹æ³•ï¼Œåœ¨å¼€å‘ä¸éœ€è¦è·å–å’Œä¿å­˜æ•°æ®çš„é‚£éƒ¨åˆ†åŠŸèƒ½æ—¶ï¼Œæˆ‘ä»¬åªå†™äº†ä¸€ä¸ªå ä½æ–¹æ³•ã€‚</p></blockquote><p>Indeed, for three months we simply worked on translating wiki text into HTML. This didnâ€™t require any kind of data storage, so we created a class named MockWikiPage that simply left the data access methods stubbed.</p><blockquote><p>ç¡®å®ï¼Œæˆ‘ä»¬èŠ±äº†ä¸‰ä¸ªæœˆæ—¶é—´æ¥è§£å†³ wiki æ–‡æœ¬ä¸ HTML ä¹‹é—´çš„è½¬æ¢é—®é¢˜ï¼Œè¿™éƒ¨åˆ†çš„å·¥ä½œä¸ä»»ä½•ç±»å‹çš„æ•°æ®å­˜å‚¨éƒ½æ— å…³ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨åˆ›å»ºåä¸º MockWikiPage çš„æ¨¡å—æ—¶ï¼Œåªä¸äº†ä¸€äº›ç©ºçš„æ•°æ®è®¿é—®æ–¹æ³•ã€‚</p></blockquote><p>Eventually, those stubs became insufficient for the features we wanted to write. We needed real data access, not stubs. So we created a new derivative of WikiPage named InMemoryPage. This derivative implemented the data access method to manage a hash table of wiki pages, which we kept in RAM.</p><blockquote><p>æœ€ç»ˆï¼Œå½“è¿™äº›å ä½æ–¹æ³•ä¸å†æ”¯æŒæˆ‘ä»¬æ‰€è¦å¼€å‘çš„åŠŸèƒ½æ—¶ï¼Œæˆ‘ä»¬æ‰éœ€è¦çœŸæ­£å®ç°æ•°æ®è®¿é—®ã€‚ä¸ºæ­¤æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º InMemoryPage çš„ WikiPage çš„æ´¾ç”Ÿç±»ã€‚åœ¨è¿™ä¸ªæ´¾ç”Ÿç±»ä¸­ï¼Œå®ç°äº†ä¸€ç³»åˆ—æ•°æ®è®¿é—®æ–¹æ³•æ¥ç®¡ç†ä¸ wiki é¡µé¢ç›¸å…³çš„å“ˆå¸Œè¡¨ï¼ˆè¯¥å“ˆå¸Œè¡¨ä¼šä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­ï¼‰ã€‚</p></blockquote><p>This allowed us to write feature after feature for a full year. In fact, we got the whole first version of the FitNesse program working this way. We could create pages, link to other pages, do all the fancy wiki formatting, and even run tests with FIT. What we couldnâ€™t do was save any of our work.</p><blockquote><p>å°±è¿™æ ·ï¼Œæˆ‘ä»¬ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°å¼€å‘è¿™äº›ä¸šåŠ¡åŠŸèƒ½ï¼ŒèŠ±äº†æ•´æ•´ä¸€å¹´æ—¶é—´ã€‚äº‹å®ä¸Šï¼ŒFitNesse ç¨‹åºèƒ½æ­£å¸¸è¿è¡Œçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬æ˜¯è¿™æ ·çš„ï¼Œå®ƒèƒ½è®©æˆ‘ä»¬åˆ›å»ºé¡µé¢ã€é“¾æ¥å…¶ä»–é¡µé¢ã€ä½¿ç”¨ wiki æ ¼å¼å®Œæˆæ‰€æœ‰çš„è£…é¥°ï¼Œç”šè‡³ç”¨ FIT å·¥å…·è¿è¡Œæµ‹è¯•ã€‚å”¯ä¸€ä¸èƒ½åšçš„å°±æ˜¯çœŸæ­£åœ°ä¿å­˜æ•°æ®ã€‚</p></blockquote><p>When it came time to implement persistence, we thought again about MySQL, but decided that wasnâ€™t necessary in the short term, because it would be really easy to write the hash tables out to flat files. So we implemented FileSystemWikiPage, which just moved the functionality out to flat files, and then we continued developing more features.</p><blockquote><p>å½“è¯¥ç³»ç»Ÿéœ€è¦å®ç°æŒä¹…åŒ–æ—¶ï¼Œæˆ‘ä»¬åˆä»”ç»†è€ƒè™‘äº†ä¸€ä¸‹æ˜¯å¦é‡‡ç”¨ MySQLï¼Œæœ€ç»ˆè¿˜æ˜¯è§‰å¾—çŸ­æœŸå†…æ²¡æœ‰å¿…è¦ï¼Œå› ä¸ºå°†å“ˆå¸Œè¡¨å†™å…¥æ–‡ä»¶æ˜¯éå¸¸ç®€å•çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å®ç°äº†ä¸€ä¸ª FileSystemWikiPmgeï¼Œç”¨å•ä¸€çš„å¤§æ–‡ä»¶å®ç°äº†è¿™ä¸€åŠŸèƒ½ï¼ŒåŒæ—¶å°†æˆ‘ä»¬çš„ç²¾åŠ›æŠ•å…¥ç»§ç»­å¼€å‘æ›´å¤šçš„æ–°åŠŸèƒ½ä¸Šã€‚</p></blockquote><p>Three months later, we reached the conclusion that the flat file solution was good enough; we decided to abandon the idea of MySQL altogether. We deferred that decision into nonexistence and never looked back.</p><blockquote><p>ä¸‰ä¸ªæœˆä¹‹åï¼Œæˆ‘ä»¬å¾—å‡ºä¸€ä¸ªç»“è®ºï¼Œå¤§æ–‡ä»¶çš„å­˜å‚¨å·±ç»è¶³å¤Ÿå¥½äº†ï¼Œå®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ MySQLã€‚å°±è¿™æ ·ï¼Œæˆ‘ä»¬ä¸æ–­æ¨è¿Ÿè¿™ä¸ªå†³ç­–ï¼Œåˆ°æœ€åå‘ç°è¿™ä¸ªå†³ç­–ä¸éœ€è¦åšäº†ã€‚</p></blockquote><p>That would be the end of the story if it werenâ€™t for one of our customers who decided that he needed to put the wiki into MySQL for his own purposes. We showed him the architecture of WikiPages that had allowed us to defer the decision. He came back a day later with the whole system working in MySQL. He simply wrote a MySqlWikiPage derivative and got it working.</p><blockquote><p>å¦‚æœä¸æ˜¯æˆ‘ä»¬çš„ä¸€ä¸ªå®¢æˆ·ç”±äºè‡ªå·±çš„éœ€è¦è€Œå¸Œæœ›å°†æ•°æ®å­˜å…¥ MySQLï¼Œæˆ‘ä»¬çš„æ•…äº‹å°±åˆ°æ­¤ä¸ºæ­¢äº†ã€‚äº‹å®ä¸Šï¼Œåœ¨æˆ‘ä»¬ç»™ä»–å±•ç¤ºäº† WikiPage æ¶æ„ç»†èŠ‚ä¹‹åï¼Œä»–åªç”¨äº†ä¸€å¤©æ—¶é—´å°±å®ç°äº†ä¸€ä¸ªèƒ½åœ¨ MySQL ä¸Šè¿è¡Œçš„ç³»ç»Ÿï¼Œä»–æ‰€åšçš„å°±æ˜¯å†™äº†ä¸€ä¸ªåä¸º MySQLWikiPage çš„æ´¾ç”Ÿç±»ï¼Œè¯¥ç³»ç»Ÿå°±å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚</p></blockquote><p>We used to bundle that option with FitNesse, but nobody else ever used it, so eventually we dropped it. Even the customer who wrote the derivative eventually dropped it.</p><blockquote><p>æˆ‘ä»¬æ›¾ç»å°†è¿™ä¸ªå®ç°å’Œ FitNesse ä¸€èµ·æ‰“åŒ…åˆ†å‘ï¼Œä½†æ˜¯åæ¥æ²¡æœ‰äººçœŸæ­£ç”¨åˆ°è¿‡å®ƒï¼Œç”šè‡³è¿å®ç°è¿™ä¸ªåŠŸèƒ½çš„ç”¨æˆ·æœ€ç»ˆä¹Ÿä¸å†ä½¿ç”¨å®ƒäº†ã€‚</p></blockquote><p>Early in the development of FitNesse, we drew a boundary line between business rules and databases. That line prevented the business rules from knowing anything at all about the database, other than the simple data access methods. That decision allowed us to defer the choice and implementation of the database for well over a year. It allowed us to try the file system option, and it allowed us to change direction when we saw a better solution. Yet it did not prevent, or even impede, moving in the original direction (MySQL) when someone wanted it.</p><blockquote><p>åœ¨å¼€å‘ FitNesse çš„æ—©æœŸï¼Œæˆ‘ä»¬åœ¨ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“ä¹‹é—´ç”»äº†ä¸€æ¡è¾¹ç•Œçº¿ã€‚è¿™æ¡çº¿æœ‰æ•ˆåœ°é˜²æ­¢äº†ä¸šåŠ¡é€»è¾‘å¯¹æ•°æ®åº“äº§ç”Ÿä¾èµ–ï¼Œå®ƒåªèƒ½è®¿é—®ç®€å•çš„æ•°æ®è®¿é—®æ–¹æ³•ã€‚è¿™ä¸ªå†³ç­–ä½¿æˆ‘ä»¬å°†ä¸æ•°æ®åº“é€‰å‹å’Œå®ç°çš„å†³ç­–æ¨è¿Ÿäº†è¶…è¿‡ä¸€å¹´ã€‚åŒæ—¶æˆ‘ä»¬è¿˜èƒ½ç”¨æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œå®éªŒã€‚ä½¿æˆ‘ä»¬æœ€ç»ˆæ¢äº†ä¸€ä¸ªæ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚æ›´é‡è¦çš„æ˜¯ï¼Œè¯¥æ¶æ„åœ¨éœ€æ±‚çœŸçš„å‡ºç°æ—¶ï¼Œæ²¡æœ‰é˜»æ­¢ä»»ä½•äººé‡‡ç”¨ MySQLï¼Œç”šè‡³æ²¡æœ‰ä¸ºå…¶åˆ¶é€ ä»»ä½•éšœç¢ã€‚</p></blockquote><p>The fact that we did not have a database running for 18 months of development meant that, for 18 months, we did not have schema issues, query issues, database server issues, password issues, connection time issues, and all the other nasty issues that raise their ugly heads when you fire up a database. It also meant that all our tests ran fast, because there was no database to slow them down.</p><blockquote><p>åœ¨é•¿è¾¾ 18 ä¸ªæœˆçš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬äº‹å®ä¸Šæ²¡æœ‰ç”¨åˆ°è¿‡æ•°æ®åº“ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ä¸éœ€è¦é¢å¯¹è¡¨ç»“æ„é—®é¢˜ã€æŸ¥è¯¢é—®é¢˜ã€æ•°æ®åº“æœåŠ¡å™¨é—®é¢˜ã€å¯†ç é—®é¢˜ã€é“¾æ¥æ—¶é—´é—®é¢˜ç­‰ä¸€ç³»åˆ—ç”±äºæ•°æ®åº“å¸¦æ¥çš„æ£˜æ‰‹é—®é¢˜ã€‚è¿™æ ·æˆ‘ä»¬æ‰€æœ‰çš„æµ‹è¯•éƒ½ä¼šè¿›è¡Œå¾—å¾ˆå¿«ï¼Œå› ä¸ºå®ƒä»¬éƒ½ä¸ä¾èµ–æ•°æ®åº“ã€‚</p></blockquote><p>In short, drawing the boundary lines helped us delay and defer decisions, and it ultimately saved us an enormous amount of time and headaches. And thatâ€™s what a good architecture should do.</p><blockquote><p>ç®€å•æ¥è¯´ï¼Œé€šè¿‡åˆ’æ¸…è¾¹ç•Œï¼Œæˆ‘ä»¬å¯ä»¥æ¨è¿Ÿå’Œå»¶åä¸€äº›ç»†èŠ‚æ€§çš„å†³ç­–ï¼Œè¿™æœ€ç»ˆä¼šä¸ºæˆ‘ä»¬èŠ‚çœå¤§é‡çš„æ—¶é—´ã€é¿å…å¤§é‡çš„é—®é¢˜ã€‚è¿™å°±æ˜¯ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„æ¶æ„æ‰€åº”è¯¥å¸¦æ¥çš„åŠ©ç›Šã€‚</p></blockquote><h2 id="which-lines-do-you-draw-and-when-do-you-draw-them-åº”åœ¨ä½•æ—¶ã€ä½•å¤„ç”»è¿™äº›çº¿" tabindex="-1"><a class="header-anchor" href="#which-lines-do-you-draw-and-when-do-you-draw-them-åº”åœ¨ä½•æ—¶ã€ä½•å¤„ç”»è¿™äº›çº¿" aria-hidden="true">#</a> WHICH LINES DO YOU DRAW, AND WHEN DO YOU DRAW THEM? åº”åœ¨ä½•æ—¶ã€ä½•å¤„ç”»è¿™äº›çº¿</h2><p>You draw lines between things that matter and things that donâ€™t. The GUI doesnâ€™t matter to the business rules, so there should be a line between them. The database doesnâ€™t matter to the GUI, so there should be a line between them. The database doesnâ€™t matter to the business rules, so there should be a line between them.</p><blockquote><p>è¾¹ç•Œçº¿åº”è¯¥ç”»åœ¨é‚£äº›ä¸ç›¸å…³çš„äº‹æƒ…ä¸­é—´ã€‚GUI ä¸ä¸šåŠ¡é€»è¾‘æ— å…³ï¼Œæ‰€ä»¥ä¸¤è€…ä¹‹é—´åº”è¯¥æœ‰ä¸€æ¡è¾¹ç•Œçº¿ã€‚æ•°æ®åº“ä¸ GUI æ— å…³ï¼Œè¿™ä¸¤è€…ä¹‹é—´ä¹Ÿåº”è¯¥æœ‰ä¸€æ¡è¾¹ç•Œçº¿ã€‚æ•°æ®åº“åªä¸ä¸šåŠ¡é€»è¾‘æ— å…³ï¼Œæ‰€ä»¥ä¸¤è€…ä¹‹é—´ä¹Ÿåº”è¯¥æœ‰ä¸€æ¡è¾¹ç•Œçº¿ã€‚</p></blockquote><p>Some of you may have rejected one or more of those statements, especially the part about the business rules not caring about the database. Many of us have been taught to believe that the database is inextricably connected to the business rules. Some of us have even been convinced that the database is the embodiment of the business rules.</p><blockquote><p>ä¸Šé¢è¿™äº›è¯ï¼Œå°¤å…¶æ˜¯å…³äºä¸šåŠ¡é€»è¾‘ä¸æ•°æ®åº“æ— å…³çš„éƒ¨åˆ†å¯èƒ½ä¼šé­åˆ°éƒ¨åˆ†è¯»è€…çš„åå¯¹ã€‚å¤§éƒ¨åˆ†äººéƒ½å·²ç»ä¹ æƒ¯æ€§åœ°è®¤ä¸ºæ•°æ®åº“æ˜¯ä¸ä¸šåŠ¡é€»è¾‘ä¸å¯åˆ†å‰²çš„äº†ï¼Œæœ‰äº›äººç”šè‡³è®¤ä¸ºï¼Œæ•°æ®åº“ç›¸å…³é€»è¾‘éƒ¨åˆ†æœ¬èº«å°±æ˜¯ä¸šåŠ¡é€»è¾‘çš„å…·ä½“ä½“ç°ã€‚</p></blockquote><p>But, as we shall see in another chapter, this idea is misguided. The database is a tool that the business rules can use indirectly. The business rules donâ€™t need to know about the schema, or the query language, or any of the other details about the database. All the business rules need to know is that there is a set of functions that can be used to fetch or save data. This allows us to put the database behind an interface.</p><blockquote><p>ç„¶è€Œæ­£å¦‚æˆ‘ä»¬åœ¨ç¬¬ 18 ç« ä¸­å°†ä¼šè®²åˆ°çš„ï¼Œè¿™ä¸ªæƒ³æ³•ä»æ ¹æœ¬ä¸Šå°±æ˜¯é”™è¯¯çš„ã€‚æ•°æ®åº“åº”è¯¥æ˜¯ä¸šåŠ¡é€»è¾‘é—´æ¥ä½¿ç”¨çš„ä¸€ä¸ªå·¥å…·ã€‚ä¸šåŠ¡é€»è¾‘å¹¶ä¸éœ€è¦äº†è§£æ•°æ®åº“çš„è¡¨ç»“æ„ã€æŸ¥è¯¢è¯­è¨€æˆ–å…¶ä»–ä»»ä½•æ•°æ®åº“å†…éƒ¨çš„å®ç°ç»†èŠ‚ã€‚ä¸šåŠ¡é€»è¾‘å”¯ä¸€éœ€è¦çŸ¥é“çš„ï¼Œå°±æ˜¯æœ‰ä¸€ç»„å¯ä»¥ç”¨æ¥æŸ¥è¯¢å’Œä¿å­˜æ•°æ®çš„å‡½æ•°ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬æ‰å¯ä»¥å°†æ•°æ®åº“éšè—åœ¨æ¥å£åé¢ã€‚</p></blockquote><p>You can see this clearly in Figure 17.1. The BusinessRules use the DatabaseInterface to load and save data. The DatabaseAccess implements the interface and directs the operation of the actual Database.</p><blockquote><p>æˆ‘ä»¬å¯ä»¥ä»å›¾ 17.1 ä¸­æ¸…æ™°åœ°çœ‹åˆ°ï¼ŒBusinessRules æ˜¯é€šè¿‡ DatabaseInterface æ¥åŠ è½½å’Œä¿å­˜æ•°æ®çš„ã€‚è€Œ DatabaseAccess åˆ™è´Ÿè´£å®ç°è¯¥æ¥å£ï¼Œä»¥åŠå…¶ä¸å®é™… Database çš„äº¤äº’ã€‚</p></blockquote><!----><p>The classes and interfaces in this diagram are symbolic. In a real application, there would be many business rule classes, many database interface classes, and many database access implementations. All of them, though, would follow roughly the same pattern.</p><blockquote><p>è¿™é‡Œçš„ç±»ä¸æ¥å£ä»…ä»…æ˜¯ä¸€ä¸ªä¾‹å­ã€‚åœ¨ä¸€ä¸ªçœŸå®çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå°†ä¼šæœ‰å¾ˆå¤šä¸šåŠ¡é€»è¾‘ç±»ã€å¾ˆå¤šæ•°æ®åº“æ¥å£ç±»ä»¥åŠå¾ˆå¤šæ•°æ®åº“è®¿é—®çš„å®ç°ã€‚ä¸è¿‡ï¼Œæ‰€æœ‰ä¸€åˆ‡æ‰€éµå¾ªçš„æ¨¡å¼åº”è¯¥æ˜¯ç›¸ä¼¼çš„ã€‚</p></blockquote><p>Where is the boundary line? The boundary is drawn across the inheritance relationship, just below the DatabaseInterface (Figure 17.2).</p><blockquote><p>é‚£ä¹ˆè¿™é‡Œçš„è¾¹ç•Œçº¿åº”è¯¥è¢«ç”»åœ¨å“ªé‡Œï¼Ÿè¾¹ç•Œåº”è¯¥ç©¿è¿‡ç»§æ‰¿å…³ç³»ï¼Œåœ¨ DatabaseInterface ä¹‹ä¸‹ï¼ˆè§å›¾ 17.2ï¼‰ã€‚</p></blockquote><!----><p>Note the two arrows leaving the DatabaseAccess class. Those two arrows point away from the DatabaseAccess class. That means that none of these classes knows that the DatabaseAccess class exists.</p><blockquote><p>è¯·æ³¨æ„ï¼ŒDatabaseAccess ç±»çš„é‚£ä¸¤ä¸ªå¯¹å¤–çš„ç®­å¤´ã€‚è¿™ä¸¤ä¸ªç®­å¤´éƒ½æŒ‡å‘äº†è¿œç¦» DatabaseAccess ç±»çš„æ–¹å‘ï¼Œè¿™æ„å‘³ç€å®ƒä»¬æ‰€æŒ‡å‘çš„ä¸¤ä¸ªç±»éƒ½ä¸çŸ¥é“ DatabaseAccess ç±»çš„å­˜åœ¨ã€‚</p></blockquote><p>Now letâ€™s pull back a bit. Weâ€™ll look at the component that contains many business rules, and the component that contains the database and all its access classes (Figure 17.3).</p><blockquote><p>ä¸‹é¢è®©æˆ‘ä»¬æŠŠæŠ½è±¡å±‚æ¬¡æ‹‰é«˜ä¸€ç‚¹ï¼Œçœ‹ä¸€ä¸‹åŒ…å«å¤šä¸ªä¸šåŠ¡é€»è¾‘ç±»çš„ç»„ä»¶ä¸åŒ…å«æ•°æ®åº“åŠå…¶è®¿é—®ç±»çš„ç»„ä»¶ä¹‹é—´æ˜¯ä»€ä¹ˆå…³ç³»ï¼ˆè§å›¾ 17.3ï¼‰ã€‚</p></blockquote><!----><p>Note the direction of the arrow. The Database knows about the BusinessRules. The BusinessRules do not know about the Database. This implies that the DatabaseInterface classes live in the BusinessRules component, while the DatabaseAccess classes live in the Database component.</p><blockquote><p>è¯·æ³¨æ„ï¼Œå›¾ 17.3 ä¸­çš„ç®­å¤´æŒ‡å‘ï¼Œå®ƒè¯´æ˜äº† Database ç»„ä»¶çŸ¥é“ BusinessRules ç»„ä»¶çš„å­˜åœ¨ï¼Œè€Œ BusinessRules ç»„ä»¶åˆ™ä¸çŸ¥é“ Database ç»„ä»¶çš„å­˜åœ¨ã€‚è¿™æ„å‘³ç€ DatabaseInterface ç±»æ˜¯åŒ…å«åœ¨ BusinessRules ç»„ä»¶ä¸­çš„ï¼Œè€Œ DatabaseAccess ç±»åˆ™è¢«åŒ…å«åœ¨ Database ç»„ä»¶ä¸­ã€‚</p></blockquote><p>The direction of this line is important. It shows that the Database does not matter to the BusinessRules, but the Database cannot exist without the BusinessRules.</p><blockquote><p>è¿™ä¸ªç®­å¤´çš„æ–¹å‘å¾ˆé‡è¦ã€‚å› ä¸ºå®ƒæ„å‘³ç€ Database ç»„ä»¶ä¸ä¼šå¯¹ BusinessRules ç»„ä»¶å½¢æˆçš„å¹²æ‰°ï¼Œä½† Database ç»„ä»¶å´ä¸èƒ½è„«ç¦» BusinessRules ç»„ä»¶è€Œå­˜åœ¨ã€‚</p></blockquote><p>If that seems strange to you, just remember this point: The Database component contains the code that translates the calls made by the BusinessRules into the query language of the database. It is that translation code that knows about the BusinessRules.</p><blockquote><p>å¦‚æœè¯»è€…å¯¹ä¸Šé¢è¿™æ®µè¯æ„Ÿåˆ°å›°æƒ‘ï¼Œè¯·è®°ä½ä¸€ç‚¹ï¼ŒDatabase ç»„ä»¶ä¸­åŒ…å«äº†å°† BusinessRules ç»„ä»¶ä¸­çš„å‡½æ•°è°ƒç”¨è½¬åŒ–ä¸ºå…·ä½“æ•°æ®åº“æŸ¥è¯¢è¯­è¨€çš„ä»£ç ã€‚è¿™äº›è½¬æ¢ä»£ç å½“ç„¶å¿…é¡»çŸ¥é“ BusinessRules ç»„ä»¶çš„å­˜åœ¨ã€‚</p></blockquote><p>Having drawn this boundary line between the two components, and having set the direction of the arrow toward the BusinessRules, we can now see that the BusinessRules could use any kind of database. The Database component could be replaced with many different implementationsâ€”the BusinessRules donâ€™t care.</p><blockquote><p>é€šè¿‡åœ¨è¿™ä¸¤ä¸ªç»„ä»¶ä¹‹é—´ç”»è¾¹ç•Œçº¿ï¼Œå¹¶ä¸”è®©ç®­å¤´æŒ‡å‘ BusinessRules ç»„ä»¶ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥å¾ˆå®¹æ˜“åœ°æ˜ç™½ä¸ºä»€ä¹ˆ BusinessRules ç»„ä»¶å¯ä»¥ä½¿ç”¨ä»»ä½•ä¸€ç§æ•°æ®åº“ã€‚åœ¨è¿™é‡Œï¼ŒDatabase ç»„ä»¶å¯ä»¥è¢«æ›¿æ¢ä¸ºå¤šç§å®ç°ï¼ŒBusinessRules ç»„ä»¶å¹¶ä¸éœ€è¦çŸ¥é“è¿™ä»¶äº‹ã€‚</p></blockquote><p>The database could be implemented with Oracle, or MySQL, or Couch, or Datomic, or even flat files. The business rules donâ€™t care at all. And that means that the database decision can be deferred and you can focus on getting the business rules written and tested before you have to make the database decision.</p><blockquote><p>æ•°æ®åº“å¯ä»¥ç”¨ Oracleã€MySQLã€Couch æˆ–è€… Datomicï¼Œç”šè‡³å¤§æ–‡ä»¶æ¥å®ç°ã€‚ä¸šåŠ¡é€»è¾‘å¹¶ä¸éœ€è¦å…³å¿ƒè¿™ä»¶äº‹ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å«ä»¥å°†ä¸æ•°æ®åº“ç›¸å…³çš„å†³ç­–å»¶åï¼Œå…ˆä¸“æ³¨äºç¼–å†™ä¸šåŠ¡é€»è¾‘çš„ä»£ç ï¼Œè¿›è¡Œæµ‹è¯•ï¼Œç›´åˆ°ä¸å¾—ä¸é€‰æ‹©æ•°æ®åº“ä¸ºæ­¢ã€‚</p></blockquote><h2 id="what-about-input-and-output-è¾“å…¥å’Œè¾“å‡ºæ€ä¹ˆåŠ" tabindex="-1"><a class="header-anchor" href="#what-about-input-and-output-è¾“å…¥å’Œè¾“å‡ºæ€ä¹ˆåŠ" aria-hidden="true">#</a> WHAT ABOUT INPUT AND OUTPUT? è¾“å…¥å’Œè¾“å‡ºæ€ä¹ˆåŠ</h2><p>Developers and customers often get confused about what the system is. They see the GUI, and think that the GUI is the system. They define a system in terms of the GUI, so they believe that they should see the GUI start working immediately. They fail to realize a critically important principle: The IO is irrelevant.</p><blockquote><p>å¼€å‘è€…å’Œä½¿ç”¨è€…ç»å¸¸ä¼šå¯¹ç³»ç»Ÿè¾¹ç•Œç©¶ç«Ÿå¦‚ä½•å®šä¹‰è€Œæ„Ÿåˆ°å›°æƒ‘ã€‚ç”±äº GUI èƒ½å¤Ÿç›´è§‚çœ‹åˆ°ï¼Œå°±å¾ˆè‡ªç„¶åœ°æŠŠ GUI å½“æˆäº†ç³»ç»Ÿæœ¬èº«ã€‚è¿™äº›äººä»¥ GUI çš„è§†è§’æ¥å®šä¹‰æ•´ä¸ªç³»ç»Ÿï¼Œæ‰€ä»¥è®¤ä¸ºä»ç³»ç»Ÿå¼€å‘ä¸€å¼€å§‹ GUI éƒ¨åˆ†å°±åº”è¯¥æ­£å¸¸å·¥ä½œã€‚è¿™æ˜¯é”™è¯¯çš„ï¼Œè¿™é‡Œä»–ä»¬æ²¡æœ‰æ„è¯†åˆ°ä¸€ä¸ªéå¸¸é‡è¦çš„åŸåˆ™ï¼Œå³ I/O æ˜¯æ— å…³ç´§è¦çš„ã€‚</p></blockquote><p>This may be hard to grasp at first. We often think about the behavior of the system in terms of the behavior of the IO. Consider a video game, for example. Your experience is dominated by the interface: the screen, the mouse, the buttons, and the sounds. You forget that behind that interface there is a modelâ€”a sophisticated set of data structures and functionsâ€”driving it. More importantly, that model does not need the interface. It would happily execute its duties, modeling all the events in the game, without the game ever being displayed on the screen. The interface does not matter to the modelâ€”the business rules.</p><blockquote><p>è¿™ä¸ªåŸåˆ™å¯èƒ½ä¸€å¼€å§‹æ¯”è¾ƒéš¾ä»¥ç†è§£ï¼Œæ¯•ç«Ÿæˆ‘ä»¬ç»å¸¸ä»ç›´è§‰ä¸Šä¼šä»¥ I/O çš„è¡Œä¸ºæ¥å®šä¹‰ç³»ç»Ÿçš„è¡Œä¸ºã€‚ä»¥è§†é¢‘æ¸¸æˆä¸ºä¾‹ï¼Œæˆ‘ä»¬çš„ä¸»è§‚ä½“éªŒæ˜¯ä»¥ç•Œé¢ååº”ä¸ºä¸»çš„ï¼Œè¿™äº›ååº”æ¥è‡ªå±å¹•ã€é¼ æ ‡ã€æŒ‰é’®å’Œå£°éŸ³ç­‰ã€‚ä½†è¯·ä¸è¦å¿˜äº†ï¼Œè¿™äº›ç•Œé¢èƒŒåå­˜åœ¨ç€ä¸€ä¸ªæ¨¡å‹â€”â€”ä¸€å¥—éå¸¸å¤æ‚çš„æ•°æ®ç»“æ„å’Œå‡½æ•°ï¼Œé‚£æ‰æ˜¯æ¸¸æˆçœŸæ­£çš„æ ¸å¿ƒé©±åŠ¨åŠ›ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œè¯¥æ¨¡å‹å¹¶ä¸ä¸€å®šéè¦æœ‰ä¸€ä¸ªç•Œé¢ã€‚å°±ç®—è¯¥æ¸¸æˆä¸æ˜¾ä¸åœ¨å±å¹•ä¸Šï¼Œå…¶æ¨¡å‹ä¹Ÿåº”è¯¥å¯ä»¥å®Œæˆæ‰€æœ‰çš„ä»»åŠ¡é€»è¾‘ï¼Œå¤„ç†æ‰€æœ‰çš„æ¸¸æˆäº‹ä»¶ã€‚å› æ­¤ï¼Œç•Œé¢å¯¹æ¨¡å‹â€”â€”ä¹Ÿå°±æ˜¯ä¸šåŠ¡é€»è¾‘æ¥è¯´â€”â€”ä¸€ç‚¹éƒ½ä¸é‡è¦ã€‚</p></blockquote><p>And so, once again, we see the GUI and BusinessRules components separated by a boundary line (Figure 17.4). Once again, we see that the less relevant component depends on the more relevant component. The arrows show which component knows about the other and, therefore, which component cares about the other. The GUI cares about the BusinessRules.</p><blockquote><p>æ‰€ä»¥ï¼ŒGUI å’Œ BusinessRules è¿™ä¸¤ä¸ªç»„ä»¶ä¹‹é—´ä¹Ÿåº”è¯¥æœ‰ä¸€æ¡è¾¹ç•Œçº¿ï¼ˆè§å›¾ 17.4ï¼‰ã€‚å†å¼ºè°ƒä¸€æ¬¡ï¼Œåœ¨è¿™é‡Œä¸é‡è¦çš„ç»„ä»¶ä¾èµ–äºè¾ƒä¸ºé‡è¦çš„ç»„ä»¶ï¼Œç®­å¤´æŒ‡å‘çš„æ–¹å‘ä»£è¡¨ç€ç»„ä»¶ä¹‹é—´çš„å…³ç³»ï¼ŒGUI å…³å¿ƒ BusinessRulesã€‚</p></blockquote><!----><p>Having drawn this boundary and this arrow, we can now see that the GUI could be replaced with any other kind of interfaceâ€”and the BusinessRules would not care.</p><blockquote><p>é€šè¿‡è¿™æ¡è¾¹ç•Œçº¿ä»¥åŠè¿™ä¸ªç®­å¤´ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡º GUI å¯ä»¥ç”¨ä»»ä½•ä¸€ç§å…¶ä»–å½¢å¼çš„ç•Œé¢æ¥ä»£æ›¿ã€‚BusinessRules ç»„ä»¶ä¸éœ€è¦äº†è§£è¿™äº›ç»†èŠ‚ã€‚</p></blockquote><h2 id="plugin-architecture-æ’ä»¶å¼æ¶æ„" tabindex="-1"><a class="header-anchor" href="#plugin-architecture-æ’ä»¶å¼æ¶æ„" aria-hidden="true">#</a> PLUGIN ARCHITECTURE æ’ä»¶å¼æ¶æ„</h2><p>Taken together, these two decisions about the database and the GUI create a kind of pattern for the addition of other components. That pattern is the same pattern that is used by systems that allow third-party plugins.</p><blockquote><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬ä¼¼ä¹å¯ä»¥åŸºäºæ•°æ®åº“å’Œ GUI è¿™ä¸¤ä¸ªä¸ºä¾‹æ¥å»ºç«‹ä¸€ç§å‘ç³»ç»Ÿæ·»åŠ å…¶ä»–ç»„ä»¶çš„æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼ä¸æ”¯æŒç¬¬ä¸‰æ–¹æ’ä»¶çš„ç³»ç»Ÿæ¨¡å¼æ˜¯ä¸€æ ·çš„ã€‚</p></blockquote><p>Indeed, the history of software development technology is the story of how to conveniently create plugins to establish a scalable and maintainable system architecture. The core business rules are kept separate from, and independent of, those components that are either optional or that can be implemented in many different forms (Figure 17.5).</p><blockquote><p>äº‹å®ä¸Šï¼Œè½¯ä»¶å¼€å‘æŠ€æœ¯å‘å±•çš„å†å²å°±æ˜¯ä¸€ä¸ªå¦‚ä½•æƒ³æ–¹è®¾æ³•æ–¹ä¾¿åœ°å¢åŠ æ’ä»¶ï¼Œä»è€Œæ„å»ºä¸€ä¸ªå¯æ‰©å±•ã€å¯ç»´æŠ¤çš„ç³»ç»Ÿæ¶æ„çš„æ•…äº‹ã€‚ç³»ç»Ÿçš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å¿…é¡»å’Œå…¶ä»–ç»„ä»¶éš”ç¦»ï¼Œä¿æŒç‹¬ç«‹ï¼Œè€Œè¿™äº›å…¶ä»–ç»„ä»¶è¦ä¹ˆæ˜¯å¯ä»¥å»æ‰çš„ï¼Œè¦ä¹ˆæ˜¯æœ‰å¤šç§å®ç°çš„ï¼ˆè§å›¾ 17.5ï¼‰ã€‚</p></blockquote><!----><p>Because the user interface in this design is considered to be a plugin, we have made it possible to plug in many different kinds of user interfaces. They could be web based, client/server based, SOA based, Console based, or based on any other kind of user interface technology.</p><blockquote><p>ç”±äºç”¨æˆ·ç•Œé¢åœ¨è¿™ä¸ªè®¾è®¡ä¸­æ˜¯ä»¥æ’ä»¶å½¢å¼å­˜åœ¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨æ’æ‹”çš„æ–¹å¼åˆ‡æ¢å¾ˆå¤šä¸åŒç±»å‹çš„ç”¨æˆ·ç•Œé¢ã€‚å¯ä»¥æ˜¯åŸºäº Web æ¨¡å¼çš„ã€åŸºäºå®¢æˆ·ç«¯/æœåŠ¡å™¨ç«¯æ¨¡å¼çš„ã€åŸºäº SOA æ¨¡å¼çš„ã€åŸºäºå‘½ä»¤è¡Œæ¨¡å¼çš„æˆ–è€…åŸºäºå…¶ä»–ä»»ä½•ç±»å‹çš„ç”¨æˆ·ç•Œé¢æŠ€æœ¯ã€‚</p></blockquote><p>The same is true of the database. Since we have chosen to treat it as a plugin, we can replace it with any of the various SQL databases, or a NOSQL database, or a file system-based database, or any other kind of database technology we might deem necessary in the future.</p><blockquote><p>æ•°æ®åº“ä¹Ÿç±»ä¼¼ã€‚å› ä¸ºæˆ‘ä»¬ç°åœ¨æ˜¯å°†æ•°æ®åº“ä½œä¸ºæ’ä»¶æ¥å¯¹å¾…çš„ï¼Œæ‰€ä»¥å®ƒå°±å¯ä»¥è¢«æ›¿æ¢æˆä¸åŒç±»å‹çš„ SQL æ•°æ®åº“ã€NoSQL æ•°æ®åº“ï¼Œå…¶è‡³åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„æ•°æ®åº“ï¼Œä»¥åŠæœªæ¥ä»»ä½•ä¸€ç§æˆ‘ä»¬è®¤ä¸ºæœ‰å¿…è¦å‘å±•çš„æ•°æ®åº“æŠ€æœ¯ã€‚</p></blockquote><p>These replacements might not be trivial. If the initial deployment of our system was web-based, then writing the plugin for a client-server UI could be challenging. It is likely that some of the communications between the business rules and the new UI would have to be reworked. Even so, by starting with the presumption of a plugin structure, we have at very least made such a change practical.</p><blockquote><p>å½“ç„¶ï¼Œè¿™äº›æ›¿æ¢å·¥ä½œå¯èƒ½å¹¶ä¸è½»æ¾ï¼Œå¦‚æœæˆ‘ä»¬çš„ç³»ç»Ÿä¸€å¼€å§‹æ˜¯æŒ‰ç…§ Web æ–¹å¼éƒ¨ç½²çš„ï¼Œé‚£ä¹ˆä¸ºå®ƒå†™ä¸€ä¸ªå®¢æˆ·ç«¯/æœåŠ¡å™¨ç«¯æ¨¡å‹çš„ UI æ’ä»¶å°±å¯èƒ½ä¼šæ¯”è¾ƒå›°éš¾ä¸€äº›ã€‚å¾ˆå¯èƒ½ä¸šåŠ¡é€»è¾‘ä¸æ–° UI ä¹‹é—´çš„äº¤äº’æ–¹å¼ä¹Ÿè¦é‡æ–°ä¿®æ”¹ã€‚ä½†å³ä½¿è¿™æ ·ï¼Œæ’ä»¶å¼æ¶æ„ä¹Ÿè‡³å°‘ä¸ºæˆ‘ä»¬æä¾›äº†è¿™ç§å®ç°çš„å¯èƒ½æ€§ã€‚</p></blockquote><h2 id="the-plugin-argument-æ’ä»¶å¼æ¶æ„çš„å¥½å¤„" tabindex="-1"><a class="header-anchor" href="#the-plugin-argument-æ’ä»¶å¼æ¶æ„çš„å¥½å¤„" aria-hidden="true">#</a> THE PLUGIN ARGUMENT æ’ä»¶å¼æ¶æ„çš„å¥½å¤„</h2><p>Consider the relationship between ReSharper and Visual Studio. These components are produced by completely different development teams in completely different companies. Indeed, JetBrains, the maker of ReSharper, lives in Russia. Microsoft, of course, resides in Redmond, Washington. Itâ€™s hard to imagine two development teams that are more separate.</p><blockquote><p>æˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€ä¸‹ ReSharper å’Œ Visual Studio ä¹‹é—´çš„å…³ç³»ã€‚è¿™ä¸¤éƒ¨åˆ†ç»„ä»¶æ˜¯ç”±ä¸¤ä¸ªå®Œå…¨ä¸åŒå…¬å¸çš„äººå„è‡ªç‹¬ç«‹å¼€å‘çš„ï¼ŒReSharper çš„å¼€å‘è€…æ˜¯ JetBrains å…¬å¸ï¼Œå®ƒä½äºä¿„ç½—æ–¯ï¼Œè€Œ Microsoft å…¬å¸åˆ™ä½äºåç››é¡¿å·çš„é›·å¾·è’™å¸‚ã€‚å¾ˆéš¾æƒ³è±¡æœ‰å“ªä¸¤ä¸ªå¼€å‘å›¢é˜Ÿä¼šæ¯”å®ƒä»¬éš”ç¦»å¾—æ›´å½»åº•çš„äº†ã€‚</p></blockquote><p>Which team can damage the other? Which team is immune to the other? The dependency structure tells the story (Figure 17.6). The source code of ReSharper depends on the source code of Visual Studio. Thus there is nothing that the ReSharper team can do to disturb the Visual Studio team. But the Visual Studio team could completely disable the ReSharper team if they so desired.</p><blockquote><p>é‚£ä¹ˆä»–ä»¬ä¹‹é—´ï¼Œæ˜¯å“ªä¸ªå›¢é˜Ÿå¯ä»¥å½±å“å¦ä¸€ä¸ªå›¢é˜Ÿçš„å·¥ä½œå‘¢ï¼Ÿåˆæ˜¯å“ªä¸ªå›¢é˜Ÿå¯ä»¥å¯¹å¦ä¸€ä¸ªå›¢é˜Ÿçš„å·¥ä½œå…ç–«å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡å›¾ 17.6 ä¸­çš„ä¾èµ–å…³ç³»æ¥å›ç­”ã€‚å¾ˆæ˜¾ç„¶ï¼Œæ˜¯ ReSharper çš„æºä»£ç ä¾èµ–äº Visual Studio çš„æºä»£ç ã€‚å› æ­¤ï¼Œæ˜¯ ReSharper å›¢é˜Ÿæ— æ³•å¹²æ‰° Visual Studio å›¢é˜Ÿçš„å·¥ä½œï¼Œè€Œ Visual Studio å›¢é˜Ÿå´å¯ä»¥å•æ–¹é¢ä¸­æ­¢ ReSharper å›¢é˜Ÿçš„ä»»ä½•å·¥ä½œã€‚</p></blockquote><!----><p>Thatâ€™s a deeply asymmetric relationship, and it is one that we desire to have in our own systems. We want certain modules to be immune to others. For example, we donâ€™t want the business rules to break when someone changes the format of a web page, or changes the schema of the database. We donâ€™t want changes in one part of the system to cause other unrelated parts of the system to break. We donâ€™t want our systems to exhibit that kind of fragility.</p><blockquote><p>è¿™æ˜¯ä¸€ç§éå¸¸ä¸å¯¹ç§°çš„å…³ç³»ï¼Œä½†æˆ‘ä»¬ç¡®å®å¸Œæœ›åœ¨è‡ªå·±çš„ç³»ç»Ÿä¸­æ„å»ºè¿™æ ·çš„å…³ç³»å› ä¸ºè¿™å¯ä»¥è®©éƒ¨åˆ†ç»„ä»¶å¯¹å…¶ä»–ç»„ä»¶çš„å˜æ›´å…ç–«ã€‚ä¾‹å¦‚ï¼Œå½“æœ‰äººä¿®æ”¹ Web é¡µé¢æ ¼å¼æˆ–ä¿®æ”¹æ•°æ®åº“è¡¨ç»“æ„æ—¶ï¼Œç³»ç»Ÿçš„ä¸šåŠ¡é€»è¾‘éƒ¨åˆ†å°±ä¸åº”è¯¥å—åˆ°å½±å“ã€‚å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿä¸å¸Œæœ›ç³»ç»Ÿä¸­æŸä¸€ä¸ªéƒ¨åˆ†å‘ç”Ÿçš„å˜æ›´ä¼šå¯¼è‡´å…¶ä»–ä¸ç›¸å…³çš„éƒ¨åˆ†å‡ºç°é—®é¢˜ï¼Œç³»ç»Ÿä¸åº”è¯¥è¿™ä¹ˆè„†å¼±ã€‚</p></blockquote><p>Arranging our systems into a plugin architecture creates firewalls across which changes cannot propagate. If the GUI plugs in to the business rules, then changes in the GUI cannot affect those business rules.</p><blockquote><p>å°†ç³»ç»Ÿè®¾è®¡ä¸ºæ’ä»¶å¼æ¶æ„ï¼Œå°±ç­‰äºæ„å»ºèµ·äº†ä¸€é¢å˜æ›´æ— æ³•é€¾è¶Šçš„é˜²ç«å¢™ï¼Œæ¢å¥è¯è¯´ï¼Œåªè¦ GUI æ˜¯ä»¥æ’ä»¶å½¢å¼æ’å…¥ç³»ç»Ÿçš„ä¸šåŠ¡é€»è¾‘ä¸­çš„ï¼Œé‚£ä¹ˆ GUI è¿™è¾¹æ‰€å‘ç”Ÿçš„å˜æ›´å°±ä¸ä¼šå½±å“ç³»ç»Ÿçš„ä¸šåŠ¡é€»è¾‘ã€‚</p></blockquote><p>Boundaries are drawn where there is an axis of change. The components on one side of the boundary change at different rates, and for different reasons, than the components on the other side of the boundary.</p><blockquote><p>æ‰€ä»¥ï¼Œè¾¹ç•Œçº¿ä¹Ÿåº”è¯¥æ²¿ç€ç³»ç»Ÿçš„å˜æ›´è½´æ¥ç”»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½äºè¾¹ç•Œçº¿ä¸¤ä¾§çš„ç»„ä»¶åº”è¯¥ä»¥ä¸åŒåŸå› ã€ä¸åŒé€Ÿç‡å˜åŒ–ç€ã€‚</p></blockquote><p>GUIs change at different times and at different rates than business rules, so there should be a boundary between them. Business rules change at different times and for different reasons than dependency injection frameworks, so there should be a boundary between them.</p><blockquote><p>ä¸€ä¸ªç³»ç»Ÿçš„ GUI ä¸ä¸šåŠ¡é€»è¾‘çš„å˜æ›´åŸå› ã€å˜æ›´é€Ÿç‡æ˜¾ç„¶æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥äºŒè€…ä¸­é—´åº”è¯¥æœ‰ä¸€æ¡è¾¹ç•Œçº¿ã€‚åŒæ ·çš„ï¼Œä¸€ä¸ªç³»ç»Ÿçš„ä¸šåŠ¡é€»è¾‘ä¸ä¾èµ–æ³¨å…¥æ¡†æ¶ä¹‹é—´çš„å˜æ›´åŸå› å’Œå˜æ›´é€Ÿåº¦ä¹Ÿä¼šä¸åŒï¼Œå®ƒä»¬ä¹‹é—´ä¹Ÿåº”è¯¥ç”»è¾¹ç•Œçº¿ã€‚</p></blockquote><p>This is simply the Single Responsibility Principle again. The SRP tells us where to draw our boundaries.</p><blockquote><p>è¿™å…¶å®å°±æ˜¯å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰çš„å…·ä½“å®ç°ï¼ŒSRP çš„ä½œç”¨å°±æ˜¯å‘Šè¯‰æˆ‘ä»¬åº”è¯¥åœ¨å“ªé‡Œç”»è¾¹ç•Œçº¿ã€‚</p></blockquote><h2 id="conclusion-æœ¬ç« å°ç»“" tabindex="-1"><a class="header-anchor" href="#conclusion-æœ¬ç« å°ç»“" aria-hidden="true">#</a> CONCLUSION æœ¬ç« å°ç»“</h2><p>To draw boundary lines in a software architecture, you first partition the system into components. Some of those components are core business rules; others are plugins that contain necessary functions that are not directly related to the core business. Then you arrange the code in those components such that the arrows between them point in one directionâ€”toward the core business.</p><blockquote><p>ä¸ºäº†åœ¨è½¯ä»¶æ¶æ„ä¸­ç”»è¾¹ç•Œçº¿ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå°†ç³»ç»Ÿåˆ†å‰²æˆç»„ä»¶ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ç»„ä»¶ï¼Œè€Œå¦ä¸€éƒ¨åˆ†åˆ™æ˜¯ä¸æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æ— å…³ä½†è´Ÿè´£æä¾›å¿…è¦åŠŸèƒ½çš„æ’ä»¶ã€‚ç„¶åé€šè¿‡å¯¹æºä»£ç çš„ä¿®æ”¹ï¼Œè®©è¿™äº›éæ ¸å¿ƒç»„ä»¶ä¾èµ–äºç³»ç»Ÿçš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ç»„ä»¶ã€‚</p></blockquote><p>You should recognize this as an application of the Dependency Inversion Principle and the Stable Abstractions Principle. Dependency arrows are arranged to point from lower-level details to higher-level abstractions.</p><blockquote><p>å…¶å®ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§å¯¹ä¾èµ–åè½¬åŸåˆ™ï¼ˆDIPï¼‰å’Œç¨³å®šæŠ½è±¡åŸåˆ™ï¼ˆSAPï¼‰çš„å…·ä½“åº”ç”¨ï¼Œä¾èµ–ç®­å¤´åº”è¯¥ç”±åº•å±‚å…·ä½“å®ç°ç»†èŠ‚æŒ‡å‘é«˜å±‚æŠ½è±¡çš„æ–¹å‘ã€‚</p></blockquote></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/windily-cloud/obsidian-publish/edit/main/Publish/Publish/Clean Archtechture/ch17.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="info">2022/9/20 11:11:04</span></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: wwww.4399li@qq.com">windilycloud</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html" class="nav-link prev" aria-label="ch16.md"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="icon iconfont icon-file"></span>ch16.md</div></a><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch18.html" class="nav-link next" aria-label="ch18.md"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">ch18.md<span class="icon iconfont icon-file"></span></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">ä»€ä¹ˆæ˜¯å¹¸è¤”ï¼Ÿ å¹¸ç¦å°±æ˜¯çŒ«åƒé±¼ç‹—åƒè‚‰ï¼Œå¥¥ç‰¹æ›¼æ‰“å°æ€ªå…½ï¼</div><div class="copyright">Copyright Â© 2022 Windily-Cloud</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/obsidian-publish/assets/app.887b133c.js" defer></script>
  </body>
</html>
