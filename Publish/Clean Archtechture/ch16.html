<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.51" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://windily-cloud.github.io/obsidian-publish/Publish/Clean%20Archtechture/ch16.html"><meta property="og:site_name" content="Windily Cloud"><meta property="og:title" content="Chap16. INDEPENDENCE ç‹¬ç«‹æ€§"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-09-20T11:11:04.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:modified_time" content="2022-09-20T11:11:04.000Z"><title>Chap16. INDEPENDENCE ç‹¬ç«‹æ€§ | Windily Cloud</title><meta name="description" content="Windily Cloud's Blog">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/obsidian-publish/assets/style.12da8f21.css">
    <link rel="modulepreload" href="/obsidian-publish/assets/app.887b133c.js"><link rel="modulepreload" href="/obsidian-publish/assets/ch16.html.20b93b21.js"><link rel="modulepreload" href="/obsidian-publish/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/obsidian-publish/assets/ch16.html.b2dc5528.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.c7e76e53.js"><link rel="prefetch" href="/obsidian-publish/assets/home.html.f01af163.js"><link rel="prefetch" href="/obsidian-publish/assets/å¯¼èˆª.html.d24325cb.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.fc3247cd.js"><link rel="prefetch" href="/obsidian-publish/assets/afterword.html.279a3dae.js"><link rel="prefetch" href="/obsidian-publish/assets/ch1.html.ad67b7a0.js"><link rel="prefetch" href="/obsidian-publish/assets/ch10.html.74f49c94.js"><link rel="prefetch" href="/obsidian-publish/assets/ch11.html.7b8b868f.js"><link rel="prefetch" href="/obsidian-publish/assets/ch12.html.0897d88d.js"><link rel="prefetch" href="/obsidian-publish/assets/ch13.html.871f1a29.js"><link rel="prefetch" href="/obsidian-publish/assets/ch14.html.9cf7c1a7.js"><link rel="prefetch" href="/obsidian-publish/assets/ch15.html.1ee0e012.js"><link rel="prefetch" href="/obsidian-publish/assets/ch17.html.d50b6029.js"><link rel="prefetch" href="/obsidian-publish/assets/ch18.html.f9083031.js"><link rel="prefetch" href="/obsidian-publish/assets/ch19.html.a8daed86.js"><link rel="prefetch" href="/obsidian-publish/assets/ch2.html.f712f0c4.js"><link rel="prefetch" href="/obsidian-publish/assets/ch20.html.008de7bb.js"><link rel="prefetch" href="/obsidian-publish/assets/ch21.html.bc3946ee.js"><link rel="prefetch" href="/obsidian-publish/assets/ch22.html.dcd080ee.js"><link rel="prefetch" href="/obsidian-publish/assets/ch23.html.4bd6fad0.js"><link rel="prefetch" href="/obsidian-publish/assets/ch24.html.5af7f550.js"><link rel="prefetch" href="/obsidian-publish/assets/ch25.html.cdcf732e.js"><link rel="prefetch" href="/obsidian-publish/assets/ch26.html.d56c6b1b.js"><link rel="prefetch" href="/obsidian-publish/assets/ch27.html.1d0c5f03.js"><link rel="prefetch" href="/obsidian-publish/assets/ch28.html.a9585c5e.js"><link rel="prefetch" href="/obsidian-publish/assets/ch29.html.7898d2ef.js"><link rel="prefetch" href="/obsidian-publish/assets/ch3.html.4e106aa0.js"><link rel="prefetch" href="/obsidian-publish/assets/ch30.html.efd82950.js"><link rel="prefetch" href="/obsidian-publish/assets/ch31.html.054b22ad.js"><link rel="prefetch" href="/obsidian-publish/assets/ch32.html.25d75f30.js"><link rel="prefetch" href="/obsidian-publish/assets/ch33.html.058b06f6.js"><link rel="prefetch" href="/obsidian-publish/assets/ch34.html.61d3f411.js"><link rel="prefetch" href="/obsidian-publish/assets/ch4.html.a6691c1e.js"><link rel="prefetch" href="/obsidian-publish/assets/ch5.html.326ac1a0.js"><link rel="prefetch" href="/obsidian-publish/assets/ch6.html.b00c3f6a.js"><link rel="prefetch" href="/obsidian-publish/assets/ch7.html.4e35799e.js"><link rel="prefetch" href="/obsidian-publish/assets/ch8.html.f553bf58.js"><link rel="prefetch" href="/obsidian-publish/assets/ch9.html.1abe47e0.js"><link rel="prefetch" href="/obsidian-publish/assets/part1.html.61a30e56.js"><link rel="prefetch" href="/obsidian-publish/assets/part2.html.c688cf00.js"><link rel="prefetch" href="/obsidian-publish/assets/part3.html.19a54833.js"><link rel="prefetch" href="/obsidian-publish/assets/part4.html.e97d623d.js"><link rel="prefetch" href="/obsidian-publish/assets/part5.html.59f213ed.js"><link rel="prefetch" href="/obsidian-publish/assets/part6.html.565d8d69.js"><link rel="prefetch" href="/obsidian-publish/assets/obsidainæ–‡æ¡£å¯¼å‡ºçš„æ–¹æ³•.html.8c97282e.js"><link rel="prefetch" href="/obsidian-publish/assets/ç¬”è®°åˆ†ç±»æ–¹æ³•çš„æ€è€ƒ.html.7a0981ad.js"><link rel="prefetch" href="/obsidian-publish/assets/æ‚è¯ï¼šä»æ„è¯†å½¢æ€åˆ†æè¥¿æ–¹ç–«æƒ….html.609d0549.js"><link rel="prefetch" href="/obsidian-publish/assets/è¯»æ¸…æ”¿åºœæ˜¯å¦åº”è¯¥ä¿®å»ºé“è·¯ä¸€æ–‡.html.0ce08377.js"><link rel="prefetch" href="/obsidian-publish/assets/404.html.cc115e5e.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.60ae3ce2.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.c09081fd.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.70634028.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.3b70efd7.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.f5a6049f.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.d91b9c1f.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.32852561.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.0a68a710.js"><link rel="prefetch" href="/obsidian-publish/assets/home.html.93b7cca5.js"><link rel="prefetch" href="/obsidian-publish/assets/å¯¼èˆª.html.a1c9d7de.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.0da27cdd.js"><link rel="prefetch" href="/obsidian-publish/assets/afterword.html.b850d04a.js"><link rel="prefetch" href="/obsidian-publish/assets/ch1.html.5aa5f6f6.js"><link rel="prefetch" href="/obsidian-publish/assets/ch10.html.413c371f.js"><link rel="prefetch" href="/obsidian-publish/assets/ch11.html.3cd7a242.js"><link rel="prefetch" href="/obsidian-publish/assets/ch12.html.175ce04d.js"><link rel="prefetch" href="/obsidian-publish/assets/ch13.html.fc4a1701.js"><link rel="prefetch" href="/obsidian-publish/assets/ch14.html.199a9f38.js"><link rel="prefetch" href="/obsidian-publish/assets/ch15.html.5b8799e9.js"><link rel="prefetch" href="/obsidian-publish/assets/ch17.html.165fc3da.js"><link rel="prefetch" href="/obsidian-publish/assets/ch18.html.4cd429e5.js"><link rel="prefetch" href="/obsidian-publish/assets/ch19.html.3e2d64e7.js"><link rel="prefetch" href="/obsidian-publish/assets/ch2.html.384a9648.js"><link rel="prefetch" href="/obsidian-publish/assets/ch20.html.b1ad3804.js"><link rel="prefetch" href="/obsidian-publish/assets/ch21.html.58811bd6.js"><link rel="prefetch" href="/obsidian-publish/assets/ch22.html.44e934ae.js"><link rel="prefetch" href="/obsidian-publish/assets/ch23.html.d77e680e.js"><link rel="prefetch" href="/obsidian-publish/assets/ch24.html.79a8927d.js"><link rel="prefetch" href="/obsidian-publish/assets/ch25.html.a6d9e7e0.js"><link rel="prefetch" href="/obsidian-publish/assets/ch26.html.c53b41bf.js"><link rel="prefetch" href="/obsidian-publish/assets/ch27.html.fdbedd86.js"><link rel="prefetch" href="/obsidian-publish/assets/ch28.html.8d17578d.js"><link rel="prefetch" href="/obsidian-publish/assets/ch29.html.69ad75a7.js"><link rel="prefetch" href="/obsidian-publish/assets/ch3.html.ef8bfaee.js"><link rel="prefetch" href="/obsidian-publish/assets/ch30.html.d5d16d0e.js"><link rel="prefetch" href="/obsidian-publish/assets/ch31.html.33b5c44c.js"><link rel="prefetch" href="/obsidian-publish/assets/ch32.html.6c12ea21.js"><link rel="prefetch" href="/obsidian-publish/assets/ch33.html.7adbcd24.js"><link rel="prefetch" href="/obsidian-publish/assets/ch34.html.c7a5cd99.js"><link rel="prefetch" href="/obsidian-publish/assets/ch4.html.f4b07606.js"><link rel="prefetch" href="/obsidian-publish/assets/ch5.html.0f2533d2.js"><link rel="prefetch" href="/obsidian-publish/assets/ch6.html.c64dc16e.js"><link rel="prefetch" href="/obsidian-publish/assets/ch7.html.d8f304e4.js"><link rel="prefetch" href="/obsidian-publish/assets/ch8.html.ac3dd3f7.js"><link rel="prefetch" href="/obsidian-publish/assets/ch9.html.e8bdc588.js"><link rel="prefetch" href="/obsidian-publish/assets/part1.html.f20e95e2.js"><link rel="prefetch" href="/obsidian-publish/assets/part2.html.46fb949d.js"><link rel="prefetch" href="/obsidian-publish/assets/part3.html.37fde797.js"><link rel="prefetch" href="/obsidian-publish/assets/part4.html.e291bbe5.js"><link rel="prefetch" href="/obsidian-publish/assets/part5.html.7deee47f.js"><link rel="prefetch" href="/obsidian-publish/assets/part6.html.6126ed62.js"><link rel="prefetch" href="/obsidian-publish/assets/obsidainæ–‡æ¡£å¯¼å‡ºçš„æ–¹æ³•.html.f99ad030.js"><link rel="prefetch" href="/obsidian-publish/assets/ç¬”è®°åˆ†ç±»æ–¹æ³•çš„æ€è€ƒ.html.f2f4101a.js"><link rel="prefetch" href="/obsidian-publish/assets/æ‚è¯ï¼šä»æ„è¯†å½¢æ€åˆ†æè¥¿æ–¹ç–«æƒ….html.9eadd293.js"><link rel="prefetch" href="/obsidian-publish/assets/è¯»æ¸…æ”¿åºœæ˜¯å¦åº”è¯¥ä¿®å»ºé“è·¯ä¸€æ–‡.html.71c36bf1.js"><link rel="prefetch" href="/obsidian-publish/assets/404.html.24a96f75.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.b76fc3f0.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.ba71ba2a.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.103ba7cd.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.7d4c0d5f.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.b1a4c497.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.0c6eca16.js"><link rel="prefetch" href="/obsidian-publish/assets/index.html.394348dd.js"><link rel="prefetch" href="/obsidian-publish/assets/auto.56c9cb2e.js"><link rel="prefetch" href="/obsidian-publish/assets/index.1f644ee1.js"><link rel="prefetch" href="/obsidian-publish/assets/flowchart.parse.1479ec3f.js"><link rel="prefetch" href="/obsidian-publish/assets/mermaid.esm.min.0e041931.js"><link rel="prefetch" href="/obsidian-publish/assets/highlight.esm.9b852bc5.js"><link rel="prefetch" href="/obsidian-publish/assets/markdown.esm.77e8db25.js"><link rel="prefetch" href="/obsidian-publish/assets/math.esm.cb9d4be3.js"><link rel="prefetch" href="/obsidian-publish/assets/notes.esm.62c5f19d.js"><link rel="prefetch" href="/obsidian-publish/assets/reveal.esm.41ec5d7f.js"><link rel="prefetch" href="/obsidian-publish/assets/search.esm.04894411.js"><link rel="prefetch" href="/obsidian-publish/assets/zoom.esm.78977eba.js"><link rel="prefetch" href="/obsidian-publish/assets/VuePlayground.3cfc7758.js"><link rel="prefetch" href="/obsidian-publish/assets/photoswipe.esm.f594e77b.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/obsidian-publish/" class="brand"><img class="logo" src="/obsidian-publish/logo.svg" alt="Windily Cloud"><!----><span class="site-name hide-in-pad">Windily Cloud</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/obsidian-publish/" class="nav-link" aria-label="åšå®¢ä¸»é¡µ"><span class="icon iconfont icon-home"></span>åšå®¢ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/obsidian-publish/home.html" class="nav-link" aria-label="å›¾è°±"><span class="icon iconfont icon-home"></span>å›¾è°±<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://vuepress-theme-hope.github.io/v2/zh/" rel="noopener noreferrer" target="_blank" aria-label="ä¸»é¢˜æ–‡æ¡£" class="nav-link"><span class="icon iconfont icon-note"></span>ä¸»é¢˜æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/windily-cloud/obsidian-publish" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading clickable active"><span class="icon iconfont icon-folder"></span><a href="/obsidian-publish/" class="title">Vault</a><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-folder"></span><span class="title">è§é—»</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-folder"></span><span class="title">Obsidian</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-folder"></span><span class="title">Clean Archtechture</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/" class="nav-link sidebar-link sidebar-page" aria-label="README.md"><span class="icon iconfont icon-file"></span>README.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/afterword.html" class="nav-link sidebar-link sidebar-page" aria-label="afterword.md"><span class="icon iconfont icon-file"></span>afterword.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch1.html" class="nav-link sidebar-link sidebar-page" aria-label="ch1.md"><span class="icon iconfont icon-file"></span>ch1.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch10.html" class="nav-link sidebar-link sidebar-page" aria-label="ch10.md"><span class="icon iconfont icon-file"></span>ch10.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch11.html" class="nav-link sidebar-link sidebar-page" aria-label="ch11.md"><span class="icon iconfont icon-file"></span>ch11.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch12.html" class="nav-link sidebar-link sidebar-page" aria-label="ch12.md"><span class="icon iconfont icon-file"></span>ch12.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch13.html" class="nav-link sidebar-link sidebar-page" aria-label="ch13.md"><span class="icon iconfont icon-file"></span>ch13.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch14.html" class="nav-link sidebar-link sidebar-page" aria-label="ch14.md"><span class="icon iconfont icon-file"></span>ch14.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch15.html" class="nav-link sidebar-link sidebar-page" aria-label="ch15.md"><span class="icon iconfont icon-file"></span>ch15.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="ch16.md"><span class="icon iconfont icon-file"></span>ch16.md<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#use-cases-ç”¨ä¾‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="USE CASES ç”¨ä¾‹"><!---->USE CASES ç”¨ä¾‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#operation-è¿è¡Œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="OPERATION è¿è¡Œ"><!---->OPERATION è¿è¡Œ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#development-å¼€å‘" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="DEVELOPMENT å¼€å‘"><!---->DEVELOPMENT å¼€å‘<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#deployment-éƒ¨ç½²" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="DEPLOYMENT éƒ¨ç½²"><!---->DEPLOYMENT éƒ¨ç½²<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#leaving-options-open-ä¿ç•™å¯é€‰é¡¹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="LEAVING OPTIONS OPEN ä¿ç•™å¯é€‰é¡¹"><!---->LEAVING OPTIONS OPEN ä¿ç•™å¯é€‰é¡¹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#decoupling-layers-æŒ‰å±‚è§£è€¦" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="DECOUPLING LAYERS æŒ‰å±‚è§£è€¦"><!---->DECOUPLING LAYERS æŒ‰å±‚è§£è€¦<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#decoupling-use-cases-ç”¨ä¾‹çš„è§£è€¦" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="DECOUPLING USE CASES ç”¨ä¾‹çš„è§£è€¦"><!---->DECOUPLING USE CASES ç”¨ä¾‹çš„è§£è€¦<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#decoupling-mode-è§£è€¦çš„æ¨¡å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="DECOUPLING MODE è§£è€¦çš„æ¨¡å¼"><!---->DECOUPLING MODE è§£è€¦çš„æ¨¡å¼<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#independent-develop-ability-å¼€å‘çš„ç‹¬ç«‹æ€§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="INDEPENDENT DEVELOP-ABILITY å¼€å‘çš„ç‹¬ç«‹æ€§"><!---->INDEPENDENT DEVELOP-ABILITY å¼€å‘çš„ç‹¬ç«‹æ€§<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#independent-deployability-éƒ¨ç½²çš„ç‹¬ç«‹æ€§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="INDEPENDENT DEPLOYABILITY éƒ¨ç½²çš„ç‹¬ç«‹æ€§"><!---->INDEPENDENT DEPLOYABILITY éƒ¨ç½²çš„ç‹¬ç«‹æ€§<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#duplication-é‡å¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="DUPLICATION é‡å¤"><!---->DUPLICATION é‡å¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#decoupling-modes-again-å†è°ˆè§£è€¦æ¨¡å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="DECOUPLING MODES (AGAIN) å†è°ˆè§£è€¦æ¨¡å¼"><!---->DECOUPLING MODES (AGAIN) å†è°ˆè§£è€¦æ¨¡å¼<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#conclusion-æœ¬ç« å°ç»“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="CONCLUSION æœ¬ç« å°ç»“"><!---->CONCLUSION æœ¬ç« å°ç»“<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html" class="nav-link sidebar-link sidebar-page" aria-label="ch17.md"><span class="icon iconfont icon-file"></span>ch17.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch18.html" class="nav-link sidebar-link sidebar-page" aria-label="ch18.md"><span class="icon iconfont icon-file"></span>ch18.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch19.html" class="nav-link sidebar-link sidebar-page" aria-label="ch19.md"><span class="icon iconfont icon-file"></span>ch19.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch2.html" class="nav-link sidebar-link sidebar-page" aria-label="ch2.md"><span class="icon iconfont icon-file"></span>ch2.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch20.html" class="nav-link sidebar-link sidebar-page" aria-label="ch20.md"><span class="icon iconfont icon-file"></span>ch20.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch21.html" class="nav-link sidebar-link sidebar-page" aria-label="ch21.md"><span class="icon iconfont icon-file"></span>ch21.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch22.html" class="nav-link sidebar-link sidebar-page" aria-label="ch22.md"><span class="icon iconfont icon-file"></span>ch22.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch23.html" class="nav-link sidebar-link sidebar-page" aria-label="ch23.md"><span class="icon iconfont icon-file"></span>ch23.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch24.html" class="nav-link sidebar-link sidebar-page" aria-label="ch24.md"><span class="icon iconfont icon-file"></span>ch24.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch25.html" class="nav-link sidebar-link sidebar-page" aria-label="ch25.md"><span class="icon iconfont icon-file"></span>ch25.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch26.html" class="nav-link sidebar-link sidebar-page" aria-label="ch26.md"><span class="icon iconfont icon-file"></span>ch26.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch27.html" class="nav-link sidebar-link sidebar-page" aria-label="ch27.md"><span class="icon iconfont icon-file"></span>ch27.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch28.html" class="nav-link sidebar-link sidebar-page" aria-label="ch28.md"><span class="icon iconfont icon-file"></span>ch28.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch29.html" class="nav-link sidebar-link sidebar-page" aria-label="ch29.md"><span class="icon iconfont icon-file"></span>ch29.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch3.html" class="nav-link sidebar-link sidebar-page" aria-label="ch3.md"><span class="icon iconfont icon-file"></span>ch3.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch30.html" class="nav-link sidebar-link sidebar-page" aria-label="ch30.md"><span class="icon iconfont icon-file"></span>ch30.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch31.html" class="nav-link sidebar-link sidebar-page" aria-label="ch31.md"><span class="icon iconfont icon-file"></span>ch31.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch32.html" class="nav-link sidebar-link sidebar-page" aria-label="ch32.md"><span class="icon iconfont icon-file"></span>ch32.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch33.html" class="nav-link sidebar-link sidebar-page" aria-label="ch33.md"><span class="icon iconfont icon-file"></span>ch33.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch34.html" class="nav-link sidebar-link sidebar-page" aria-label="ch34.md"><span class="icon iconfont icon-file"></span>ch34.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch4.html" class="nav-link sidebar-link sidebar-page" aria-label="ch4.md"><span class="icon iconfont icon-file"></span>ch4.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch5.html" class="nav-link sidebar-link sidebar-page" aria-label="ch5.md"><span class="icon iconfont icon-file"></span>ch5.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch6.html" class="nav-link sidebar-link sidebar-page" aria-label="ch6.md"><span class="icon iconfont icon-file"></span>ch6.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch7.html" class="nav-link sidebar-link sidebar-page" aria-label="ch7.md"><span class="icon iconfont icon-file"></span>ch7.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch8.html" class="nav-link sidebar-link sidebar-page" aria-label="ch8.md"><span class="icon iconfont icon-file"></span>ch8.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch9.html" class="nav-link sidebar-link sidebar-page" aria-label="ch9.md"><span class="icon iconfont icon-file"></span>ch9.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/part1.html" class="nav-link sidebar-link sidebar-page" aria-label="part1.md"><span class="icon iconfont icon-file"></span>part1.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/part2.html" class="nav-link sidebar-link sidebar-page" aria-label="part2.md"><span class="icon iconfont icon-file"></span>part2.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/part3.html" class="nav-link sidebar-link sidebar-page" aria-label="part3.md"><span class="icon iconfont icon-file"></span>part3.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/part4.html" class="nav-link sidebar-link sidebar-page" aria-label="part4.md"><span class="icon iconfont icon-file"></span>part4.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/part5.html" class="nav-link sidebar-link sidebar-page" aria-label="part5.md"><span class="icon iconfont icon-file"></span>part5.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/Clean%20Archtechture/part6.html" class="nav-link sidebar-link sidebar-page" aria-label="part6.md"><span class="icon iconfont icon-file"></span>part6.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><a href="/obsidian-publish/Publish/%E5%AF%BC%E8%88%AA.html" class="nav-link sidebar-link sidebar-page" aria-label="å¯¼èˆª.md"><span class="icon iconfont icon-file"></span>å¯¼èˆª.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Chap16. INDEPENDENCE ç‹¬ç«‹æ€§</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down" localizeddate="2022å¹´9æœˆ20æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://windily-cloud.github.io" target="_blank" rel="noopener noreferrer">Windily-Cloud</a></span><span property="author" content="Windily-Cloud"></span></span><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022å¹´9æœˆ20æ—¥</span><meta property="datePublished" content="2022-09-20T11:03:58.000Z"></span><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" localizeddate="2022å¹´9æœˆ20æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 29 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT29M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#chap16-independence-ç‹¬ç«‹æ€§" class="router-link-active router-link-exact-active toc-link level1">Chap16. INDEPENDENCE ç‹¬ç«‹æ€§</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#use-cases-ç”¨ä¾‹" class="router-link-active router-link-exact-active toc-link level2">USE CASES ç”¨ä¾‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#operation-è¿è¡Œ" class="router-link-active router-link-exact-active toc-link level2">OPERATION è¿è¡Œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#development-å¼€å‘" class="router-link-active router-link-exact-active toc-link level2">DEVELOPMENT å¼€å‘</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#deployment-éƒ¨ç½²" class="router-link-active router-link-exact-active toc-link level2">DEPLOYMENT éƒ¨ç½²</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#leaving-options-open-ä¿ç•™å¯é€‰é¡¹" class="router-link-active router-link-exact-active toc-link level2">LEAVING OPTIONS OPEN ä¿ç•™å¯é€‰é¡¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#decoupling-layers-æŒ‰å±‚è§£è€¦" class="router-link-active router-link-exact-active toc-link level2">DECOUPLING LAYERS æŒ‰å±‚è§£è€¦</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#decoupling-use-cases-ç”¨ä¾‹çš„è§£è€¦" class="router-link-active router-link-exact-active toc-link level2">DECOUPLING USE CASES ç”¨ä¾‹çš„è§£è€¦</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#decoupling-mode-è§£è€¦çš„æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level2">DECOUPLING MODE è§£è€¦çš„æ¨¡å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#independent-develop-ability-å¼€å‘çš„ç‹¬ç«‹æ€§" class="router-link-active router-link-exact-active toc-link level2">INDEPENDENT DEVELOP-ABILITY å¼€å‘çš„ç‹¬ç«‹æ€§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#independent-deployability-éƒ¨ç½²çš„ç‹¬ç«‹æ€§" class="router-link-active router-link-exact-active toc-link level2">INDEPENDENT DEPLOYABILITY éƒ¨ç½²çš„ç‹¬ç«‹æ€§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#duplication-é‡å¤" class="router-link-active router-link-exact-active toc-link level2">DUPLICATION é‡å¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#decoupling-modes-again-å†è°ˆè§£è€¦æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level2">DECOUPLING MODES (AGAIN) å†è°ˆè§£è€¦æ¨¡å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/obsidian-publish/Publish/Clean%20Archtechture/ch16.html#conclusion-æœ¬ç« å°ç»“" class="router-link-active router-link-exact-active toc-link level2">CONCLUSION æœ¬ç« å°ç»“</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="chap16-independence-ç‹¬ç«‹æ€§" tabindex="-1"><a class="header-anchor" href="#chap16-independence-ç‹¬ç«‹æ€§" aria-hidden="true">#</a> Chap16. INDEPENDENCE ç‹¬ç«‹æ€§</h1><p>As we previously stated, a good architecture must support:</p><blockquote><p>æ­£å¦‚æˆ‘ä»¬ä¹‹å‰æ‰€è¿°ï¼Œ</p></blockquote><ul><li>The use cases and operation of the system.</li><li>The maintenance of the system.</li><li>The development of the system.</li><li>The deployment of the system.</li></ul><hr><blockquote><ul><li>ç³»ç»Ÿçš„ç”¨ä¾‹ä¸æ­£å¸¸è¿è¡Œã€‚</li><li>ç³»ç»Ÿçš„ç»´æŠ¤ã€‚</li><li>ç³»ç»Ÿçš„å¼€å‘ã€‚</li><li>ç³»ç»Ÿçš„éƒ¨ç½²ã€‚</li></ul></blockquote><h2 id="use-cases-ç”¨ä¾‹" tabindex="-1"><a class="header-anchor" href="#use-cases-ç”¨ä¾‹" aria-hidden="true">#</a> USE CASES ç”¨ä¾‹</h2><p>The first bulletâ€”use casesâ€”means that the architecture of the system must support the intent of the system. If the system is a shopping cart application, then the architecture must support shopping cart use cases. Indeed, this is the first concern of the architect, and the first priority of the architecture. The architecture must support the use cases.</p><blockquote><p>æˆ‘ä»¬å…ˆæ¥çœ‹ç¬¬ä¸€ä¸ªæ”¯æŒç›®æ ‡ï¼šç”¨ä¾‹ã€‚æˆ‘ä»¬è®¤ä¸ºä¸€ä¸ªç³»ç»Ÿçš„æ¶æ„å¿…é¡»èƒ½å¤Ÿæ”¯æŒå…¶è‡ªèº«çš„è®¾è®¡æ„å›¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæŸç³»ç»Ÿæ˜¯ä¸€ä¸ªè´­ç‰©è½¦åº”ç”¨ï¼Œé‚£ä¹ˆè¯¥ç³»ç»Ÿçš„æ¶æ„å°±å¿…é¡»éå¸¸ç›´è§‚åœ°æ”¯æŒè¿™ç±»åº”ç”¨å¯èƒ½ä¼šæ¶‰åŠçš„æ‰€æœ‰ç”¨ä¾‹ã€‚äº‹å®ä¸Šï¼Œè¿™æœ¬æ¥å°±æ˜¯æ¶æ„å¸ˆä»¬é¦–å…ˆè¦å…³æ³¨çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯æ¶æ„è®¾è®¡è¿‡ç¨‹ä¸­çš„é¦–è¦å·¥ä½œã€‚è½¯ä»¶çš„æ¶æ„å¿…é¡»ä¸ºå…¶ç”¨ä¾‹æä¾›æ”¯æŒã€‚</p></blockquote><p>However, as we discussed previously, architecture does not wield much influence over the behavior of the system. There are very few behavioral options that the architecture can leave open. But influence isnâ€™t everything. The most important thing a good architecture can do to support behavior is to clarify and expose that behavior so that the intent of the system is visible at the architectural level.</p><blockquote><p>ç„¶è€Œï¼Œæ­£å¦‚æˆ‘ä»¬å‰é¢æ‰€è®¨è®ºçš„ï¼Œä¸€ä¸ªç³»ç»Ÿçš„æ¶æ„å¯¹å…¶è¡Œä¸ºå¹¶æ²¡æœ‰å¤ªå¤§çš„å½±å“ã€‚è™½ç„¶æ¶æ„ä¹Ÿå¯ä»¥é™åˆ¶ä¸€äº›è¡Œä¸ºé€‰é¡¹ï¼Œä½†è¿™ç§å½±å“æ‰€æ¶‰åŠçš„èŒƒå›´å¹¶ä¸å¤§ã€‚ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„æ¶æ„åœ¨è¡Œä¸ºä¸Šå¯¹ç³»ç»Ÿæœ€é‡è¦çš„ä½œç”¨å°±æ˜¯æ˜ç¡®å’Œæ˜¾å¼åœ°åæ˜ ç³»ç»Ÿè®¾è®¡æ„å›¾çš„è¡Œä¸ºï¼Œä½¿å…¶åœ¨æ¶æ„å±‚é¢ä¸Šå¯è§ã€‚</p></blockquote><p>A shopping cart application with a good architecture will look like a shopping cart application. The use cases of that system will be plainly visible within the structure of that system. Developers will not have to hunt for behaviors, because those behaviors will be first-class elements visible at the top level of the system. Those elements will be classes or functions or modules that have prominent positions within the architecture, and they will have names that clearly describe their function.</p><blockquote><p>è­¬å¦‚è¯´ï¼Œä¸€ä¸ªæ¶æ„ä¼˜è‰¯çš„è´­ç‰©è½¦åº”ç”¨çœ‹èµ·æ¥å°±è¯¥åƒæ˜¯ä¸€ä¸ªè´­ç‰©è½¦åº”ç”¨ã€‚è¯¥ç³»ç»Ÿçš„ä¸»è¦ç”¨ä¾‹ä¼šåœ¨å…¶ç³»ç»Ÿç»“æ„ä¸Šæ˜ç¡®å¯è§ã€‚å¼€å‘äººå‘˜å°†ä¸éœ€è¦åœ¨ç³»ç»Ÿä¸­æŸ¥æ‰¾ç³»ç»Ÿæ‰€åº”æœ‰çš„è¡Œä¸ºï¼Œå› ä¸ºè¿™äº›è¡Œä¸ºåœ¨ç³»ç»Ÿé¡¶å±‚ä½œä¸ºä¸»è¦å…ƒç´ å·²ç»æ˜¯æ˜ç¡®å¯è§çš„äº†ï¼Œè¿™äº›å…ƒç´ ä¼šä»¥ç±»ã€å‡½æ•°æˆ–æ¨¡å—çš„å½¢å¼åœ¨æ¶æ„ä¸­å æ®æ˜æ˜¾ä½ç½®ï¼Œå®ƒä»¬çš„åå­—ä¹Ÿèƒ½å¤Ÿæ¸…æ™°åœ°æè¿°å¯¹åº”çš„åŠŸèƒ½ã€‚</p></blockquote><p>Chapter 21, â€œScreaming Architecture,â€ will make this point much clearer.</p><blockquote><p>åœ¨ç¬¬ 21 ç« â€œå°–å«çš„è½¯ä»¶æ¶æ„â€ä¸­ï¼Œæˆ‘ä»¬è¿˜ä¼šæ›´è¯¦ç»†åœ°è§£é‡Šè¿™éƒ¨åˆ†å†…å®¹ã€‚</p></blockquote><h2 id="operation-è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#operation-è¿è¡Œ" aria-hidden="true">#</a> OPERATION è¿è¡Œ</h2><p>Architecture plays a more substantial, and less cosmetic, role in supporting the operation of the system. If the system must handle 100,000 customers per second, the architecture must support that kind of throughput and response time for each use case that demands it. If the system must query big data cubes in milliseconds, then the architecture must be structured to allow this kind of operation.</p><blockquote><p>æ¶æ„åœ¨æ”¯æŒç³»ç»Ÿè¿è¡Œæ–¹é¢æ‰®æ¼”ç€æ›´å®é™…çš„è§’è‰²ã€‚å¦‚æœæŸä¸ªç³»ç»Ÿæ¯ç§’è¦å¤„ç† 100 000 ä¸ªç”¨æˆ·ï¼Œè¯¥ç³»ç»Ÿçš„æ¶æ„å°±å¿…é¡»èƒ½æ”¯æŒè¿™ç§çº§åˆ«çš„ååé‡å’Œå“åº”æ—¶é—´ã€‚åŒæ ·çš„ï¼Œå¦‚æœæŸä¸ªç³»ç»Ÿè¦åœ¨æ¯«ç§’çº§çš„æ—¶é—´å†…å®Œæˆå¯¹å¤§æ•°æ®ä»“åº“çš„æŸ¥è¯¢ï¼Œé‚£ä¹ˆè¯¥ç³»ç»Ÿçš„æ¶æ„ä¹Ÿå¿…é¡»èƒ½æ”¯æŒè¿™ç±»æ“ä½œã€‚</p></blockquote><p>For some systems, this will mean arranging the processing elements of the system into an array of little services can be run in parallel on many different servers. For other systems, it will mean a plethora of little lightweight threads sharing the address space of a single process within a single processor. Still other systems will need just a few processes running in isolated address spaces. And some systems can even survive as simple monolithic programs running in a single process.</p><blockquote><p>å¯¹ä¸€äº›ç³»ç»Ÿæ¥è¯´ï¼Œè¿™æ„å‘³ç€å®ƒçš„æ¶æ„åº”è¯¥æ”¯æŒå°†å…¶è®¡ç®—éƒ¨åˆ†æ‹†åˆ†æˆä¸€ç³»åˆ—å°å‹æœåŠ¡ï¼Œç„¶åè®©å®ƒä»¬å¹¶è¡Œè¿è¡Œåœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚è€Œåœ¨å¦ä¸€äº›ç³»ç»Ÿä¸­ï¼Œé‡‡ç”¨ä¸€å †è½»é‡çº§çº¿ç¨‹ï¼Œç„¶åè®©è¿™äº›çº¿ç¨‹å…±äº«ä¸€ä¸ªè¿è¡Œåœ¨å•å¤„ç†å™¨ä¸Šçš„è¿›ç¨‹çš„åœ°å€ç©ºé—´ã€‚è¿˜æœ‰ä¸€äº›ç³»ç»Ÿï¼Œå®ƒä»¬å¯èƒ½åªæ˜¯ä¸€ç»„è¿è¡Œåœ¨ç‹¬ç«‹åœ°å€ç©ºé—´å†…çš„è¿›ç¨‹ã€‚ç”šè‡³æœ‰äº›ç³»ç»Ÿè®¾è®¡ä¸ºä¸€ä¸ªå•è¿›ç¨‹çš„å•ä½“ç¨‹åºå°±å¤Ÿäº†ã€‚</p></blockquote><p>As strange as it may seem, this decision is one of the options that a good architect leaves open. A system that is written as a monolith, and that depends on that monolithic structure, cannot easily be upgraded to multiple processes, multiple threads, or micro-services should the need arise. By comparison, an architecture that maintains the proper isolation of its components, and does not assume the means of communication between those components, will be much easier to transition through the spectrum of threads, processes, and services as the operational needs of the system change over time.</p><blockquote><p>è™½ç„¶çœ‹èµ·æ¥æœ‰ç‚¹å¥‡æ€ªï¼Œä½†ä¸Šè¿°é—®é¢˜çš„å†³ç­–çš„ç¡®ä¹Ÿåº”è¯¥å±äºä¸€ä¸ªä¼˜ç§€çš„æ¶æ„å¸ˆä¸ºæˆ‘ä»¬ä¿ç•™çš„å¯é€‰é¡¹ä¹‹ä¸€ã€‚æ¯•ç«Ÿä¸€ä¸ªæŒ‰ç…§å•ä½“æ¨¡å¼ç¼–å†™çš„ç³»ç»Ÿï¼Œå®ƒä¾èµ–çš„å¿…ç„¶æ˜¯å•ä½“ç»“æ„ï¼Œä¹‹åå†æƒ³æŠŠå®ƒæ”¹é€ æˆå¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹æˆ–å¾®æœåŠ¡æ¨¡å¼å¯å°±æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“äº†ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå¦‚æœè¯¥ç³»ç»Ÿçš„æ¶æ„èƒ½å¤Ÿåœ¨å…¶ç»„ä»¶ä¹‹é—´åšä¸€äº›é€‚å½“çš„éš”ç¦»ï¼ŒåŒæ—¶ä¸å¼ºåˆ¶è§„å®šç»„ä»¶ä¹‹é—´çš„äº¤äº’æ–¹å¼ï¼Œè¯¥ç³»ç»Ÿå°±å¯ä»¥éšæ—¶æ ¹æ®ä¸æ–­å˜åŒ–çš„è¿è¡Œéœ€æ±‚æ¥è½¬æ¢æˆå„ç§è¿è¡Œæ—¶çš„çº¿ç¨‹ã€è¿›ç¨‹æˆ–æœåŠ¡æ¨¡å‹ã€‚</p></blockquote><h2 id="development-å¼€å‘" tabindex="-1"><a class="header-anchor" href="#development-å¼€å‘" aria-hidden="true">#</a> DEVELOPMENT å¼€å‘</h2><p>Architecture plays a significant role in supporting the development environment. This is where Conwayâ€™s law comes into play. Conwayâ€™s law says:</p><blockquote><p>ç³»ç»Ÿçš„æ¶æ„åœ¨æ”¯æŒå¼€å‘ç¯å¢ƒæ–¹é¢å½“ç„¶æ‰®æ¼”ç€é‡è¦çš„è§’è‰²ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥å¼•è¿°ä¸€ä¸‹åº·å¨å®šå¾‹ï¼š</p></blockquote><p>Any organization that designs a system will produce a design whose structure is a copy of the organizationâ€™s communication structure.</p><blockquote><p>ä»»ä½•ä¸€ä¸ªç»„ç»‡åœ¨è®¾è®¡ç³»ç»Ÿæ—¶ï¼Œå¾€å¾€éƒ½ä¼šå¤åˆ¶å‡ºä¸€ä¸ªä¸è¯¥ç»„ç»‡å†…æ²Ÿé€šç»“æ„ç›¸åŒçš„ç³»ç»Ÿã€‚</p></blockquote><p>A system that must be developed by an organization with many teams and many concerns must have an architecture that facilitates independent actions by those teams, so that the teams do not interfere with each other during development. This is accomplished by properly partitioning the system into well-isolated, independently developable components. Those components can then be allocated to teams that can work independently of each other.</p><blockquote><p>ä¸€ä¸ªç”±å¤šä¸ªä¸åŒç›®æ ‡çš„å›¢é˜Ÿåä½œå¼€å‘çš„ç³»ç»Ÿå¿…é¡»å…·æœ‰ç›¸åº”çš„è½¯ä»¶æ¶æ„ã€‚è¿™æ ·ï¼Œè¿™äº›å›¢é˜Ÿæ‰å¯ä»¥å„è‡ªç‹¬ç«‹åœ°å®Œæˆå·¥ä½œï¼Œä¸ä¼šå½¼æ­¤å¹²æ‰°ã€‚è¿™å°±éœ€è¦æ°å½“åœ°å°†ç³»ç»Ÿåˆ‡åˆ†ä¸ºä¸€ç³»åˆ—éš”ç¦»è‰¯å¥½ã€å¯ç‹¬ç«‹å¼€å‘çš„ç»„ä»¶ã€‚ç„¶åæ‰èƒ½å°†è¿™äº›ç»„ä»¶åˆ†é…ç»™ä¸åŒçš„å›¢é˜Ÿå„è‡ªç‹¬ç«‹å¼€å‘ã€‚</p></blockquote><h2 id="deployment-éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#deployment-éƒ¨ç½²" aria-hidden="true">#</a> DEPLOYMENT éƒ¨ç½²</h2><p>The architecture also plays a huge role in determining the ease with which the system is deployed. The goal is â€œimmediate deployment.â€ A good architecture does not rely on dozens of little configuration scripts and property file tweaks. It does not require manual creation of directories or files that must be arranged just so. A good architecture helps the system to be immediately deployable after build.</p><blockquote><p>ä¸€ä¸ªç³»ç»Ÿçš„æ¶æ„åœ¨å…¶éƒ¨ç½²çš„ä¾¿æ·æ€§æ–¹é¢èµ·åˆ°çš„ä½œç”¨ä¹Ÿæ˜¯éå¸¸å¤§çš„ã€‚è®¾è®¡ç›®æ ‡ä¸€å®šæ˜¯å®ç°â€œç«‹åˆ»éƒ¨ç½²â€ã€‚ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„æ¶æ„é€šå¸¸ä¸ä¼šä¾èµ–äºæˆå †çš„è„šæœ¬ä¸é…ç½®æ–‡ä»¶ï¼Œä¹Ÿä¸éœ€è¦ç”¨æˆ·æ‰‹åŠ¨åˆ›å»ºä¸€å †â€œæœ‰ä¸¥æ ¼è¦æ±‚â€çš„ç›®å½•ä¸æ–‡ä»¶ã€‚æ€»è€Œè¨€ä¹‹ï¼Œä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„è½¯ä»¶æ¶æ„å¯ä»¥è®©ç³»ç»Ÿåœ¨æ„å»ºå®Œæˆä¹‹åç«‹åˆ»å°±èƒ½éƒ¨ç½²ã€‚</p></blockquote><p>Again, this is achieved through the proper partitioning and isolation of the components of the system, including those master components that tie the whole system together and ensure that each component is properly started, integrated, and supervised.</p><blockquote><p>åŒæ ·çš„ï¼Œè¿™äº›ä¹Ÿéœ€è¦é€šè¿‡æ­£ç¡®åœ°åˆ’åˆ†ã€éš”ç¦»ç³»ç»Ÿç»„ä»¶æ¥å®ç°ï¼Œè¿™å…¶ä¸­åŒ…æ‹¬å¼€å‘ä¸€äº›ä¸»ç»„ä»¶ï¼Œè®©å®ƒä»¬å°†æ•´ä¸ªç³»ç»Ÿé»åˆåœ¨ä¸€èµ·ï¼Œæ­£ç¡®åœ°å¯åŠ¨ã€è¿æ¥å¹¶ç›‘æ§æ¯ä¸ªç»„ä»¶ã€‚</p></blockquote><h2 id="leaving-options-open-ä¿ç•™å¯é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#leaving-options-open-ä¿ç•™å¯é€‰é¡¹" aria-hidden="true">#</a> LEAVING OPTIONS OPEN ä¿ç•™å¯é€‰é¡¹</h2><p>A good architecture balances all of these concerns with a component structure that mutually satisfies them all. Sounds easy, right? Well, itâ€™s easy for me to write that.</p><blockquote><p>ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„æ¶æ„åº”è¯¥å……åˆ†åœ°æƒè¡¡ä»¥ä¸Šæ‰€è¿°çš„æ‰€æœ‰å…³æ³¨ç‚¹ï¼Œç„¶åå°½å¯èƒ½å¡”æˆä¸€ä¸ªå¯ä»¥åŒæ—¶æ»¡è¶³æ‰€æœ‰éœ€æ±‚çš„ç»„ä»¶ç»“æ„ã€‚è¿™è¯´èµ·æ¥è¿˜æŒºå®¹æ˜“çš„ï¼Œä¸æ˜¯å—ï¼Ÿ</p></blockquote><p>The reality is that achieving this balance is pretty hard. The problem is that most of the time we donâ€™t know what all the use cases are, nor do we know the operational constraints, the team structure, or the deployment requirements. Worse, even if we did know them, they will inevitably change as the system moves through its life cycle. In short, the goals we must meet are indistinct and inconstant. Welcome to the real world.</p><blockquote><p>äº‹å®ä¸Šï¼Œè¦å®ç°è¿™ç§å¹³è¡¡æ˜¯å¾ˆå›°éš¾çš„ã€‚ä¸»è¦é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬åœ¨å¤§éƒ¨åˆ†æ—¶é—´é‡Œæ— æ³•é¢„çŸ¥ç³»ç»Ÿçš„æ‰€æœ‰ç”¨ä¾‹çš„ï¼Œè€Œä¸”æˆ‘ä»¬ä¹Ÿæ— æ³•æå‰é¢„çŸ¥ç³»ç»Ÿçš„è¿è¡Œæ¡ä»¶ã€å¼€å‘å›¢é˜Ÿçš„ç»“æ„ï¼Œæˆ–è€…ç³»ç»Ÿçš„éƒ¨ç½²éœ€æ±‚ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œå°±ç®—æˆ‘ä»¬èƒ½æå‰äº†è§£è¿™äº›éœ€æ±‚ï¼Œéšç€ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸçš„æ¼”è¿›ï¼Œè¿™äº›éœ€æ±‚ä¹Ÿä¼šä¸å¯é¿å…åœ°å‘ç”Ÿå˜åŒ–ã€‚æ€»è€Œè¨€ä¹‹ï¼Œäº‹å®ä¸Šæˆ‘ä»¬æƒ³è¦è¾¾åˆ°çš„ç›®æ ‡æœ¬èº«å°±æ˜¯æ¨¡ç³Šå¤šå˜çš„ã€‚çœŸå®çš„ä¸–ç•Œå°±è¿™æ ·ã€‚</p></blockquote><p>But all is not lost: Some principles of architecture are relatively inexpensive to implement and can help balance those concerns, even when you donâ€™t have a clear picture of the targets you have to hit. Those principles help us partition our systems into well-isolated components that allow us to leave as many options open as possible, for as long as possible.</p><blockquote><p>ç„¶è€Œï¼Œæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥é€šè¿‡é‡‡ç”¨ä¸€äº›å®ç°æˆæœ¬è¾ƒä½çš„æ¶æ„åŸåˆ™æ¥åšä¸€äº›äº‹æƒ…çš„ã€‚è™½ç„¶æˆ‘ä»¬æ²¡æœ‰æ¸…æ™°çš„ç›®æ ‡ï¼Œä½†é‡‡ç”¨ä¸€äº›åŸåˆ™æ€»æ˜¯æœ‰åŠ©äºæå‰è§£å†³ä¸€äº›å¹³è¡¡é—®é¢˜ã€‚é€šè¿‡éµå®ˆè¿™äº›åŸåˆ™å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ­£ç¡®åœ°åˆ’åˆ†ä¸ºä¸€äº›éš”ç¦»è‰¯å¥½çš„ç»„ä»¶ï¼Œä»¥ä¾¿å°½å¯èƒ½é•¿æ—¶é—´åœ°ä¸ºæˆ‘ä»¬çš„æœªæ¥ä¿ç•™å°½å¯èƒ½å¤šçš„å¯é€‰é¡¹ã€‚</p></blockquote><p>A good architecture makes the system easy to change, in all the ways that it must change, by leaving options open.</p><blockquote><p>ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„æ¶æ„åº”è¯¥é€šè¿‡ä¿ç•™å¯é€‰é¡¹çš„æ–¹å¼ï¼Œè®©ç³»ç»Ÿåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½èƒ½æ–¹ä¾¿åœ°åšå‡ºå¿…è¦çš„å˜æ›´ã€‚</p></blockquote><h2 id="decoupling-layers-æŒ‰å±‚è§£è€¦" tabindex="-1"><a class="header-anchor" href="#decoupling-layers-æŒ‰å±‚è§£è€¦" aria-hidden="true">#</a> DECOUPLING LAYERS æŒ‰å±‚è§£è€¦</h2><p>Consider the use cases. The architect wants the structure of the system to support all the necessary use cases, but does not know what all those use cases are. However, the architect does know the basic intent of the system. Itâ€™s a shopping cart system, or itâ€™s a bill of materials system, or itâ€™s an order processing system. So the architect can employ the Single Responsibility Principle and the Common Closure Principle to separate those things that change for different reasons, and to collect those things that change for the same reasonsâ€”given the context of the intent of the system.</p><blockquote><p>ä»ç”¨ä¾‹çš„è§’åº¦æ¥çœ‹ï¼Œæ¶æ„å¸ˆçš„ç›®æ ‡æ˜¯è®©ç³»ç»Ÿç»“æ„æ”¯æŒå…¶æ‰€éœ€è¦çš„æ‰€æœ‰ç”¨ä¾‹ã€‚ä½†æ˜¯é—®é¢˜æ°æ°æ˜¯æˆ‘ä»¬æ— æ³•é¢„çŸ¥å…¨éƒ¨çš„ç”¨ä¾‹ã€‚å¥½åœ¨æ¶æ„å¸ˆåº”è¯¥è¿˜æ˜¯çŸ¥é“æ•´ä¸ªç³»ç»Ÿçš„åŸºæœ¬è®¾è®¡æ„å›¾çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¶æ„å¸ˆåº”è¯¥çŸ¥é“è‡ªå·±è¦è®¾è®¡çš„æ˜¯ä¸€ä¸ªè´­ç‰©è½¦ç³»ç»Ÿï¼Œæˆ–æ˜¯è¿è¾“æ¸…å•ç³»ç»Ÿï¼Œè¿˜æ˜¯è®¢å•å¤„ç†ç³»ç»Ÿã€‚æ‰€ä»¥æ¶æ„å¸ˆå¯ä»¥é€šè¿‡é‡‡ç”¨å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰å’Œå…±åŒé—­åŒ…åŸåˆ™ï¼ˆCCPï¼‰ï¼Œä»¥åŠæ—¢å®šçš„ç³»ç»Ÿè®¾è®¡æ„å›¾æ¥éš”ç¦»é‚£äº›å˜æ›´åŸå› ä¸åŒçš„éƒ¨åˆ†ï¼Œé›†æˆå˜æ›´åŸå› ç›¸åŒçš„éƒ¨åˆ†ã€‚</p></blockquote><p>What changes for different reasons? There are some obvious things. User interfaces change for reasons that have nothing to do with business rules. Use cases have elements of both. Clearly, then, a good architect will want to separate the UI portions of a use case from the business rule portions in such a way that they can be changed independently of each other, while keeping those use cases visible and clear.</p><blockquote><p>å“ªäº›éƒ¨åˆ†çš„å˜æ›´åŸå› æ˜¯ä¸åŒçš„å‘¢ï¼Ÿè¿™åœ¨æœ‰äº›æƒ…å†µä¸‹æ˜¯å¾ˆæ˜¾è€Œæ˜“è§çš„ã€‚è­¬å¦‚ï¼Œç”¨æˆ·ç•Œé¢çš„å˜æ›´åŸå› è‚¯å®šå’Œä¸šåŠ¡é€»è¾‘æ˜¯ä¸ç›¸å…³çš„ï¼Œè€Œä¸šåŠ¡ç”¨ä¾‹åˆ™é€šå¸¸åœ¨ä¸¤è¾¹éƒ½å­˜åœ¨ç€ç›¸å…³çš„å…ƒç´ ã€‚æ‰€ä»¥å¾ˆæ˜¾ç„¶ï¼Œä¼˜ç§€çš„æ¶æ„å¸ˆåº”è¯¥ä¼šå°†ç”¨ä¾‹çš„ UI éƒ¨åˆ†ä¸å…¶ä¸šåŠ¡é€»è¾‘éƒ¨åˆ†éš”ç¦»ï¼Œè¿™æ ·è¿™ä¸¤éƒ¨åˆ†å°±æ—¢å¯ä»¥å„è‡ªè¿›è¡Œå˜æ›´ï¼Œä¹Ÿèƒ½ä¿è¯ç”¨ä¾‹çš„å®Œæ•´æ¸…æ™°ã€‚</p></blockquote><p>Business rules themselves may be closely tied to the application, or they may be more general. For example, the validation of input fields is a business rule that is closely tied to the application itself. In contrast, the calculation of interest on an account and the counting of inventory are business rules that are more closely associated with the domain. These two different kinds of rules will change at different rates, and for different reasonsâ€”so they should be separated so that they can be independently changed.</p><blockquote><p>è€Œä¸šåŠ¡é€»è¾‘åˆ™æ—¢å¯ä»¥æ˜¯ä¸åº”ç”¨ç¨‹åºç´§å¯†ç›¸å…³çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æ›´å…·æœ‰æ™®é€‚æ€§çš„ã€‚ä¾‹å¦‚ï¼Œå¯¹è¾“å…¥å­—æ®µçš„æ ¡éªŒæ˜¯ä¸€ä¸ªä¸åº”ç”¨ç¨‹åºæœ¬èº«ç´§å¯†ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘ã€‚ç›¸åï¼Œè®¡ç®—è´¦æˆ·åˆ©æ¯ä»¥åŠæ¸…ç‚¹åº“å­˜åˆ™æ˜¯ä¸€ä¸ªä¸å…·ä½“é¢†åŸŸæ›´ä¸ºç›¸å…³çš„ä¸šåŠ¡é€»è¾‘ã€‚è¿™ä¸¤ç§ä¸åŒçš„ä¸šåŠ¡é€»è¾‘é€šå¸¸æœ‰ç€ä¸åŒçš„å˜æ›´é€Ÿç‡å’Œå˜æ›´åŸå› â€”â€”å®ƒä»¬åº”è¯¥è¢«ç›¸äº’éš”ç¦»ï¼Œä»¥æ–¹ä¾¿å„è‡ªçš„å˜æ›´ã€‚</p></blockquote><p>The database, the query language, and even the schema are technical details that have nothing to do with the business rules or the UI. They will change at rates, and for reasons, that are independent of other aspects of the system. Consequently, the architecture should separate them from the rest of the system so that they can be independently changed.</p><blockquote><p>è‡³äºæ•°æ®åº“ï¼Œä»¥åŠå…¶æ‰€é‡‡ç”¨çš„æŸ¥è¯¢è¯­è¨€ï¼Œç”šè‡³è¡¨ç»“æ„ï¼Œè¿™äº›éƒ½æ˜¯ç³»ç»Ÿçš„æŠ€æœ¯ç»†èŠ‚ä¿¡æ¯ï¼Œå®ƒä»¬ä¸ä¸šåŠ¡è§„åˆ™æˆ– UI æ¯«æ— å…³ç³»ã€‚è¿™å°±æ„å‘³ç€å®ƒä»¬çš„å˜æ›´åŸå› ã€å˜æ›´é€Ÿç‡å¿…ç„¶ä¸ç³»ç»Ÿçš„å…¶ä»–æ–¹é¢å„ä¸ç›¸åŒã€‚å› æ­¤ï¼Œæ¶æ„å¸ˆä¹Ÿåº”è¯¥å°†å®ƒä»¬ä¸ç³»ç»Ÿå…¶ä»–éƒ¨åˆ†éš”ç¦»ï¼Œä»¥æ–¹ä¾¿å„è‡ªçš„å˜æ›´ã€‚</p></blockquote><p>Thus we find the system divided into decoupled horizontal layersâ€”the UI, application-specific business rules, application-independent business rules, and the database, just to mention a few.</p><blockquote><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å‘ç°äº†ä¸€ä¸ªç³»ç»Ÿå¯ä»¥è¢«è§£è€¦æˆè‹¥å¹²ä¸ªæ°´å¹³åˆ†å±‚åº”ç”¨ç‹¬æœ‰çš„ä¸šåŠ¡é€»è¾‘ã€é¢†åŸŸæ™®é€‚çš„ä¸šåŠ¡é€»è¾‘ã€æ•°æ®åº“ç­‰ã€‚</p></blockquote><h2 id="decoupling-use-cases-ç”¨ä¾‹çš„è§£è€¦" tabindex="-1"><a class="header-anchor" href="#decoupling-use-cases-ç”¨ä¾‹çš„è§£è€¦" aria-hidden="true">#</a> DECOUPLING USE CASES ç”¨ä¾‹çš„è§£è€¦</h2><p>What else changes for different reasons? The use cases themselves! The use case for adding an order to an order entry system almost certainly will change at a different rate, and for different reasons, than the use case that deletes an order from the system. Use cases are a very natural way to divide the system.</p><blockquote><p>æ¥ä¸‹æ¥ï¼Œè¿˜æœ‰ä»€ä¹ˆä¸åŒçš„åŸå› çš„å˜æ›´å‘¢ï¼Ÿç­”æ¡ˆæ­£æ˜¯è¿™äº›ç”¨ä¾‹æœ¬èº«ï¼è­¬å¦‚è¯´ï¼Œæ·»åŠ æ–°è®¢å•çš„ç”¨ä¾‹ä¸åˆ é™¤è®¢å•çš„ç”¨ä¾‹åœ¨å‘ç”Ÿå˜æ›´çš„åŸå› ä¸Šå‡ ä¹è‚¯å®šæ˜¯ä¸åŒçš„ï¼Œè€Œä¸”å‘ç”Ÿå˜æ›´çš„é€Ÿç‡ä¹Ÿä¸åŒã€‚å› æ­¤ï¼Œæˆ‘ä»¬æŒ‰ç…§ç”¨ä¾‹æ¥åˆ‡åˆ†ç³»ç»Ÿæ˜¯éå¸¸è‡ªç„¶çš„é€‰æ‹©ã€‚</p></blockquote><p>At the same time, use cases are narrow vertical slices that cut through the horizontal layers of the system. Each use case uses some UI, some application-specific business rules, some application-independent business rules, and some database functionality. Thus, as we are dividing the system in to horizontal layers, we are also dividing the system into thin vertical use cases that cut through those layers.</p><blockquote><p>ä¸æ­¤åŒæ—¶ï¼Œè¿™äº›ç”¨ä¾‹ä¹Ÿæ˜¯ä¸Šè¿°ç³»ç»Ÿæ°´å¹³åˆ†å±‚çš„ä¸€ä¸ªä¸ªå‚ç›´åˆ‡é¢ã€‚æ¯ä¸ªç”¨ä¾‹éƒ½ä¼šç”¨åˆ°ä¸€äº› UIã€ç‰¹å®šåº”ç”¨çš„ä¸šåŠ¡é€»è¾‘ã€åº”ç”¨æ— å…³çš„ä¸šåŠ¡é€»è¾‘ä»¥åŠæ•°æ®åº“åŠŸèƒ½ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ—¶ç³»ç»Ÿæ°´å¹³åˆ‡åˆ†æˆå¤šä¸ªåˆ†å±‚çš„åŒæ—¶ï¼Œä¹Ÿåœ¨æŒ‰ç”¨ä¾‹å°†å…¶åˆ‡åˆ†æˆå¤šä¸ªå‚ç›´åˆ‡åˆ†ã€‚</p></blockquote><p>To achieve this decoupling, we separate the UI of the add-order use case from the UI of the delete-order use case. We do the same with the business rules, and with the database. We keep the use cases separate down the vertical height of the system.</p><blockquote><p>ä¸ºäº†å®ç°è¿™æ ·çš„è§£è€¦ï¼Œæˆ‘ä»¬åº”è¯¥å°†å¢åŠ è®¢å•è¿™ä¸ªç”¨ä¾‹çš„ UI ä¸åˆ é™¤è®¢å•ç”¨ä¾‹çš„ UI åˆ†å¼€ã€‚è€Œä¸”ï¼Œå¯¹ä¸šåŠ¡é€»è¾‘çš„éƒ¨åˆ†ã€æ•°æ®åº“çš„éƒ¨åˆ†ï¼Œä¹Ÿè¦åšåŒæ ·çš„äº‹æƒ…ï¼Œå°†å…¶æŒ‰ç…§ç”¨ä¾‹è¿›è¡Œå‚ç›´åˆ‡åˆ†ã€‚</p></blockquote><p>You can see the pattern here. If you decouple the elements of the system that change for different reasons, then you can continue to add new use cases without interfering with old ones. If you also group the UI and database in support of those use cases, so that each use case uses a different aspect of the UI and database, then adding new use cases will be unlikely to affect older ones.</p><blockquote><p>ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºä¸€ä¸ªæ¨¡å¼ï¼šå¦‚æœæˆ‘ä»¬æŒ‰ç…§å˜æ›´åŸå› çš„ä¸åŒå¯¹ç³»ç»Ÿè¿›è¡Œè§£è€¦ï¼Œå°±å¯ä»¥æŒç»­åœ°å‘ç³»ç»Ÿå†…æ·»åŠ æ–°çš„ç”¨ä¾‹ï¼Œè€Œä¸ä¼šå½±å“æ—§æœ‰çš„ç”¨ä¾‹ã€‚å¦‚æœæˆ‘ä»¬åŒæ—¶å¯¹æ”¯æŒè¿™äº›ç”¨ä¾‹çš„ UI å’Œæ•°æ®åº“ä¹Ÿè¿›è¡Œäº†åˆ†ç»„ï¼Œé‚£ä¹ˆæ¯ä¸ªç”¨ä¾‹ä½¿ç”¨çš„å°±æ˜¯ä¸åŒé¢å‘çš„ UI ä¸æ•°æ®åº“ï¼Œå› æ­¤å¢åŠ æ–°ç”¨ä¾‹å°±æ›´ä¸å¤ªå¯èƒ½ä¼šå½±å“æ—§æœ‰çš„ç”¨ä¾‹äº†ã€‚</p></blockquote><h2 id="decoupling-mode-è§£è€¦çš„æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#decoupling-mode-è§£è€¦çš„æ¨¡å¼" aria-hidden="true">#</a> DECOUPLING MODE è§£è€¦çš„æ¨¡å¼</h2><p>Now think of what all that decoupling means for the second bullet: operations. If the different aspects of the use cases are separated, then those that must run at a high throughput are likely already separated from those that must run at a low throughput. If the UI and the database have been separated from the business rules, then they can run in different servers. Those that require higher bandwidth can be replicated in many servers.</p><blockquote><p>ç°åœ¨æˆ‘ä»¬æ¥æƒ³æƒ³æ‰€æœ‰çš„è¿™äº›è§£è€¦åŠ¨ä½œå¯¹æ¶æ„è®¾è®¡çš„ç¬¬äºŒä¸ªç›®æ ‡â€”â€”ç³»ç»Ÿè¿è¡Œâ€”â€”ç©¶ç«Ÿæœ‰ä»€ä¹ˆæ„ä¹‰ã€‚å¦‚æœä¸åŒé¢å‘ä¹‹é—´çš„ç”¨ä¾‹å¾—åˆ°äº†è‰¯å¥½çš„éš”ç¦»ï¼Œé‚£ä¹ˆéœ€è¦é«˜ååé‡çš„ç”¨ä¾‹å°±å’Œéœ€è¦ä½ååé‡çš„ç”¨ä¾‹äº’ç›¸è‡ªç„¶åˆ†å¼€äº†ã€‚å¦‚æœ UI å’Œæ•°æ®åº“çš„éƒ¨åˆ†èƒ½ä»ä¸šåŠ¡é€»è¾‘åˆ†ç¦»å‡ºæ¥ï¼Œé‚£ä¹ˆå®ƒä»¬å°±å¯ä»¥è¿è¡Œåœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚è€Œä¸”éœ€è¦è¾ƒå¤§å¸¦å®½çš„åº”ç”¨ä¹Ÿå¯ä»¥åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šè¿è¡Œå¤šä¸ªå®ä¾‹ã€‚</p></blockquote><p>In short, the decoupling that we did for the sake of the use cases also helps with operations. However, to take advantage of the operational benefit, the decoupling must have the appropriate mode. To run in separate servers, the separated components cannot depend on being together in the same address space of a processor. They must be independent services, which communicate over a network of some kind.</p><blockquote><p>æ€»è€Œè¨€ä¹‹ï¼Œè¿™ç§æŒ‰ç”¨ä¾‹è§£è€¦çš„åŠ¨ä½œæ˜¯æœ‰åˆ©äºç³»ç»Ÿè¿è¡Œçš„ã€‚ç„¶è€Œå‡ºäºç³»ç»Ÿè¿è¡Œæ•ˆç‡çš„è€ƒè™‘ï¼Œæˆ‘ä»¬æ—³è§£è€¦åŠ¨ä½œè¿˜åº”è¯¥æ³¨æ„é€‰æ‹©æ°å½“çš„æ¨¡å¼ã€‚è­¬å¦‚ï¼Œä¸ºäº†åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œè¢«éš”ç¦»çš„ç»„ä»¶ä¸èƒ½ä¾èµ–äºæŸä¸ªå¤„ç†å™¨ä¸Šçš„åŒä¸€ä¸ªåœ°å€ç©ºé—´ï¼Œå®ƒä»¬å¿…é¡»æ˜¯ç‹¬ç«‹çš„æœåŠ¡ï¼Œç„¶åé€šè¿‡æŸç§ç½‘ç»œæ¥è¿›è¡Œé€šä¿¡ã€‚</p></blockquote><p>Many architects call such components â€œservicesâ€ or â€œmicro-services,â€ depending upon some vague notion of line count. Indeed, an architecture based on services is often called a service-oriented architecture.</p><blockquote><p>è®¸å¤šæ¶æ„å¸…å°†ä¸Šé¢è¿™ç§ç»„ä»¶ç§°ä¸ºâ€œæœåŠ¡â€ï¼Œæˆ–â€œå¾®æœåŠ¡â€ï¼Œè‡³äºæ˜¯å‰è€…è¿˜æ˜¯åè€…ï¼Œå¾€å¾€å–å†³äºæŸäº›éå¸¸æ¨¡ç³Šçš„ä»£ç è¡Œæ•°é˜ˆå€¼ã€‚å¯¹äºè¿™ç§åŸºäºæœåŠ¡æ¥æ„å»ºçš„æ¶æ„ï¼Œæ¶æ„å¸ˆä»¬é€šå¸¸ç§°ä¹‹ä¸ºé¢å‘æœåŠ¡çš„æ¶æ„ï¼ˆservice-oriented architectureï¼‰ã€‚</p></blockquote><p>If that nomenclature set off some alarm bells in your mind, donâ€™t worry. Iâ€™m not going to tell you that SoA is the best possible architecture, or that micro-services are the wave of the future. The point being made here is that sometimes we have to separate our components all the way to the service level.</p><blockquote><p>å¦‚æœå› ä¸ºè¿™é‡Œæåˆ°äº† SOA è¿™ä¸ªæ¦‚å¿µè€Œå¼•èµ·äº†æŸäº›è¯»è€…çš„è­¦è§‰ï¼Œè¯·ä¸ç”¨æ‹…å¿ƒï¼Œåœ¨è¿™é‡Œå¹¶æ²¡æœ‰é¼“å¹ SOA æ˜¯ä¸€ç§æœ€ä½³çš„è½¯ä»¶æ¶æ„ï¼Œæˆ–è€…å¾®æœåŠ¡å°±æ˜¯æœªæ¥çš„æ½®æµã€‚æˆ‘åªæ˜¯è®¤ä¸ºæœ‰æ—¶å€™æˆ‘ä»¬å¿…é¡»æŠŠç»„ä»¶åˆ‡å‰²åˆ°æœåŠ¡è¿™ä¸ªåº”ç”¨å±‚æ¬¡ã€‚</p></blockquote><p>Remember, a good architecture leaves options open. The decoupling mode is one of those options.</p><blockquote><p>è¯·è®°ä½ï¼Œä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„æ¶æ„æ€»æ˜¯è¦ä¸ºå°†æ¥å¤šç•™ä¸€äº›å¯é€‰é¡¹ï¼Œè¿™é‡Œæ‰€è®¨è®ºçš„è§£è€¦æ¨¡å¼ä¹Ÿæ˜¯è¿™æ ·çš„å¯é€‰é¡¹ä¹‹ä¸€ã€‚</p></blockquote><p>Before we explore that topic further, letâ€™s look to the other two bullets.</p><blockquote><p>æ¥ä¸‹æ¥ï¼Œåœ¨æˆ‘ä»¬ç»§ç»­æ·±å…¥æ¢è®¨è¿™ä¸ªè¯é¢˜ä¹‹å‰ï¼Œå…ˆå›è¿‡å¤´æ¥çœ‹çœ‹å…¶ä»–ä¸¤ä¸ªè®¾è®¡ç›®æ ‡ã€‚</p></blockquote><h2 id="independent-develop-ability-å¼€å‘çš„ç‹¬ç«‹æ€§" tabindex="-1"><a class="header-anchor" href="#independent-develop-ability-å¼€å‘çš„ç‹¬ç«‹æ€§" aria-hidden="true">#</a> INDEPENDENT DEVELOP-ABILITY å¼€å‘çš„ç‹¬ç«‹æ€§</h2><p>The third bullet was development. Clearly when components are strongly decoupled, the interference between teams is mitigated. If the business rules donâ€™t know about the UI, then a team that focuses on the UI cannot much affect a team that focuses on the business rules. If the use cases themselves are decoupled from one another, then a team that focuses on the addOrder use case is not likely to interfere with a team that focuses on the deleteOrder use case.</p><blockquote><p>æˆ‘ä»¬è¿›è¡Œæ¶æ„è®¾è®¡çš„ç¬¬ä¸‰ä¸ªç›®æ ‡æ˜¯æ”¯æŒç³»ç»Ÿçš„å¼€å‘ã€‚å¾ˆæ˜¾ç„¶ï¼Œå½“ç³»ç»Ÿç»„ä»¶ä¹‹é—´è¢«é«˜åº¦è§£è€¦ä¹‹åï¼Œå¼€å‘å›¢é˜Ÿä¹‹é—´çš„å¹²æ‰°å°±å¤§å¤§å‡å°‘äº†ã€‚è­¬å¦‚è¯´ï¼Œå¦‚æœç³»ç»Ÿçš„ä¸šåŠ¡é€»è¾‘ä¸å…¶ UI æ— å…³ï¼Œé‚£ä¹ˆä¸“æ³¨äº UI å¼€å‘çš„å›¢é˜Ÿå°±ä¸ä¼šå¯¹ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å¼€å‘çš„å›¢é˜Ÿé€ æˆå¤šå¤§çš„å½±å“ã€‚åŒæ ·çš„ï¼Œå¦‚æœç³»ç»Ÿçš„å„ä¸ªç”¨ä¾‹ä¹‹é—´ç›¸äº’éš”ç¦»ï¼Œé‚£ä¹ˆä¸“æ³¨äº addOrder ç”¨ä¾‹çš„å›¢é˜Ÿå°±ä¸å¤ªå¯èƒ½å¹²æ‰°åˆ°è´Ÿè´£ deleteOrder ç”¨ä¾‹çš„å›¢é˜Ÿã€‚</p></blockquote><p>So long as the layers and use cases are decoupled, the architecture of the system will support the organization of the teams, irrespective of whether they are organized as feature teams, component teams, layer teams, or some other variation.</p><blockquote><p>åªè¦ç³»ç»ŸæŒ‰ç…§å…¶æ°´å¹³åˆ†å±‚å’Œç”¨ä¾‹è¿›è¡Œäº†æ°å½“çš„è§£è€¦ï¼Œæ•´ä¸ªç³»ç»Ÿçš„æ¶æ„å°±å¯ä»¥æ”¯æŒå¤šå›¢é˜Ÿå¼€å‘ï¼Œä¸ç®¡å›¢é˜Ÿç»„ç»‡å½¢å¼æ˜¯åˆ†åŠŸèƒ½å¼€å‘ã€åˆ†ç»„ä»¶å¼€å‘ã€åˆ†å±‚å¼€å‘ï¼Œè¿˜æ˜¯æŒ‰ç…§åˆ«çš„ä»€ä¹ˆå˜é‡åˆ†å·¥éƒ½å¯ä»¥ã€‚</p></blockquote><h2 id="independent-deployability-éƒ¨ç½²çš„ç‹¬ç«‹æ€§" tabindex="-1"><a class="header-anchor" href="#independent-deployability-éƒ¨ç½²çš„ç‹¬ç«‹æ€§" aria-hidden="true">#</a> INDEPENDENT DEPLOYABILITY éƒ¨ç½²çš„ç‹¬ç«‹æ€§</h2><p>The decoupling of the use cases and layers also affords a high degree of flexibility in deployment. Indeed, if the decoupling is done well, then it should be possible to hot-swap layers and use cases in running systems. Adding a new use case could be as simple as adding a few new jar files or services to the system while leaving the rest alone.</p><blockquote><p>è¿™ç§æŒ‰ç”¨ä¾‹å’Œæ°´å¹³åˆ†å±‚çš„è§£è€¦ä¹Ÿä¼šç»™ç³»ç»Ÿçš„éƒ¨ç½²å¸¦æ¥æå¤§çš„çµæ´»æ€§ã€‚å®é™…ä¸Šï¼Œå¦‚æœè§£è€¦å·¥ä½œåšå¾—å¥½ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥åœ¨ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­çƒ­åˆ‡æ¢ï¼ˆhot-swapï¼‰å…¶å„ä¸ªåˆ†å±‚å®ç°å’Œå…·ä½“çš„ç”¨ä¾‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¢åŠ æ–°æµ‹è¯•ç”¨ä¾‹å°±åªéœ€è¦åœ¨ç³»ç»Ÿä¸­æ·»åŠ ä¸€äº›æ–°çš„ jar æ–‡ä»¶ï¼Œæˆ–å¯åŠ¨ä¸€äº›æœåŠ¡å³å¯ï¼Œå…¶ä»–éƒ¨åˆ†å°†å®Œå…¨ä¸å—å½±å“ã€‚</p></blockquote><h2 id="duplication-é‡å¤" tabindex="-1"><a class="header-anchor" href="#duplication-é‡å¤" aria-hidden="true">#</a> DUPLICATION é‡å¤</h2><p>Architects often fall into a trapâ€”a trap that hinges on their fear of duplication.</p><blockquote><p>æ¶æ„å¸ˆä»¬ç»å¸¸ä¼šé’»è¿›ä¸€ä¸ªç‰›è§’å°–â€”â€”å®³æ€•é‡å¤ã€‚</p></blockquote><p>Duplication is generally a bad thing in software. We donâ€™t like duplicated code. When code is truly duplicated, we are honor-bound as professionals to reduce and eliminate it.</p><blockquote><p>å½“ç„¶ï¼Œé‡å¤åœ¨è½¯ä»¶è¡Œä¸šé‡Œä¸€èˆ¬æ¥è¯´éƒ½æ˜¯åäº‹ã€‚æˆ‘ä»¬ä¸å–œæ¬¢é‡å¤çš„ä»£ç ï¼Œå½“ä»£ç çœŸçš„å‡ºç°é‡å¤æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šæ„Ÿåˆ°ä½œä¸ºä¸€ä¸ªä¸“ä¸šäººå£«â€™è‡ªå·±æ˜¯æœ‰è´£ä»»å‡å°‘æˆ–æ¶ˆé™¤è¿™ç§é‡å¤çš„ã€‚</p></blockquote><p>But there are different kinds of duplication. There is true duplication, in which every change to one instance necessitates the same change to every duplicate of that instance. Then there is false or accidental duplication. If two apparently duplicated sections of code evolve along different pathsâ€”if they change at different rates, and for different reasonsâ€”then they are not true duplicates. Return to them in a few years, and youâ€™ll find that they are very different from each other.</p><blockquote><p>ä½†æ˜¯é‡å¤ä¹Ÿå­˜åœ¨ç€å¾ˆå¤šç§æƒ…å†µã€‚å…¶ä¸­æœ‰äº›æ˜¯çœŸæ­£çš„é‡å¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯ä¸ªå®ä¾‹ä¸Šå‘ç”Ÿçš„æ¯é¡¹å˜æ›´éƒ½å¿…é¡»åŒæ—¶åº”ç”¨åˆ°å…¶æ‰€æœ‰çš„å‰¯æœ¬ä¸Šã€‚é‡å¤çš„æƒ…å†µä¸­ä¹Ÿæœ‰ä¸€äº›æ˜¯å‡çš„ï¼Œæˆ–è€…è¯´è¿™ç§é‡å¤åªæ˜¯è¡¨é¢æ€§çš„ã€‚å¦‚æœæœ‰ä¸¤æ®µçœ‹èµ·æ¥é‡å¤çš„ä»£ç ï¼Œå®ƒä»¬èµ°çš„æ˜¯ä¸åŒçš„æ¼”è¿›è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»¬æœ‰ç€ä¸åŒçš„å˜æ›´é€Ÿç‡å’Œå˜æ›´ç¼˜ç”±ï¼Œé‚£ä¹ˆè¿™ä¸¤æ®µä»£ç å°±ä¸æ˜¯çœŸæ­£çš„é‡å¤ã€‚ç­‰æˆ‘ä»¬å‡ å¹´åå†å›è¿‡å¤´æ¥çœ‹ï¼Œå¯èƒ½å°±ä¼šå‘ç°è¿™ä¸¤æ®µä»£ç æ˜¯éå¸¸ä¸ä¸€æ ·çš„äº†ã€‚</p></blockquote><p>Now imagine two use cases that have very similar screen structures. The architects will likely be strongly tempted to share the code for that structure. But should they? Is that true duplication? Or it is accidental?</p><blockquote><p>ç°åœ¨ï¼Œæˆ‘ä»¬å‡è®¾æŸç³»ç»Ÿä¸­æœ‰ä¸¤ä¸ªç”¨ä¾‹åœ¨å±å¹•å±•ç°å½¢å¼ä¸Šéå¸¸ç±»ä¼¼ã€‚æ¯å½“è¿™ç§æ—¶å€™ï¼Œæ¶æ„å¸ˆä»¬å°±å¾ˆå¯èƒ½éå¸¸æƒ³å¤ç”¨åŒä¸€æ®µä»£ç æ¥å¤„ç†å®ƒä»¬çš„å±å¹•å±•ç¤ºã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬åˆ°åº•æ˜¯å¦åº”è¯¥è¿™æ ·åšå‘¢ï¼Ÿè¿™é‡Œæ˜¯çœŸæ­£çš„é‡å¤ï¼Œè¿˜åªæ˜¯ä¸€ç§è¡¨é¢æ€§çš„é‡å¤ï¼Ÿ</p></blockquote><p>Most likely it is accidental. As time goes by, the odds are that those two screens will diverge and eventually look very different. For this reason, care must be taken to avoid unifying them. Otherwise, separating them later will be a challenge.</p><blockquote><p>ææ€•è¿™é‡Œå¾ˆå¯èƒ½åªæ˜¯è¡¨é¢æ€§çš„é‡å¤ã€‚éšç€æ—¶é—´æ¨ç§»ï¼Œè¿™ä¸¤ä¸ªç”¨ä¾‹çš„å±å¹•å±•ç¤ºåŠŸèƒ½å¯èƒ½ä¼šå„è‡ªæ¼”å˜ï¼Œæœ€ç»ˆå¾ˆå¯èƒ½å®Œå…¨ä¸åŒã€‚æ­£æ˜¯ç”±äºè¿™æ ·çš„åŸå› ï¼Œæˆ‘ä»¬å¿…é¡»åŠ å€å°å¿ƒåœ°é¿å…è®©è¿™ä¸¤ä¸ªç”¨ä¾‹å¤ç”¨åŒä¸€æ®µä»£ç ï¼Œå¦åˆ™ï¼Œæœªæ¥å†æƒ³å°†å®ƒä»¬åˆ†å¼€ä¼šé¢ä¸´å¾ˆå¤§çš„æŒ‘æˆ˜ã€‚</p></blockquote><p>When you are vertically separating use cases from one another, you will run into this issue, and your temptation will be to couple the use cases because they have similar screen structures, or similar algorithms, or similar database queries and/or schemas. Be careful. Resist the temptation to commit the sin of knee-jerk elimination of duplication. Make sure the duplication is real.</p><blockquote><p>å½“æˆ‘ä»¬æŒ‰ç”¨ä¾‹å‚ç›´åˆ‡åˆ†ç³»ç»Ÿæ—¶ï¼Œè¿™æ ·çš„é—®é¢˜ä¼šç»å¸¸å‡ºç°ã€‚æˆ‘ä»¬ç»å¸¸é‡åˆ°ä¸€äº›ä¸åŒçš„ç”¨ä¾‹ä¸ºäº†ä¸Šè¿°åŸå› è¢«è€¦åˆåœ¨äº†ä¸€èµ·ã€‚ä¸ç®¡æ˜¯å› ä¸ºå®ƒä»¬å±•ç°å½¢å¼ç±»ä¼¼ï¼Œè¿˜æ˜¯ä½¿ç”¨äº†ç›¸ä¼¼çš„è¯­æ³•ã€ç›¸ä¼¼çš„æ•°æ®åº“æŸ¥è¯¢/è¡¨ç»“æ„ç­‰ï¼Œæ€»ä¹‹ï¼Œæˆ‘ä»¬ä¸€å®šè¦å°å¿ƒé¿å…å¯¹ä»»ä½•é‡å¤éƒ½è¦ç«‹å³æ¶ˆé™¤çš„åº”æ¿€ååº”æ¨¡å¼ä¸­ã€‚ä¸€å®šè¦ç¡®ä¿è¿™äº›æ¶ˆé™¤åŠ¨ä½œåªé’ˆå¯¹é‚£äº›çœŸæ­£æ„ä¹‰ä¸Šçš„é‡å¤ã€‚</p></blockquote><p>By the same token, when you are separating layers horizontally, you might notice that the data structure of a particular database record is very similar to the data structure of a particular screen view. You may be tempted to simply pass the database record up to the UI, rather than to create a view model that looks the same and copy the elements across. Be careful: This duplication is almost certainly accidental. Creating the separate view model is not a lot of effort, and it will help you keep the layers properly decoupled.</p><blockquote><p>åŒæ ·çš„é“ç†ï¼Œå½“æˆ‘ä»¬å¯¹ç³»ç»Ÿè¿›è¡Œæ°´å¹³åˆ†å±‚æ—¶ï¼Œä¹Ÿå¯èƒ½ä¼šå‘ç°æŸä¸ªæ•°æ®åº“è®°å½•çš„ç»“æ„å’ŒæŸä¸ªå±å¹•å±•ç¤ºçš„æ•°æ®æ¥å£éå¸¸ç›¸ä¼¼ã€‚æˆ‘ä»¬å¯èƒ½ä¹Ÿä¼šä¸ºäº†é¿å…å†åˆ›å»ºä¸€ä¸ªçœ‹èµ·æ¥ç›¸åŒçš„è§†å›¾æ¨¡å‹å¹¶åœ¨ä¸¤è€…ä¹‹é—´å¤åˆ¶å…ƒç´ ï¼Œè€Œé€‰æ‹©ç›´æ¥å°†æ•°æ®åº“è®°å½•ä¼ é€’ç»™ UI å±‚ã€‚æˆ‘ä»¬ä¹Ÿä¸€å®šè¦å°å¿ƒï¼Œè¿™é‡Œå‡ ä¹è‚¯å®šåªæ˜¯ä¸€ç§è¡¨é¢æ€§çš„é‡å¤ã€‚è€Œä¸”ï¼Œå¦å¤–åˆ›å»ºä¸€ä¸ªè§†å›¾æ¨¡å‹å¹¶ä¸ä¼šèŠ±è´¹å¤ªå¤šåŠ›æ°”ï¼Œè¿™å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä¿æŒç³»ç»Ÿæ°´å¹³åˆ†å±‚ä¹‹é—´çš„éš”ç¦»ã€‚</p></blockquote><h2 id="decoupling-modes-again-å†è°ˆè§£è€¦æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#decoupling-modes-again-å†è°ˆè§£è€¦æ¨¡å¼" aria-hidden="true">#</a> DECOUPLING MODES (AGAIN) å†è°ˆè§£è€¦æ¨¡å¼</h2><p>Back to modes. There are many ways to decouple layers and use cases. They can be decoupled at the source code level, at the binary code (deployment) level, and at the execution unit (service) level.</p><blockquote><p>è®©æˆ‘ä»¬å†å›åˆ°è§£è€¦æ¨¡å¼çš„é—®é¢˜ä¸Šæ¥ã€‚æŒ‰æ°´å¹³åˆ†å±‚å’Œç”¨ä¾‹è§£è€¦ä¸€ä¸ªç³»ç»Ÿæœ‰å¾ˆå¤šç§æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æºç å±‚æ¬¡ä¸Šè§£è€¦ã€äºŒè¿›åˆ¶å±‚æ¬¡ä¸Šè§£è€¦ï¼ˆéƒ¨ç½²ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨æ‰§è¡Œå•å…ƒå±‚æ¬¡ä¸Šè§£è€¦ï¼ˆæœåŠ¡ï¼‰ã€‚</p></blockquote><ul><li>Source level. We can control the dependencies between source code modules so that changes to one module do not force changes or recompilation of others (e.g., Ruby Gems).</li></ul><blockquote><ul><li>æºç å±‚æ¬¡ï¼šæˆ‘ä»¬å¯ä»¥æ§åˆ¶æºä»£ç æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä»¥æ­¤æ¥å®ç°ä¸€ä¸ªæ¨¡å—çš„å˜æ›´ä¸ä¼šå¯¼è‡´å…¶ä»–æ¨¡å—ä¹Ÿéœ€è¦å˜æ›´æˆ–é‡æ–°ç¼–è¯‘ï¼ˆä¾‹å¦‚ Ruby Gemï¼‰ã€‚</li></ul></blockquote><p>In this decoupling mode the components all execute in the same address space, and communicate with each other using simple function calls. There is a single executable loaded into computer memory. People often call this a monolithic structure.</p><blockquote><p>åœ¨è¿™ç§è§£è€¦æ¨¡å¼ä¸‹ï¼Œç³»ç»Ÿæ‰€æœ‰çš„ç»„ä»¶éƒ½ä¼šåœ¨åŒä¸€ä¸ªåœ°å€ç©ºé—´å†…æ‰§è¡Œï¼Œå®ƒä»¬ä¼šé€šè¿‡ç®€å•çš„å‡½æ•°è°ƒç”¨æ¥è¿›è¡Œå½¼æ­¤çš„äº¤äº’ã€‚è¿™ç±»ç³»ç»Ÿåœ¨è¿è¡Œæ—¶æ˜¯ä½œä¸ºä¸€ä¸ªæ‰§è¡Œæ–‡ä»¶è¢«ç»Ÿä¸€åŠ è½½åˆ°è®¡ç®—æœºå†…å­˜ä¸­çš„ã€‚äººä»¬ç»å¸¸æŠŠè¿™ç§æ¨¡å¼å«ä½œå•ä½“ç»“æ„ã€‚</p></blockquote><ul><li>Deployment level. We can control the dependencies between deployable units such as jar files, DLLs, or shared libraries, so that changes to the source code in one module do not force others to be rebuilt and redeployed.</li></ul><blockquote><ul><li>éƒ¨ç½²å±‚æ¬¡ï¼šæˆ‘ä»¬å¯ä»¥æ§åˆ¶éƒ¨ç½²å•å…ƒï¼ˆè­¬å¦‚ jar æ–‡ä»¶ã€DLLã€å…±äº«åº“ç­‰ï¼‰ä¹‹é—´ çš„ä¾èµ–å…³ç³»ï¼Œä»¥æ­¤æ¥å®ç°ä¸€ä¸ªæ¨¡å—çš„å˜æ›´ä¸ä¼šå¯¼è‡´å…¶ä»–æ¨¡å—çš„é‡æ–°æ„å»ºå’Œéƒ¨ç½²ã€‚</li></ul></blockquote><p>Many of the components may still live in the same address space, and communicate through function calls. Other components may live in other processes in the same processor, and communicate through interprocess communications, sockets, or shared memory. The important thing here is that the decoupled components are partitioned into independently deployable units such as jar files, Gem files, or DLLs.</p><blockquote><p>åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œå¤§éƒ¨åˆ†ç»„ä»¶å¯èƒ½è¿˜æ˜¯ä¾ç„¶è¿è¡Œåœ¨åŒä¸€ä¸ªåœ°å€ç©ºé—´å†…ï¼Œé€šè¿‡å½¼æ­¤çš„å‡½æ•°è°ƒç”¨é€šä¿¡ã€‚ä½†æœ‰ä¸€äº›åˆ«çš„ç»„ä»¶å¯èƒ½ä¼šè¿è¡Œåœ¨åŒä¸€ä¸ªå¤„ç†å™¨ä¸‹çš„å…¶ä»–è¿›ç¨‹å†…ï¼Œä½¿ç”¨è·¨è¿›ç¨‹é€šä¿¡ï¼Œæˆ–è€…é€šè¿‡ socket æˆ–å…±äº«å†…å­˜è¿›è¡Œé€šä¿¡ã€‚è¿™é‡Œæœ€é‡è¦çš„æ˜¯ï¼Œè¿™äº›ç»„ä»¶çš„è§£è€¦äº§ç”Ÿå‡ºè®¸å¤šå¯ç‹¬ç«‹éƒ¨ç½²çš„å•å…ƒï¼Œä¾‹å¦‚ jar æ–‡ä»¶ã€Gem æ–‡ä»¶å’Œ DLL ç­‰ã€‚</p></blockquote><ul><li>Service level. We can reduce the dependencies down to the level of data structures, and communicate solely through network packets such that every execution unit is entirely independent of source and binary changes to others (e.g., services or micro-services).</li></ul><blockquote><ul><li>æœåŠ¡å±‚æ¬¡ï¼šæˆ‘ä»¬å¯ä»¥å°†ç»„ä»¶é—´çš„ä¾èµ–å…³ç³»é™ä½åˆ°æ•°æ®ç»“æ„çº§åˆ«â€™ç„¶åä»…é€šè¿‡ç½‘ç»œæ•°æ®åŒ…æ¥è¿›è¡Œé€šä¿¡ã€‚è¿™æ ·ç³»ç»Ÿçš„æ¯ä¸ªæ‰§è¡Œå•å…ƒåœ¨æºç å±‚å’ŒäºŒè¿›åˆ¶å±‚éƒ½ä¼šæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä¸ªä½“ï¼Œå®ƒä»¬çš„å˜æ›´ä¸ä¼šå½±å“å…¶ä»–åœ°æ–¹ï¼ˆä¾‹å¦‚å¸¸è§çš„æœåŠ¡æˆ–å¾®æœåŠ¡å°±éƒ½æ˜¯å¦‚æ­¤çš„ï¼‰ã€‚</li></ul></blockquote><p>What is the best mode to use?</p><blockquote><p>ç°åœ¨ï¼Œæˆ‘ä»¬è¦é—®çš„æ˜¯ç©¶ç«Ÿå“ªä¸ªæ¨¡å¼æ˜¯æœ€å¥½çš„å‘¢ï¼Ÿ</p></blockquote><p>The answer is that itâ€™s hard to know which mode is best during the early phases of a project. Indeed, as the project matures, the optimal mode may change.</p><blockquote><p>ç­”æ¡ˆæ˜¯ï¼Œåœ¨é¡¹ç›®æ—©æœŸå¾ˆéš¾çŸ¥é“å“ªç§æ¨¡å¼æ˜¯æœ€å¥½çš„ã€‚äº‹å®ä¸Šï¼Œéšç€é¡¹ç›®çš„é€æ¸æˆç†Ÿï¼Œæœ€å¥½çš„æ¨¡å¼å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚</p></blockquote><p>For example, itâ€™s not difficult to imagine that a system that runs comfortably on one server right now might grow to the point where some of its components ought to run on separate servers. While the system runs on a single server, the source-level decoupling might be sufficient. Later, however, it might require decoupling into deployable units, or even services.</p><blockquote><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä¸éš¾æƒ³è±¡ï¼Œä¸€ä¸ªåœ¨æŸå°æœåŠ¡å™¨ä¸Šè¿è¡Œè‰¯å¥½çš„ç¨‹åºå‘å±•åˆ°ä¸€å®šç¨‹åº¦ï¼Œå¯èƒ½å°±ä¼šéœ€è¦å°†å…¶æŸäº›ç»„ä»¶è¿ç§»åˆ°å…¶ä»–æœåŠ¡å™¨ä¸Šæ‰èƒ½æ»¡è¶³è¿è¡Œè¦æ±‚ã€‚å½“è¯¥ç³»ç»Ÿåªè¿è¡Œåœ¨ä¸€å°æœåŠ¡å™¨ä¸Šæ—¶ï¼Œæˆ‘ä»¬è¿›è¡Œæºç å±‚æ¬¡çš„è§£è€¦å°±å·²ç»è¶³å¤Ÿäº†ã€‚ä½†åœ¨è¿™ä¹‹åï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦è¿›è¡Œéƒ¨ç½²å•å…ƒå±‚æ¬¡çš„è§£è€¦ï¼Œç”šè‡³æœåŠ¡å±‚æ¬¡çš„è§£è€¦ã€‚</p></blockquote><p>One solution (which seems to be popular at the moment) is to simply decouple at the service level by default. A problem with this approach is that it is expensive and encourages coarse-grained decoupling. No matter how â€œmicroâ€ the micro-services get, the decoupling is not likely to be fine-grained enough.</p><blockquote><p>å¦ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼ˆä¼¼ä¹ä¹Ÿæ˜¯ç›®å‰æœ€æµè¡Œçš„æ–¹æ¡ˆï¼‰æ˜¯ï¼Œé»˜è®¤å°±é‡‡ç”¨æœåŠ¡å±‚æ¬¡çš„è§£è€¦ã€‚è¿™ç§åšæ³•çš„é—®é¢˜ä¸»è¦åœ¨äºå®ƒçš„æˆæœ¬å¾ˆé«˜ï¼Œå¹¶ä¸”æ˜¯åœ¨é¼“åŠ±ç²—ç²’åº¦çš„è§£è€¦ã€‚æ¯•ç«Ÿï¼Œæ— è®ºå¾®æœåŠ¡æœ‰å¤šä¹ˆâ€œå¾®â€ï¼Œå…¶è§£è€¦çš„ç²¾ç»†åº¦éƒ½å¯èƒ½æ˜¯ä¸å¤Ÿçš„ã€‚</p></blockquote><p>Another problem with service-level decoupling is that it is expensive, both in development time and in system resources. Dealing with service boundaries where none are needed is a waste of effort, memory, and cycles. And, yes, I know that the last two are cheapâ€”but the first is not.</p><blockquote><p>æœåŠ¡å±‚æ¬¡è§£è€¦çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯ä¸ä»…ç³»ç»Ÿèµ„æºæˆæœ¬é«˜æ˜‚ï¼Œè€Œä¸”ç ”å‘æˆæœ¬æ›´é«˜ã€‚å¤„ç†æœåŠ¡è¾¹ç•Œä¸ä»…éå¸¸è€—è´¹å†…å­˜ã€å¤„ç†å™¨èµ„æºï¼Œè€Œä¸”æ›´è€—è´¹äººåŠ›ã€‚è™½ç„¶å†…å­˜å’Œå¤„ç†å™¨è¶Šæ¥è¶Šä¾¿å®œï¼Œä½†æ˜¯äººåŠ›æˆæœ¬å¯ä¸€ç›´éƒ½å¾ˆé«˜ã€‚</p></blockquote><p>My preference is to push the decoupling to the point where a service could be formed. should it become necessary; but then to leave the components in the same address space as long as possible. This leaves the option for a service open.</p><blockquote><p>é€šå¸¸ï¼Œæˆ‘ä¼šå€¾å‘äºå°†ç³»ç»Ÿçš„è§£è€¦æ¨è¡Œåˆ°æŸç§ä¸€æ—¦æœ‰éœ€è¦å°±å¯ä»¥éšæ—¶è½¬å˜ä¸ºæœåŠ¡çš„ç¨‹åº¦å³å¯ï¼Œè®©æ•´ä¸ªç¨‹åºå°½é‡é•¿æ—¶é—´åœ°ä¿æŒå•ä½“ç»“æ„ï¼Œä»¥ä¾¿ç»™æœªæ¥ç•™ä¸‹å¯é€‰é¡¹ã€‚</p></blockquote><p>With this approach, initially the components are separated at the source code level. That may be good enough for the duration of the projectâ€™s lifetime. If, however, deployment or development issues arise, driving some of the decoupling to a deployment level may be sufficientâ€”at least for a while.</p><blockquote><p>åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œç³»ç»Ÿæœ€åˆçš„ç»„ä»¶éš”ç¦»æªæ–½éƒ½æ˜¯åšåœ¨æºç å±‚æ¬¡ä¸Šçš„ï¼Œè¿™æ ·çš„è§£è€¦å¯èƒ½åœ¨æ•´ä¸ªé¡¹ç›®çš„ç”Ÿå‘½å‘¨æœŸé‡Œå·²ç»è¶³å¤Ÿäº†ã€‚ç„¶è€Œï¼Œå¦‚æœéƒ¨ç½²å’Œå¼€å‘æ–¹é¢æœ‰æ›´é«˜çš„éœ€æ±‚å‡ºç°ï¼Œé‚£ä¹ˆå°†æŸäº›ç»„ä»¶è§£è€¦åˆ°éƒ¨ç½²å•å…ƒå±‚æ¬¡å°±å¯èƒ½å¤Ÿäº†ï¼Œèµ·ç èƒ½æ’‘ä¸Šä¸€é˜µã€‚</p></blockquote><p>As the development, deployment, and operational issues increase, I carefully choose which deployable units to turn into services, and gradually shift the system in that direction.</p><blockquote><p>å½“ç„¶ï¼Œéšç€ç³»ç»Ÿåœ¨å¼€å‘ã€éƒ¨ç½²ã€è¿è¡Œå„æ–¹é¢æ‰€é¢ä¸´é—®é¢˜æŒç»­å¢åŠ ï¼Œæˆ‘ä»¬åº”è¯¥æŒ‘é€‰ä¸€ä¸‹å¯ä»¥å°†å“ªäº›å¯éƒ¨ç½²å•å…ƒè½¬åŒ–ä¸ºæœåŠ¡ï¼Œå¹¶ä¸”é€æ¸å°†ç³»ç»Ÿå‘è¿™ä¸ªæ–¹å‘è½¬å˜ã€‚</p></blockquote><p>Over time, the operational needs of the system may decline. What once required decoupling at the service level may now require only deployment-level or even source-level decoupling.</p><blockquote><p>è€Œéšç€æ—¶é—´çš„æµé€ï¼Œç³»ç»Ÿçš„è¿ç»´éœ€æ±‚å¯èƒ½åˆä¼šé™ä½ã€‚ä¹‹å‰éœ€è¦è¿›è¡ŒæœåŠ¡å±‚æ¬¡è§£è€¦çš„ç³»ç»Ÿå¯èƒ½ç°åœ¨åªéœ€è¦è¿›è¡Œéƒ¨ç½²å±‚æ¬¡æˆ–æºç å±‚æ¬¡çš„è§£è€¦å°±å¤Ÿäº†ã€‚</p></blockquote><p>A good architecture will allow a system to be born as a monolith, deployed in a single file, but then to grow into a set of independently deployable units, and then all the way to independent services and/or micro-services. Later, as things change, it should allow for reversing that progression and sliding all the way back down into a monolith.</p><blockquote><p>ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„æ¶æ„åº”è¯¥å…è®¸ä¸€ä¸ªç³»ç»Ÿä»å•ä½“ç»“æ„å¼€å§‹ï¼Œä»¥å•ä¸€æ–‡ä»¶çš„å½¢å¼éƒ¨ç½²ï¼Œç„¶åé€æ¸æˆé•¿ä¸ºä¸€ç»„ç›¸äº’ç‹¬ç«‹çš„å¯éƒ¨ç½²å•å…ƒï¼Œç”šè‡³æ˜¯ç‹¬ç«‹çš„æœåŠ¡æˆ–è€…å¾®æœåŠ¡ã€‚æœ€åè¿˜èƒ½éšç€æƒ…å†µçš„å˜åŒ–ï¼Œå…è®¸ç³»ç»Ÿé€æ¸å›é€€åˆ°å•ä½“ç»“æ„ã€‚</p></blockquote><p>A good architecture protects the majority of the source code from those changes. It leaves the decoupling mode open as an option so that large deployments can use one mode, whereas small deployments can use another.</p><blockquote><p>å¹¶ä¸”ï¼Œä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„æ¶æ„åœ¨ä¸Šè¿°è¿‡ç¨‹ä¸­è¿˜åº”è¯¥èƒ½ä¿æŠ¤ç³»ç»Ÿçš„å¤§éƒ¨åˆ†æºç ä¸å—å˜æ›´å½±å“ã€‚å¯¹æ•´ä¸ªç³»ç»Ÿæ¥è¯´ï¼Œè§£è€¦æ¨¡å¼ä¹Ÿåº”è¯¥æ˜¯ä¸€ä¸ªå¯é€‰é¡¹ã€‚æˆ‘ä»¬åœ¨è¿›è¡Œå¤§å‹éƒ¨ç½²æ—¶å¯ä»¥é‡‡ç”¨ä¸€ç§æ¨¡å¼ï¼Œè€Œåœ¨è¿›è¡Œå°å‹éƒ¨ç½²æ—¶åˆ™å¯ä»¥é‡†ç”¨å¦ä¸€ç§æ¨¡å¼ã€‚</p></blockquote><h2 id="conclusion-æœ¬ç« å°ç»“" tabindex="-1"><a class="header-anchor" href="#conclusion-æœ¬ç« å°ç»“" aria-hidden="true">#</a> CONCLUSION æœ¬ç« å°ç»“</h2><p>Yes, this is tricky. And Iâ€™m not saying that the change of decoupling modes should be a trivial configuration option (though sometimes that is appropriate). What Iâ€™m saying is that the decoupling mode of a system is one of those things that is likely to change with time, and a good architect foresees and appropriately facilitates those changes.</p><blockquote><p>æ˜¯çš„ï¼Œè¦è¾¾åˆ°ä¸Šè¿°è¦æ±‚éš¾åº¦ä¸å°ã€‚æˆ‘å¹¶æ²¡æœ‰è¯´ç³»ç»Ÿçš„éƒ¨ç½²æ¨¡å¼å°±ä¸€å®šè¦æ˜¯æŸç§ç®€å•çš„é…ç½®é¡¹ï¼ˆè™½ç„¶åœ¨æŸäº›æƒ…å†µä¸‹çš„ç¡®åº”è¯¥è¿™æ ·åšï¼‰ã€‚è¿™é‡Œçš„ä¸»è¦è§‚ç‚¹è®¤ä¸ºï¼Œä¸€ä¸ªç³»ç»Ÿæ‰€é€‚ç”¨çš„è§£è€¦æ¨¡å¼å¯èƒ½ä¼šéšç€æ—¶é—´è€Œå˜åŒ–ï¼Œä¼˜ç§€çš„æ¶æ„å¸ˆåº”è¯¥èƒ½é¢„è§è¿™ä¸€ç‚¹ï¼Œå¹¶ä¸”åšå²€ç›¸åº”çš„å¯¹ç­–ã€‚</p></blockquote></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/windily-cloud/obsidian-publish/edit/main/Publish/Publish/Clean Archtechture/ch16.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="info">2022/9/20 11:11:04</span></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: wwww.4399li@qq.com">windilycloud</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch15.html" class="nav-link prev" aria-label="ch15.md"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="icon iconfont icon-file"></span>ch15.md</div></a><a href="/obsidian-publish/Publish/Clean%20Archtechture/ch17.html" class="nav-link next" aria-label="ch17.md"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">ch17.md<span class="icon iconfont icon-file"></span></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">ä»€ä¹ˆæ˜¯å¹¸è¤”ï¼Ÿ å¹¸ç¦å°±æ˜¯çŒ«åƒé±¼ç‹—åƒè‚‰ï¼Œå¥¥ç‰¹æ›¼æ‰“å°æ€ªå…½ï¼</div><div class="copyright">Copyright Â© 2022 Windily-Cloud</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/obsidian-publish/assets/app.887b133c.js" defer></script>
  </body>
</html>
