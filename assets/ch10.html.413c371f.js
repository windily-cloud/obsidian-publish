import{_ as s}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as i,c as r,a,w as n,b as e,d as t,e as l,r as c}from"./app.887b133c.js";const d={},h=e("h1",{id:"chap10-isp-the-interface-segregation-principle-isp-\u63A5\u53E3\u9694\u79BB\u539F\u5219",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#chap10-isp-the-interface-segregation-principle-isp-\u63A5\u53E3\u9694\u79BB\u539F\u5219","aria-hidden":"true"},"#"),t(" Chap10. ISP: THE INTERFACE SEGREGATION PRINCIPLE ISP\uFF1A\u63A5\u53E3\u9694\u79BB\u539F\u5219")],-1),u=e("p",null,"The Interface Segregation Principle (ISP) derives its name from the diagram shown in Figure 10.1.",-1),p=e("blockquote",null,[e("p",null,"\u201C\u63A5\u53E3\u9694\u79BB\u539F\u5219\uFF08ISP\uFF09\u201D\u8FD9\u4E2A\u540D\u5B57\u6765\u81EA\u56FE 10.1 \u6240\u793A\u7684\u8FD9\u79CD\u8F6F\u4EF6\u7ED3\u6784\u3002")],-1),g=t("The Interface Segregation Principle"),m=e("p",null,"In the situation illustrated in Figure 10.1, there are several users who use the operations of the OPS class. Let\u2019s assume that User1 uses only op1, User2 uses only op2, and User3 uses only op3.",-1),_=e("blockquote",null,[e("p",null,"\u5728\u56FE 10.1 \u6240\u63CF\u7ED8\u7684\u5E94\u7528\u4E2D\uFF0C\u6709\u591A\u4E2A\u7528\u6237\u9700\u8981\u64CD\u4F5C OPS \u7C7B\u3002\u73B0\u5728\uFF0C\u6211\u4EEC\u5047\u8BBE\u8FD9\u91CC\u7684 User1 \u53EA\u9700\u8981\u4F7F\u7528 op1\uFF0CUser2 \u53EA\u9700\u8981\u4F7F\u7528 op2\uFF0CUser3 \u53EA\u9700\u8981\u4F7F\u7528 op3\u3002")],-1),f=e("p",null,"Now imagine that OPS is a class written in a language like Java. Clearly, in that case, the source code of User1 will inadvertently depend on op2 and op3, even though it doesn\u2019t call them. This dependence means that a change to the source code of op2 in OPS will force User1 to be recompiled and redeployed, even though nothing that it cared about has actually changed.",-1),y=e("blockquote",null,[e("p",null,"\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5982\u679C OPS \u7C7B\u662F\u7528 Java \u7F16\u7A0B\u8BED\u8A00\u7F16\u5199\u7684\uFF0C\u90A3\u4E48\u5F88\u660E\u663E\uFF0CUser1 \u867D\u7136\u4E0D\u9700\u8981\u8C03\u7528 op2\u3001op3\uFF0C\u4F46\u5728\u6E90\u4EE3\u7801\u5C42\u6B21\u4E0A\u4E5F\u4E0E\u5B83\u4EEC\u5F62\u6210\u4F9D\u8D56\u5173\u7CFB\u3002\u8FD9\u79CD\u4F9D\u8D56\u610F\u5473\u7740\u6211\u4EEC\u5BF9 OPS \u4EE3\u7801\u4E2D op2 \u6240\u505A\u7684\u4EFB\u4F55\u4FEE\u6539\uFF0C\u5373\u4F7F\u4E0D\u4F1A\u5F71\u54CD\u5230 User1 \u7684\u529F\u80FD\uFF0C\u4E5F\u4F1A\u5BFC\u81F4\u5B83\u9700\u8981\u88AB\u91CD\u65B0\u7F16\u8BD1\u548C\u90E8\u7F72\u3002")],-1),b=e("p",null,"This problem can be resolved by segregating the operations into interfaces as shown in Figure 10.2.",-1),S=e("p",null,"Again, if we imagine that this is implemented in a statically typed language like Java, then the source code of User1 will depend on U1Ops, and op1, but will not depend on OPS. Thus a change to OPS that User1 does not care about will not cause User1 to be recompiled and redeployed.",-1),k=e("blockquote",null,[e("p",null,"\u8FD9\u4E2A\u95EE\u9898\u53EF\u4EE5\u901A\u8FC7\u5C06\u4E0D\u540C\u7684\u64CD\u4F5C\u9694\u79BB\u6210\u63A5\u53E3\u6765\u89E3\u51B3\uFF0C\u5177\u4F53\u5982\u56FE 10.2 \u6240\u793A\u3002\u540C\u6837\uFF0C\u6211\u4EEC\u4E5F\u5047\u8BBE\u8FD9\u4E2A\u4F8B\u5B50\u662F\u7528 Java \u8FD9\u79CD\u9759\u6001\u7C7B\u578B\u8BED\u8A00\u6765\u5B9E\u73B0\u7684\uFF0C\u90A3\u4E48\u73B0\u5728 User1 \u7684\u6E90\u4EE3\u7801\u4F1A\u4F9D\u8D56\u4E8E U1Ops \u548C op1\uFF0C\u4F46\u4E0D\u4F1A\u4F9D\u8D56\u4E8E OPS\u3002\u8FD9\u6837\u4E00\u6765\uFF0C\u6211\u4EEC\u4E4B\u540E\u5BF9 OPS \u505A\u7684\u4FEE\u6539\u53EA\u8981\u4E0D\u5F71\u54CD\u5230 User1 \u7684\u529F\u80FD\uFF0C\u5C31\u4E0D\u9700\u8981\u91CD\u65B0\u7F16\u8BD1\u548C\u90E8\u7F72 User1 \u4E86\u3002")],-1),P=t("Segregated operations"),w=l('<h2 id="isp-and-language-isp-\u4E0E\u7F16\u7A0B\u8BED\u8A00" tabindex="-1"><a class="header-anchor" href="#isp-and-language-isp-\u4E0E\u7F16\u7A0B\u8BED\u8A00" aria-hidden="true">#</a> ISP AND LANGUAGE ISP \u4E0E\u7F16\u7A0B\u8BED\u8A00</h2><p>Clearly, the previously given description depends critically on language type. Statically typed languages like Java force programmers to create declarations that users must import, or use, or otherwise include. It is these included declarations in source code that create the source code dependencies that force recompilation and redeployment.</p><blockquote><p>\u5F88\u660E\u663E\uFF0C\u4E0A\u8FF0\u4F8B\u5B50\u5F88\u5927\u7A0B\u5EA6\u4E0A\u4E5F\u4F9D\u8D56\u4E8E\u6211\u4EEC\u6240\u91C6\u7528\u7684\u7F16\u7A0B\u8BED\u8A00\uFF1A\u5BF9\u4E8E Java \u8FD9\u6837\u7684\u9759\u6001\u7C7B\u578B\u8BED\u8A00\u6765\u8BF4\uFF0C\u5B83\u4EEC\u9700\u8981\u7A0B\u5E8F\u5458\u663E\u5F0F\u5730 import\u3001use \u6216\u8005 include \u5176\u5B9E\u73B0\u529F\u80FD\u6240\u9700\u8981\u7684\u6E90\u4EE3\u7801\u3002\u800C\u6B63\u662F\u8FD9\u4E9B\u8BED\u53E5\u5E26\u6765\u4E86\u6E90\u4EE3\u7801\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\uFF0C\u8FD9\u4E5F\u5C31\u5BFC\u81F4\u4E86\u67D0\u4E9B\u6A21\u5757\u9700\u8981\u88AB\u91CD\u65B0\u7F16\u8BD1\u548C\u91CD\u65B0\u90E8\u7F72\u3002</p></blockquote><p>In dynamically typed languages like Ruby and Python, such declarations don\u2019t exist in source code. Instead, they are inferred at runtime. Thus there are no source code dependencies to force recompilation and redeployment. This is the primary reason that dynamically typed languages create systems that are more flexible and less tightly coupled than statically typed languages.</p><blockquote><p>\u800C\u5BF9\u4E8E Ruby \u548C Python \u8FD9\u6837\u7684\u52A8\u6001\u7C7B\u578B\u8BED\u8A00\u6765\u8BF4\uFF0C\u6E90\u4EE3\u7801\u4E2D\u5C31\u4E0D\u5B58\u5728\u8FD9\u6837\u7684\u58F0\u660E\uFF0C\u5B83\u4EEC\u6240\u7528\u5BF9\u8C61\u7684\u7C7B\u578B\u4F1A\u5728\u8FD0\u884C\u65F6\u88AB\u63A8\u6F14\u51FA\u6765\uFF0C\u6240\u4EE5\u4E5F\u5C31\u4E0D\u5B58\u5728\u5F3A\u5236\u91CD\u65B0\u7F16\u8BD1\u91CD\u65B0\u90E8\u7F72\u7684\u5FC5\u8981\u6027\u3002\u8FD9\u5C31\u662F\u52A8\u6001\u7C7B\u578B\u8BED\u8A00\u8981\u6BD4\u9759\u6001\u7C7B\u578B\u8BED\u8A00\u66F4\u7075\u6D3B\u3001\u8026\u5408\u5EA6\u66F4\u677E\u7684\u539F\u56E0\u3002</p></blockquote><p>This fact could lead you to conclude that the ISP is a language issue, rather than an architecture issue.</p><blockquote><p>\u5F53\u7136\uFF0C\u5982\u679C\u4EC5\u4EC5\u5C31\u8FD9\u6837\u8BF4\u7684\u8BDD\uFF0C\u8BFB\u8005\u53EF\u80FD\u4F1A\u8BEF\u4EE5\u4E3A ISP \u53EA\u662F\u4E00\u4E2A\u4E0E\u7F16\u7A0B\u8BED\u8A00\u7684\u9009\u62E9\u7D27\u5BC6\u76F8\u5173\u7684\u8BBE\u8BA1\u539F\u5219\uFF0C\u800C\u975E\u8F6F\u4EF6\u67B6\u6784\u95EE\u9898\uFF0C\u8FD9\u5C31\u9519\u4E86\u3002</p></blockquote><h2 id="isp-and-architecture-isp-\u4E0E\u8F6F\u4EF6\u67B6\u6784" tabindex="-1"><a class="header-anchor" href="#isp-and-architecture-isp-\u4E0E\u8F6F\u4EF6\u67B6\u6784" aria-hidden="true">#</a> ISP AND ARCHITECTURE ISP \u4E0E\u8F6F\u4EF6\u67B6\u6784</h2><p>If you take a step back and look at the root motivations of the ISP, you can see a deeper concern lurking there. In general, it is harmful to depend on modules that contain more than you need. This is obviously true for source code dependencies that can force unnecessary recompilation and redeployment\u2014but it is also true at a much higher, architectural level.</p><blockquote><p>\u56DE\u987E\u4E00\u4E0B ISP \u6700\u521D\u7684\u6210\u56E0\uFF1A\u5728\u4E00\u822C\u60C5\u51B5\u4E0B\uFF0C\u4EFB\u4F55\u5C42\u6B21\u7684\u8F6F\u4EF6\u8BBE\u8BA1\u5982\u679C\u4F9D\u8D56\u4E8E\u4E0D\u9700\u8981\u7684\u4E1C\u897F\uFF0C\u90FD\u4F1A\u662F\u6709\u5BB3\u7684\u3002\u4ECE\u6E90\u4EE3\u7801\u5C42\u6B21\u6765\u8BF4\uFF0C\u8FD9\u6837\u7684\u4F9D\u8D56\u5173\u7CFB\u4F1A\u5BFC\u81F4\u4E0D\u5FC5\u8981\u7684\u91CD\u65B0\u7F16\u8BD1\u548C\u91CD\u65B0\u90E8\u7F72\uFF0C\u5BF9\u66F4\u9AD8\u5C42\u6B21\u7684\u8F6F\u4EF6\u67B6\u6784\u8BBE\u8BA1\u6765\u8BF4\uFF0C\u95EE\u9898\u4E5F\u662F\u7C7B\u4F3C\u7684\u3002</p></blockquote><p>Consider, for example, an architect working on a system, S. He wants to include a certain framework, F, into the system. Now suppose that the authors of F have bound it to a particular database, D. So S depends on F. which depends on D (Figure 10.3).</p><blockquote><p>\u4F8B\u5982\uFF0C\u6211\u4EEC\u5047\u8BBE\u67D0\u4F4D\u8F6F\u4EF6\u67B6\u6784\u5E08\u5728\u8BBE\u8BA1\u7CFB\u7EDF S \u65F6\uFF0C\u60F3\u8981\u5728\u8BE5\u7CFB\u7EDF\u4E2D\u5F15\u5165\u67D0\u4E2A\u6846\u67B6 F\u3002\u8FD9\u65F6\u5019\uFF0C\u5047\u8BBE\u6846\u67B6 F \u7684\u4F5C\u8005\u53C8\u5C06\u5176\u6346\u7ED1\u5728\u4E00\u4E2A\u7279\u5B9A\u7684\u6570\u636E\u5E93 D \u4E0A\uFF0C\u90A3\u4E48\u5C31\u5F62\u6210\u4E86 S \u4F9D\u8D56\u4E8E F\uFF0CF \u53C8\u4F9D\u8D56\u4E8E D \u7684\u5173\u7CFB\uFF08\u53C2\u89C1\u56FE 10.3\uFF09\u3002</p></blockquote>',12),I=t("A problematic architecture"),v=e("p",null,"Now suppose that D contains features that F does not use and, therefore, that S does not care about. Changes to those features within D may well force the redeployment of F and, therefore, the redeployment of S. Even worse, a failure of one of the features within D may cause failures in F and S.",-1),U=e("blockquote",null,[e("p",null,"\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5982\u679C D \u4E2D\u5305\u542B\u4E86 F \u4E0D\u9700\u8981\u7684\u529F\u80FD\uFF0C\u90A3\u4E48\u8FD9\u4E9B\u529F\u80FD\u540C\u6837\u4E5F\u4F1A\u662F S \u4E0D\u9700\u8981\u7684\u3002\u800C\u6211\u4EEC\u5BF9 D \u4E2D\u7684\u8FD9\u4E9B\u529F\u80FD\u7684\u4FEE\u6539\u5C06\u4F1A\u5BFC\u81F4 F \u9700\u8981\u88AB\u91CD\u65B0\u90E8\u7F72\uFF0C\u540E\u8005\u53C8\u4F1A\u5BFC\u81F4 S \u7684\u91CD\u65B0\u90E8\u7F72\u3002\u66F4\u7CDF\u7CD5\u7684\u662F\uFF0CD \u4E2D\u4E00\u4E2A\u65E0\u5173\u529F\u80FD\u7684\u9519\u8BEF\u4E5F\u53EF\u80FD\u4F1A\u5BFC\u81F4 F \u548C S \u8FD0\u884C\u51FA\u9519\u3002")],-1),F=e("h2",{id:"conclusion-\u672C\u7AE0\u5C0F\u7ED3",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#conclusion-\u672C\u7AE0\u5C0F\u7ED3","aria-hidden":"true"},"#"),t(" CONCLUSION \u672C\u7AE0\u5C0F\u7ED3")],-1),q=e("p",null,"The lesson here is that depending on something that carries baggage that you don\u2019t need can cause you troubles that you didn\u2019t expect.",-1),C=e("blockquote",null,[e("p",null,"\u672C\u7AE0\u6240\u8BA8\u8BBA\u7684\u8BBE\u8BA1\u539F\u5219\u544A\u8BC9\u6211\u4EEC\uFF1A\u4EFB\u4F55\u5C42\u6B21\u7684\u8F6F\u4EF6\u8BBE\u8BA1\u5982\u679C\u4F9D\u8D56\u4E86\u5B83\u5E76\u4E0D\u9700\u8981\u7684\u4E1C\u897F\uFF0C\u5C31\u4F1A\u5E26\u6765\u610F\u6599\u4E4B\u5916\u7684\u9EBB\u70E6\u3002")],-1),T=e("p",null,"We\u2019ll explore this idea in more detail when we discuss the Common Reuse Principle in Chapter 13, \u201CComponent Cohesion.\u201D",-1),N=e("blockquote",null,[e("p",null,"\u6211\u4EEC\u5C06\u4F1A\u5728\u7B2C 13 \u7AE0\u201C\u7EC4\u4EF6\u805A\u5408\u201D\u4E2D\u8BA8\u8BBA\u5171\u540C\u590D\u7528\u539F\u5219\u7684\u65F6\u5019\u518D\u6765\u6DF1\u5165\u63A2\u8BA8\u66F4\u591A\u76F8\u5173\u7684\u7EC6\u8282\u3002")],-1);function O(x,D){const o=c("Figures");return i(),r("div",null,[h,u,p,a(o,{figure:"10-1"},{default:n(()=>[g]),_:1}),m,_,f,y,b,S,k,a(o,{figure:"10-2"},{default:n(()=>[P]),_:1}),w,a(o,{figure:"10-3"},{default:n(()=>[I]),_:1}),v,U,F,q,C,T,N])}const R=s(d,[["render",O],["__file","ch10.html.vue"]]);export{R as default};
