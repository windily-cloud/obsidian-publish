import{_ as n}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as r,c,a as s,w as a,e as i,b as e,d as t,r as l}from"./app.887b133c.js";const h={},d=i('<h1 id="chap27-services-great-and-small-\u670D\u52A1-\u5B8F\u89C2\u4E0E\u5FAE\u89C2" tabindex="-1"><a class="header-anchor" href="#chap27-services-great-and-small-\u670D\u52A1-\u5B8F\u89C2\u4E0E\u5FAE\u89C2" aria-hidden="true">#</a> Chap27. SERVICES: GREAT AND SMALL \u670D\u52A1\uFF1A\u5B8F\u89C2\u4E0E\u5FAE\u89C2</h1><p>Service-oriented \u201Carchitectures\u201D and micro-service \u201Carchitectures\u201D have become very popular of late. The reasons for their current popularity include the following:</p><blockquote><p>\u9762\u5411\u670D\u52A1\u7684\u201C\u67B6\u6784\u201D\u4EE5\u53CA\u5FAE\u670D\u52A1\u201C\u67B6\u6784\u201D\u8FD1\u5E74\u6765\u975E\u5E38\u6D41\u884C\uFF0C\u5176\u4E2D\u7684\u539F\u56E0\u5982\u4E0B\uFF1A</p></blockquote><ul><li>Services seem to be strongly decoupled from each other. As we shall see, this is only partially true.</li><li>Services appear to support independence of development and deployment. Again, as we shall see, this is only partially true.</li></ul><hr><blockquote><ul><li>\u670D\u52A1\u4E4B\u95F4\u4F3C\u4E4E\u662F\u5F3A\u9694\u79BB\u7684\uFF0C\u4F46\u662F\u4E0B\u6587\u6211\u4EEC\u4F1A\u8BB2\u5230\uFF0C\u5E76\u4E0D\u5B8C\u5168\u662F\u8FD9\u6837\u3002</li><li>\u670D\u52A1\u88AB\u8BA4\u4E3A\u662F\u652F\u6301\u72EC\u7ACB\u5F00\u53D1\u548C\u90E8\u7F72\u7684\uFF0C\u540C\u6837\uFF0C\u4E0B\u6587\u6211\u4EEC\u4E5F\u4F1A\u8BB2\u5230\uFF0C\u5E76\u4E0D\u5B8C\u5168\u662F\u8FD9\u6837\u3002</li></ul></blockquote><h2 id="service-architecture-\u9762\u5411\u670D\u52A1\u7684\u67B6\u6784" tabindex="-1"><a class="header-anchor" href="#service-architecture-\u9762\u5411\u670D\u52A1\u7684\u67B6\u6784" aria-hidden="true">#</a> SERVICE ARCHITECTURE? \u9762\u5411\u670D\u52A1\u7684\u67B6\u6784</h2><p>First, let\u2019s consider the notion that using services, by their nature, is an architecture. This is patently untrue. The architecture of a system is defined by boundaries that separate high-level policy from low-level detail and follow the Dependency Rule. Services that simply separate application behaviors are little more than expensive function calls, and are not necessarily architecturally significant.</p><blockquote><p>\u9996\u5148\uFF0C\u6211\u4EEC\u6765\u6279\u5224\u201C\u53EA\u8981\u4F7F\u7528\u4E86\u670D\u52A1\uFF0C\u5C31\u7B49\u4E8E\u6709\u4E86\u4E00\u5957\u67B6\u6784\u201D\u8FD9\u79CD\u601D\u60F3\u3002\u8FD9\u663E\u7136\u662F\u5B8C\u5168\u9519\u8BEF\u7684\u3002\u5982\u524D\u6587\u6240\u8FF0\uFF0C\u67B6\u6784\u8BBE\u8BA1\u7684\u4EFB\u52A1\u5C31\u662F\u627E\u5230\u9AD8\u5C42\u7B56\u7565\u4E0E\u4F4E\u5C42\u7EC6\u8282\u4E4B\u95F4\u7684\u67B6\u6784\u8FB9\u754C\uFF0C\u540C\u65F6\u4FDD\u8BC1\u8FD9\u4E9B\u8FB9\u754C\u9075\u5B88\u4F9D\u8D56\u5173\u7CFB\u89C4\u5219\u3002\u6240\u8C13\u7684\u670D\u52A1\u672C\u8EAB\u53EA\u662F\u4E00\u79CD\u6BD4\u51FD\u6570\u8C03\u7528\u65B9\u5F0F\u6210\u672C\u7A0D\u9AD8\u7684\uFF0C\u5206\u5272\u5E94\u7528\u7A0B\u5E8F\u884C\u4E3A\u7684\u4E00\u79CD\u5F62\u5F0F\uFF0C\u4E0E\u7CFB\u7EDF\u67B6\u6784\u65E0\u5173\u3002</p></blockquote><p>This is not to say that all services should be architecturally significant. There are often substantial benefits to creating services that separate functionality across processes and platforms\u2014whether they obey the Dependency Rule or not. It\u2019s just that services, in and of themselves, do not define an architecture.</p><blockquote><p>\u5F53\u7136\uFF0C\u8FD9\u91CC\u5E76\u4E0D\u662F\u8BF4\u6240\u6709\u7684\u670D\u52A1\u90FD\u5E94\u8BE5\u5177\u6709\u7CFB\u7EDF\u67B6\u6784\u4E0A\u7684\u610F\u4E49\u3002\u6709\u65F6\u5019\uFF0C\u7528\u670D\u52A1\u8FD9\u79CD\u5F62\u5F0F\u6765\u9694\u79BB\u4E0D\u540C\u5E73\u53F0\u6216\u8FDB\u7A0B\u4E2D\u7684\u7A0B\u5E8F\u884C\u4E3A\u8FD9\u4EF6\u4E8B\u672C\u8EAB\u5C31\u5F88\u91CD\u8981\u2014\u2014\u4E0D\u7BA1\u5B83\u4EEC\u662F\u5426\u9075\u5B88\u4F9D\u8D56\u5173\u7CFB\u89C4\u5219\u3002\u6211\u4EEC\u53EA\u662F\u8BA4\u4E3A\uFF0C\u670D\u52A1\u672C\u8EAB\u5E76\u4E0D\u80FD\u5B8C\u5168\u4EE3\u8868\u7CFB\u7EDF\u67B6\u6784\u3002</p></blockquote><p>A helpful analogy is the organization of functions. The architecture of a monolithic or component-based system is defined by certain function calls that cross architectural boundaries and follow the Dependency Rule. Many other functions in those systems, however, simply separate one behavior from another and are not architecturally significant.</p><blockquote><p>\u4E3A\u4E86\u5E2E\u52A9\u8BFB\u8005\u7406\u89E3\u4E0A\u9762\u6240\u8BF4\u7684\u533A\u522B\uFF0C\u6211\u4EEC\u7528\u51FD\u6570\u7684\u7EC4\u7EC7\u5F62\u5F0F\u6765\u505A\u4E2A\u7C7B\u6BD4\u3002\u4E0D\u7BA1\u662F\u5355\u4F53\u7A0B\u5E8F\uFF0C\u8FD8\u662F\u591A\u7EC4\u4EF6\u7A0B\u5E8F\uFF0C\u7CFB\u7EDF\u67B6\u6784\u90FD\u662F\u7531\u90A3\u4E9B\u8DE8\u8D8A\u67B6\u6784\u8FB9\u754C\u7684\u5173\u952E\u51FD\u6570\u8C03\u7528\u6765\u5B9A\u4E49\u7684\uFF0C\u5E76\u4E14\u6574\u4E2A\u67B6\u6784\u5FC5\u987B\u9075\u5B88\u4F9D\u8D56\u5173\u7CFB\u89C4\u5219\u3002\u7CFB\u7EDF\u4E2D\u8BB8\u591A\u5176\u4ED6\u7684\u51FD\u6570\u867D\u7136\u4E5F\u8D77\u5230\u4E86\u9694\u79BB\u884C\u4E3A\u7684\u6548\u679C\uFF0C\u4F46\u5B83\u4EEC\u663E\u7136\u5E76\u4E0D\u5177\u6709\u67B6\u6784\u610F\u4E49\u3002</p></blockquote><p>So it is with services. Services are, after all, just function calls across process and/or platform boundaries. Some of those services are architecturally significant, and some aren\u2019t. Our interest, in this chapter, is with the former.</p><blockquote><p>\u670D\u52A1\u7684\u60C5\u51B5\u4E5F\u4E00\u6837\uFF0C\u670D\u52A1\u8FD9\u79CD\u5F62\u5F0F\u8BF4\u5230\u5E95\u4E0D\u8FC7\u662F\u4E00\u79CD\u8DE8\u8FDB\u7A0B/\u5E73\u53F0\u8FB9\u754C\u7684\u51FD\u6570\u8C03\u7528\u800C\u5DF1\u3002\u6709\u4E9B\u670D\u52A1\u4F1A\u5177\u6709\u67B6\u6784\u4E0A\u7684\u610F\u4E49\uFF0C\u6709\u4E9B\u5219\u6CA1\u6709\u3002\u6211\u4EEC\u8FD9\u91CC\u91CD\u70B9\u8981\u8BA8\u8BBA\u7684\uFF0C\u5F53\u7136\u662F\u524D\u8005\u3002</p></blockquote><h2 id="service-benefits-\u670D\u52A1\u6240\u5E26\u6765\u7684\u597D\u5904" tabindex="-1"><a class="header-anchor" href="#service-benefits-\u670D\u52A1\u6240\u5E26\u6765\u7684\u597D\u5904" aria-hidden="true">#</a> SERVICE BENEFITS? \u670D\u52A1\u6240\u5E26\u6765\u7684\u597D\u5904</h2><p>The question mark in the preceding heading indicates that this section is going to challenge the current popular orthodoxy of service architecture. Let\u2019s tackle the benefits one at a time.</p><blockquote><p>\u6211\u5728\u672C\u8282\u7684\u6807\u9898\u540E\u9762\u6253\u4E86\u4E2A\u95EE\u53F7\uFF0C\u610F\u5473\u7740\u6211\u6253\u7B97\u5728\u8FD9\u4E00\u8282\u597D\u597D\u6311\u6218\u4E00\u4E0B\u76EE\u524D\u6D41\u884C\u7684\u9488\u5BF9\u670D\u52A1\u67B6\u6784\u7684\u5D07\u62DC\u60C5\u8282\u3002\u4E0B\u9762\u5C31\u8BA9\u6211\u4EEC\u9488\u5BF9\u90A3\u4E9B\u6240\u8C13\u7684\u597D\u5904\uFF0C\u4E00\u4E2A\u4E00\u4E2A\u5730\u6765\u6279\u9A73\u3002</p></blockquote><h3 id="the-decoupling-fallacy-\u89E3\u8026\u5408\u7684\u8C2C\u8BBA" tabindex="-1"><a class="header-anchor" href="#the-decoupling-fallacy-\u89E3\u8026\u5408\u7684\u8C2C\u8BBA" aria-hidden="true">#</a> THE DECOUPLING FALLACY \u89E3\u8026\u5408\u7684\u8C2C\u8BBA</h3><p>One of the big supposed benefits of breaking a system up into services is that services are strongly decoupled from each other. After all, each service runs in a different process, or even a different processor; therefore those services do not have access to each other\u2019s variables. What\u2019s more, the interface of each service must be well defined.</p><blockquote><p>\u5F88\u591A\u4EBA\u8BA4\u4E3A\u5C06\u7CFB\u7EDF\u62C6\u5206\u6210\u670D\u52A1\u7684\u4E00\u4E2A\u6700\u5FD9\u8981\u7684\u597D\u5904\u5C31\u662F\u8BA9\u6BCF\u4E2A\u670D\u52A1\u4E4B\u95F4\u5B9E\u73B0\u5F3A\u89E3\u8026\u3002\u6BD5\u7ADF\uFF0C\u6BCF\u4E2A\u670D\u52A1\u90FD\u662F\u4EE5\u4E00\u4E2A\u4E0D\u540C\u7684\u8FDB\u7A0B\u6765\u8FD0\u884C\u7684\uFF0C\u751A\u81F3\u8FD0\u884C\u5728\u4E0D\u540C\u5904\u7406\u5668\u4E0A\u3002\u56E0\u6B64\uFF0C\u670D\u52A1\u4E4B\u95F4\u901A\u5E38\u4E0D\u80FD\u8BBF\u95EE\u5F7C\u6B64\u7684\u53D8\u91CF\u3002\u5176\u5916\uFF0C\u670D\u52A1\u4E4B\u95F4\u7684\u63A5\u53E3\u4E00\u5B9A\u662F\u5145\u5206\u5B9A\u4E49\u7684\u3002</p></blockquote><p>There is certainly some truth to this\u2014but not very much truth. Yes, services are decoupled at the level of individual variables. However, they can still be coupled by shared resources within a processor, or on the network. What\u2019s more, they are strongly coupled by the data they share.</p><blockquote><p>\u4ECE\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u6765\u8BF4\uFF0C\u8FD9\u662F\u5BF9\u7684\u3002\u786E\u5B9E\uFF0C\u670D\u52A1\u4E4B\u95F4\u7684\u786E\u5728\u53D8\u91CF\u5C42\u9762\u505A\u5230\u4E86\u5F7C\u6B64\u9694\u79BB\u3002\u7136\u800C\uFF0C\u5B83\u4EEC\u4E4B\u95F4\u8FD8\u662F\u53EF\u80FD\u4F1A\u56E0\u4E3A\u5904\u7406\u5668\u5185\u7684\u5171\u4EAB\u8D44\u6E90\uFF0C\u6216\u8005\u901A\u8FC7\u7F51\u7EDC\u5171\u4EAB\u8D44\u6E90\u800C\u5F7C\u6B64\u8026\u5408\u7684\u3002\u53E6\u5916\uFF0C\u4EFB\u4F55\u5F62\u5F0F\u7684\u5171\u4EAB\u6570\u636E\u884C\u4E3A\u90FD\u4F1A\u5BFC\u81F4\u5F3A\u8026\u5408\u3002</p></blockquote><p>For example, if a new field is added to a data record that is passed between services, then every service that operates on the new field must be changed. The services must also strongly agree about the interpretation of the data in that field. Thus those services are strongly coupled to the data record and, therefore, indirectly coupled to each other.</p><blockquote><p>\u4F8B\u5982\uFF0C\u5982\u679C\u7ED9\u670D\u52A1\u4E4B\u95F4\u4F20\u9012\u7684\u6570\u636E\u8BB0\u5F55\u4E2D\u589E\u52A0\u4E86\u4E00\u4E2A\u65B0\u5B57\u6BB5\uFF0C\u90A3\u4E48\u6BCF\u4E2A\u9700\u8981\u64CD\u4F5C\u8FD9\u4E2A\u5B57\u6BB5\u7684\u670D\u52A1\u90FD\u5FC5\u987B\u8981\u505A\u51FA\u76F8\u5E94\u7684\u53D8\u66F4\uFF0C\u670D\u52A1\u4E4B\u95F4\u5FC5\u987B\u5BF9\u8FD9\u6761\u6570\u636E\u7684\u89E3\u8BFB\u8FBE\u6210\u4E00\u81F4\u3002\u56E0\u6B64\u5176\u5B9E\u8FD9\u4E9B\u670D\u52A1\u5168\u90E8\u662F\u5F3A\u8026\u5408\u4E8E\u8FD9\u6761\u6570\u636E\u7ED3\u6784\u7684\uFF0C\u56E0\u6B64\u5B83\u4EEC\u662F\u95F4\u63A5\u5F7C\u6B64\u8026\u5408\u7684\u3002</p></blockquote><p>As for interfaces being well defined, that\u2019s certainly true\u2014but it is no less true for functions. Service interfaces are no more formal, no more rigorous, and no better defined than function interfaces. Clearly, then, this benefit is something of an illusion.</p><blockquote><p>\u518D\u6765\u8BF4\u8BF4\u670D\u52A1\u80FD\u5F88\u597D\u5730\u5B9A\u4E49\u63A5\u53E3\u2014\u2014\u5B83\u786E\u5B9E\u80FD\u5F88\u597D\u5730\u5B9A\u4E49\u63A5\u53E3\u2014\u2014\u4F46\u51FD\u6570\u4E5F\u80FD\u505A\u5230\u8FD9\u4E00\u70B9\u3002\u4E8B\u5B9E\u4E0A\uFF0C\u670D\u52A1\u7684\u63A5\u53E3\u4E0E\u666E\u901A\u7684\u51FD\u6570\u63A5\u53E3\u76F8\u6BD4\uFF0C\u5E76\u6CA1\u6709\u6BD4\u540E\u8005\u66F4\u6B63\u5F0F\u3001\u66F4\u4E25\u8C28\uFF0C\u4E5F\u6CA1\u6709\u66F4\u597D\uFF0C\u8FD9\u4E00\u70B9\u6839\u672C\u7B97\u4E0D\u4E0A\u4EC0\u4E48\u597D\u5904\u3002</p></blockquote><h3 id="the-fallacy-of-independent-development-and-deployment-\u72EC\u7ACB\u5F00\u53D1\u90E8\u7F72\u7684\u8C2C\u8BBA" tabindex="-1"><a class="header-anchor" href="#the-fallacy-of-independent-development-and-deployment-\u72EC\u7ACB\u5F00\u53D1\u90E8\u7F72\u7684\u8C2C\u8BBA" aria-hidden="true">#</a> THE FALLACY OF INDEPENDENT DEVELOPMENT AND DEPLOYMENT \u72EC\u7ACB\u5F00\u53D1\u90E8\u7F72\u7684\u8C2C\u8BBA</h3><p>Another of the supposed benefits of services is that they can be owned and operated by a dedicated team. That team can be responsible for writing, maintaining, and operating the service as part of a dev-ops strategy. This independence of development and deployment is presumed to be scalable. It is believed that large enterprise systems can be created from dozens, hundreds, or even thousands of independently developable and deployable services. Development, maintenance, and operation of the system can be partitioned between a similar number of independent teams.</p><blockquote><p>\u4EBA\u4EEC\u8BA4\u4E3A\u7684\u53E6\u4E00\u4E2A\u4F7F\u7528\u670D\u52A1\u7684\u597D\u5904\u5C31\u662F\uFF0C\u4E0D\u540C\u7684\u670D\u52A1\u53EF\u4EE5\u7531\u4E0D\u540C\u7684\u4E13\u95E8\u56E2\u961F\u8D1F\u8D23\u548C\u8FD0\u7EF4\u3002\u8FD9\u8BA9\u5F00\u53D1\u56E2\u961F\u53EF\u4EE5\u91C6\u7528 dev-ops \u6DF7\u5408\u7684\u5F62\u5F0F\u6765\u7F16\u5199\u3001\u7EF4\u62A4\u4EE5\u53CA\u8FD0\u7EF4\u5404\u81EA\u7684\u670D\u52A1\uFF0C\u8FD9\u79CD\u5F00\u53D1\u548C\u90E8\u7F72\u4E0A\u7684\u72EC\u7ACB\u6027\u88AB\u8BA4\u4E3A\u662F\u53EF\u6269\u5C55\u7684\u3002\u8FD9\u79CD\u89C2\u70B9\u8BA4\u4E3A\u5927\u578B\u7CFB\u7EDF\u53EF\u4EE5\u7531\u51E0\u5341\u4E2A\u3001\u51E0\u767E\u4E2A\u3001\u751A\u81F3\u51E0\u5343\u4E2A\u72EC\u7ACB\u5F00\u53D1\u90E8\u7F72\u7684\u670D\u52A1\u7EC4\u6210\u3002\u6574\u4E2A\u7CFB\u7EDF\u7684\u7814\u53D1\u3001\u7EF4\u62A4\u4EE5\u53CA\u8FD0\u7EF4\u5DE5\u4F5C\u5C31\u53EF\u4EE5\u7531\u540C\u7B49\u91CF\u7EA7\u7684\u56E2\u961F\u6765\u5171\u540C\u5B8C\u6210\u3002</p></blockquote><p>There is some truth to this belief\u2014but only some. First, history has shown that large enterprise systems can be built from monoliths and component-based systems as well as service-based systems. Thus services are not the only option for building scalable systems.</p><blockquote><p>\u8FD9\u79CD\u7406\u5FF5\u6709\u4E00\u4E9B\u9053\u7406\u2014\u2014\u4F46\u4E5F\u4EC5\u4EC5\u662F\u4E00\u4E9B\u800C\u5DF2\u3002\u9996\u5148\uFF0C\u65E0\u6570\u5386\u53F2\u4E8B\u5B9E\u8BC1\u660E\uFF0C\u5927\u578B\u7CFB\u7EDF\u4E00\u6837\u53EF\u4EE5\u91C6\u7528\u5355\u4F53\u6A21\u5F0F\uFF0C\u6216\u6253\u7EC4\u4EF6\u6A21\u5F0F\u6765\u6784\u5EFA\uFF0C\u4E0D\u4E00\u5B9A\u975E\u5F97\u670D\u52A1\u5316\u3002\u56E0\u6B64\u670D\u52A1\u5316\u5E76\u4E0D\u662F\u6784\u5EFA\u5927\u578B\u7CFB\u7EDF\u7684\u552F\u4E00\u9009\u62E9\u3002</p></blockquote><p>Second, the decoupling fallacy means that services cannot always be independently developed, deployed, and operated. To the extent that they are coupled by data or behavior, the development, deployment, and operation must be coordinated.</p><blockquote><p>\u5176\u6B21\uFF0C\u4E0A\u6587\u8BF4\u5230\u7684\u89E3\u8026\u5408\u8C2C\u8BBA\u5DF2\u7ECF\u8BF4\u660E\u62C6\u5206\u670D\u52A1\u5E76\u4E0D\u610F\u5473\u7740\u8FD9\u4E9B\u670D\u52A1\u53EF\u4EE5\u5F7C\u6B64\u72EC\u7ACB\u5F00\u53D1\u3001\u90E8\u7F72\u548C\u8FD0\u7EF4\u3002\u5982\u679C\u8FD9\u4E9B\u670D\u52A1\u4E4B\u95F4\u4EE5\u6570\u636E\u5F62\u5F0F\u6216\u8005\u884C\u4E3A\u5F62\u5F0F\u76F8\u8026\u5408\uFF0C\u90A3\u4E48\u5B83\u4EEC\u7684\u5F00\u53D1\u3001\u90E8\u7F72\u548C\u8FD0\u7EF4\u4E5F\u5FC5\u987B\u5F7C\u6B64\u534F\u8C03\u6765\u8FDB\u884C\u3002</p></blockquote><h2 id="the-kitty-problem-\u8FD0\u9001\u732B\u54AA\u7684\u96BE\u9898" tabindex="-1"><a class="header-anchor" href="#the-kitty-problem-\u8FD0\u9001\u732B\u54AA\u7684\u96BE\u9898" aria-hidden="true">#</a> THE KITTY PROBLEM \u8FD0\u9001\u732B\u54AA\u7684\u96BE\u9898</h2><p>As an example of these two fallacies, let\u2019s look at our taxi aggregator system again. Remember, this system knows about many taxi providers in a given city, and allows customers to order rides. Let\u2019s assume that the customers select taxis based on a number of criteria, such as pickup time, cost, luxury, and driver experience.</p><blockquote><p>\u4E0B\u9762\uFF0C\u6211\u4EEC\u518D\u4EE5\u4E4B\u524D\u90A3\u4E2A\u51FA\u79DF\u8F66\u8C03\u5EA6\u7CFB\u7EDF\u4E3A\u4F8B\u6765\u8BF4\u660E\u4E0A\u9762\u90A3\u4E24\u4E2A\u8C2C\u8BBA\u3002\u5404\u4F4D\u8FD8\u8BB0\u5F97\u5417\uFF1F\u8BE5\u7CFB\u7EDF\u4F1A\u8D1F\u8D23\u7EDF\u4E00\u8C03\u5EA6\u7ED9\u5B9A\u57CE\u5E02\u4E2D\u7684\u591A\u4E2A\u51FA\u79DF\u8F66\u63D0\u4F9B\u5546\uFF0C\u800C\u7528\u6237\u53EF\u4EE5\u96C6\u4E2D\u5728\u5B83\u90A3\u91CC\u4E0B\u8BA2\u5355\u3002\u5728\u8FD9\u91CC\uFF0C\u6211\u4EEC\u5047\u8BBE\u7528\u6237\u5728\u79DF\u8F66\u65F6\u5F80\u5F80\u4F1A\u9644\u5E26\u4E00\u7EC4\u53C2\u8003\u6761\u4EF6\uFF0C\u4F8B\u5982\u63A5\u9001\u65F6\u95F4\u3001\u4EF7\u683C\u3001\u8C6A\u534E\u7A0B\u5EA6\u3001\u53F8\u673A\u7684\u7ECF\u9A8C\uFF0C\u7B49\u7B49\u3002</p></blockquote><p>We wanted our system to be scalable, so we chose to build it out of lots of little micro-services. We subdivided our development staff into many small teams, each of which is responsible for developing, maintaining, and operating a correspondingly1 small number of services.</p><blockquote><p>\u6211\u4EEC\u5E0C\u671B\u6574\u4E2A\u7CFB\u7EDF\u662F\u53EF\u6269\u5C55\u7684\uFF0C\u4E8E\u662F\u8BE5\u7CFB\u7EDF\u5927\u91CF\u91C7\u7528\u4E86\u5FAE\u670D\u52A1\u67B6\u6784\u3002\u7136\u540E\uFF0C\u6211\u4EEC\u8FDB\u4E00\u6B65\u5C06\u6574\u4E2A\u7814\u53D1\u56E2\u961F\u5212\u5206\u4E3A\u8BB8\u591A\u4E2A\u5C0F\u56E2\u961F\uFF0C\u6BCF\u4E2A\u56E2\u961F\u90FD\u8D1F\u8D23\u5F00\u53D1\u3001\u7EF4\u62A4\u548C\u8FD0\u7EF4\u76F8\u5E94\u7684\u5C0F\u6570\u91CF\u7684\u5FAE\u670D\u52A1\u3002</p></blockquote><p>The diagram in Figure 27.1 shows how our fictitious architects arranged services to implement this application. The TaxiUI service deals with the customers, who use mobile devices to order taxis. The TaxiFinder service examines the inventories of the various TaxiSuppliers and determines which taxies are possible candidates for the user. It deposits these into a short-term data record attached to that user. The TaxiSelector service takes the user\u2019s criteria of cost, time, luxury, and so forth, and chooses an appropriate taxi from among the candidates. It hands that taxi off to the TaxiDispatcher service, which orders the appropriate taxi.</p><blockquote><p>\u8FD9\u4E2A\u865A\u6784\u7CFB\u7EDF\u7684\u67B6\u6784\u5982\u56FE 27.1 \u6240\u793A\uFF0C\u6574\u4E2A\u7CFB\u7EDF\u90FD\u662F\u4F9D\u9760\u670D\u52A1\u6765\u6784\u5EFA\u7684\u3002TaxiUI \u670D\u52A1\u8D1F\u8D23\u4E0E\u7528\u6237\u6253\u4EA4\u9053\uFF0C\u7528\u6237\u4F1A\u901A\u8FC7\u79FB\u52A8\u8BBE\u5907\u5411\u5B83\u4E0B\u8BA2\u5355\u3002TaxiFinder \u670D\u52A1\u8D1F\u8D23\u8C03\u7528\u4E0D\u540C\u7684 TaxiSupplier \u670D\u52A1\u6765\u83B7\u53D6\u53EF\u7528\u8F66\u8F86\u7684\u4FE1\u606F\uFF0C\u5E76\u4E14\u627E\u51FA\u53EF\u7528\u7684\u51FA\u79DF\u8F66\u4EE5\u4F5C\u4E3A\u53EF\u63A8\u8350\u9879\u3002\u8FD9\u4E9B\u53EF\u63A8\u8350\u9879\u4F1A\u77ED\u671F\u5730\u88AB\u56FA\u5316\u6210\u4E00\u6761\u6570\u636E\u8BB0\u5F55\uFF0C\u4E0E\u7528\u6237\u4FE1\u606F\u6302\u94A9\u3002TaxiSelector \u670D\u52A1\u5219\u8D1F\u8D23\u6839\u636E\u7528\u6237\u6240\u9009\u62E9\u7684\u4EF7\u683C\u3001\u65F6\u95F4\u3001\u8C6A\u534E\u7A0B\u5EA6\u7B49\u6761\u4EF6\u4ECE\u53EF\u9009\u9879\u4E2D\u7B5B\u9009\u7ED3\u679C\uFF0C\u6700\u540E\u8FD9\u4E9B\u7ED3\u679C\u4F1A\u88AB\u4F20\u9012\u7ED9 TaxiDispatcher \u670D\u52A1\uFF0C\u7531\u5B83\u8D1F\u8D23\u5206\u6D3E\u8BA2\u5355\u3002</p></blockquote>',41),p=t("Services arranged to implement the taxi aggregator system"),u=i('<p>Now let us suppose that this system has been in operation for more than a year. Our staff of developers have been happily developing new features while maintaining and operating all these services.</p><blockquote><p>\u73B0\u5728\uFF0C\u5047\u8BBE\u6211\u4EEC\u7684\u7CFB\u7EDF\u5DF2\u7ECF\u8FD0\u884C\u4E86\u4E00\u5E74\u6709\u4F59\uFF0C\u5176\u7814\u53D1\u56E2\u961F\u5728\u6301\u7EED\u5F00\u53D1\u65B0\u529F\u80FD\u7684\u540C\u65F6\uFF0C\u7EF4\u62A4\u7740\u6240\u6709\u7684\u670D\u52A1\u3002</p></blockquote><p>One bright and cheerful day, the marketing department holds a meeting with the development team. In this meeting, they announce their plans to offer a kitten delivery service to the city. Users can order kittens to be delivered to their homes or to their places of business.</p><blockquote><p>\u5728\u4E00\u4E2A\u9633\u5149\u660E\u5A9A\u7684\u65E9\u4E0A\uFF0C\u5E02\u573A\u90E8\u53EC\u96C6\u6574\u4E2A\u7814\u53D1\u90E8\u5F00\u4F1A\u3002\u4F1A\u8BAE\u4E0A\uFF0C\u5E02\u573A\u90E8\u5BA3\u5E03\u4E86\u4ED6\u4EEC\u5728\u8BE5\u57CE\u5E02\u5347\u5C55\u732B\u54AA\u9001\u8FBE\u670D\u52A1\u7684\u8BA1\u5212\u3002\u8BE5\u8BA1\u5212\u5C06\u5141\u8BB8\u7528\u6237\u5411\u7CFB\u7EDF\u4E0B\u8BA2\u5355\uFF0C\u8981\u6C42\u5C06\u4ED6\u4EEC\u7684\u732B\u54AA\u9001\u5230\u81EA\u5DF1\u5BB6\u91CC\u6216\u8005\u529E\u516C\u5BA4\u3002</p></blockquote><p>The company will set up several kitten collection points across the city. When a kitten order is placed, a nearby taxi will be selected to collect a kitten from one of those collection points, and then deliver it to the appropriate address.</p><blockquote><p>\u516C\u53F8\u7684\u8BA1\u5212\u662F\u5728\u57CE\u5E02\u4E2D\u5EFA\u7ACB\u51E0\u4E2A\u732B\u54AA\u96C6\u6563\u70B9\u3002\u5F53\u7528\u6237\u4E0B\u8BA2\u5355\u65F6\uFF0C\u9644\u8FD1\u7684\u4E00\u8F86\u51FA\u79DF\u8F66\u5C06\u88AB\u9009\u4E2D\u53BB\u96C6\u6563\u70B9\u53D6\u732B\uFF0C\u5E76\u5C06\u732B\u9001\u5230\u6307\u5B9A\u5730\u70B9\u3002</p></blockquote><p>One of the taxi suppliers has agreed to participate in this program. Others are likely to follow. Still others may decline.</p><blockquote><p>\u73B0\u5728\u5DF2\u7ECF\u6709\u4E00\u5BB6\u51FA\u79DF\u8F66\u516C\u53F8\u53C2\u52A0\u4E86\u8FD9\u9879\u6D3B\u52A8\uFF0C\u672A\u6765\u53EF\u80FD\u8FD8\u4F1A\u6709\u5176\u4ED6\u516C\u53F8\u53C2\u4E0E\u8FDB\u6765\uFF0C\u4F46\u80AF\u5B9A\u4E5F\u4F1A\u6709\u4E0D\u53C2\u4E0E\u7684\u516C\u53F8\u3002</p></blockquote><p>Of course, some drivers may be allergic to cats, so those drivers should never be selected for this service. Also, some customers will undoubtedly have similar allergies, so a vehicle that has been used to deliver kittens within the last 3 days should not be selected for customers who declare such allergies.</p><blockquote><p>\u5F53\u7136\uFF0C\u7531\u4E8E\u6709\u4E9B\u53F8\u673A\u4F1A\u5BF9\u732B\u8FC7\u654F\uFF0C\u6240\u4EE5\u7CFB\u7EDF\u8FD8\u5FC5\u987B\u8981\u907F\u514D\u9009\u4E2D\u8FD9\u4E9B\u4EBA\u53BB\u8FD0\u9001\u732B\u54AA\u3002\u540C\u6837\u7684\uFF0C\u7531\u4E8E\u51FA\u79DF\u8F66\u7684\u4E58\u5BA2\u4E2D\u4E5F\u4F1A\u6709\u5BF9\u732B\u8FC7\u654F\u7684\u4EBA\uFF0C\u6240\u4EE5\u5F53\u4ED6\u4EEC\u53EB\u8F66\u65F6\uFF0C\u7CFB\u7EDF\u4E5F\u5FC5\u987B\u907F\u514D\u6307\u6D3E\u8FC7\u53BB\u4E09\u5929\u5185\u8FD0\u9001\u8FC7\u732B\u54AA\u7684\u8F66\u3002</p></blockquote><p>Look at that diagram of services. How many of those services will have to change to implement this feature? All of them. Clearly, the development and deployment of the kitty feature will have to be very carefully coordinated.</p><blockquote><p>\u73B0\u5728\u6839\u636E\u4E0A\u8FF0\u9700\u6C42\u518D\u6765\u770B\u6211\u4EEC\u7684\u7CFB\u7EDF\u67B6\u6784\u56FE\uFF0C\u6570\u4E00\u6570\u6709\u591A\u5C11\u4E2A\u670D\u52A1\u9700\u8981\u53D8\u66F4\uFF1F\u7B54\u6848\u662F\u5168\u90E8\uFF01\u663E\u7136\uFF0C\u4E3A\u4E86\u589E\u52A0\u8FD9\u4E2A\u8FD0\u9001\u732B\u54AA\u7684\u529F\u80FD\uFF0C\u8BE5\u7CFB\u7EDF\u6240\u6709\u7684\u670D\u52A1\u90FD\u9700\u8981\u505A\u53D8\u66F4\uFF0C\u800C\u4E14\u8FD9\u4E9B\u670D\u52A1\u4E4B\u95F4\u8FD8\u8981\u5F7C\u6B64\u505A\u597D\u534F\u8C03\u3002</p></blockquote><p>In other words, the services are all coupled, and cannot be independently developed, deployed, and maintained.</p><blockquote><p>\u6362\u53E5\u8BDD\u8BF4\uFF0C\u8FD9\u4E9B\u670D\u52A1\u4E8B\u5B9E\u4E0A\u5168\u90FD\u662F\u5F3A\u8026\u5408\u7684\uFF0C\u5E76\u4E0D\u80FD\u771F\u6B63\u505A\u5230\u72EC\u7ACB\u5F00\u53D1\u3001\u90E8\u7F72\u548C\u7EF4\u62A4\u3002</p></blockquote><p>This is the problem with cross-cutting concerns. Every software system must face this problem, whether service oriented or not. Functional decompositions, of the kind depicted in the service diagram in Figure 27.1, are very vulnerable to new features that cut across all those functional behaviors.</p><blockquote><p>\u8FD9\u5C31\u662F\u6240\u8C13\u7684\u6A2A\u8DE8\u578B\u53D8\u66F4\uFF08cross-cutting concern\uFF09\u95EE\u9898\uFF0C\u5B83\u662F\u6240\u6709\u8F6F\u4EF6\u7CFB\u7EDF\u90FD\u8981\u9762\u5BF9\u7684\u95EE\u9898\uFF0C\u65E0\u8BBA\u670D\u52A1\u5316\u8FD8\u662F\u975E\u670D\u52A1\u5316\u7684\u3002\u5176\u4E2D\uFF0C\u56FE 27.1 \u6240\u793A\u7684\u8FD9\u79CD\u6309\u529F\u80FD\u5212\u5206\u670D\u52A1\u7684\u67B6\u6784\u65B9\u5F0F\uFF0C\u5728\u8DE8\u7CFB\u7EDF\u7684\u529F\u80FD\u53D8\u66F4\u65F6\u662F\u6700\u8106\u5F31\u7684\u3002</p></blockquote><h2 id="objects-to-the-rescue-\u5BF9\u8C61\u5316\u662F\u6551\u661F" tabindex="-1"><a class="header-anchor" href="#objects-to-the-rescue-\u5BF9\u8C61\u5316\u662F\u6551\u661F" aria-hidden="true">#</a> OBJECTS TO THE RESCUE \u5BF9\u8C61\u5316\u662F\u6551\u661F</h2><p>How would we have solved this problem in a component-based architecture? Careful consideration of the SOLID design principles would have prompted us to create a set of classes that could be polymorphically extended to handle new features.</p><blockquote><p>\u5982\u679C\u91C7\u7528\u7EC4\u4EF6\u5316\u7684\u7CFB\u7EDF\u67B6\u6784\uFF0C\u5982\u4F55\u89E3\u51B3\u8FD9\u4E2A\u96BE\u9898\u5462\uFF1F\u901A\u8FC7\u5BF9 SOLID \u8BBE\u8BA1\u539F\u5219\u7684\u4ED4\u7EC6\u8003\u8651\uFF0C\u6211\u4EEC\u5E94\u8BE5\u4E00\u5F00\u59CB\u5C31\u8BBE\u8BA1\u4E00\u7CFB\u5217\u591A\u6001\u5316\u7684\u7C7B\uFF0C\u4EE5\u5E94\u5BF9\u5C06\u6765\u65B0\u529F\u80FD\u7684\u6269\u5C55\u9700\u8981\u3002</p></blockquote><p>The diagram in Figure 27.2 shows the strategy. The classes in this diagram roughly correspond to the services shown in Figure 27.1. However, note the boundaries. Note also that the dependencies follow the Dependency Rule.</p><blockquote><p>\u8FD9\u79CD\u7B56\u7565\u4E0B\u7684\u7CFB\u7EDF\u67B6\u6784\u5982\u56FE 27.2 \u6240\u793A\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u8BE5\u56FE\u4E2D\u7684\u7C7B\u4E0E\u56FE 27.1 \u4E2D\u7684\u670D\u52A1\u5927\u81F4\u662F\u76F8\u4E92\u5BF9\u5E94\u7684\u3002\u7136\u800C\uFF0C\u8BF7\u8BFB\u8005\u6CE8\u610F\u8FD9\u91CC\u8BBE\u7F6E\u4E86\u67B6\u6784\u8FB9\u754C\uFF0C\u5E76\u4E14\u9075\u5B88\u4E86\u4F9D\u8D56\u5173\u7CFB\u539F\u5219\u3002</p></blockquote><p>Much of the logic of the original services is preserved within the base classes of the object model. However, that portion of the logic that was specific to rides has been extracted into a Rides component. The new feature for kittens has been placed into a Kittens component. These two components override the abstract base classes in the original components using a pattern such as Template Method or Strategy.</p><blockquote><p>\u73B0\u5728\uFF0C\u539F\u5148\u670D\u52A1\u5316\u8BBE\u8BA1\u4E2D\u7684\u5927\u90E8\u5206\u903B\u8F91\u90FD\u88AB\u5305\u542B\u5728\u5BF9\u8C61\u6A21\u578B\u7684\u57FA\u7C7B\u4E2D\u3002\u7136\u800C\uFF0C\u9488\u5BF9\u6BCF\u6B21\u7279\u5B9A\u884C\u7A0B\u7684\u903B\u8F91\u88AB\u62BD\u79BB\u5230\u4E00\u4E2A\u5355\u72EC\u7684 Rides \u7EC4\u4EF6\u4E2D\u3002\u8FD0\u9001\u732B\u54AA\u7684\u65B0\u529F\u80FD\u88AB\u653E\u5165\u5230 Kittens \u7EC4\u4EF6\u4E2D\u3002\u8FD9\u4E24\u4E2A\u7EC4\u4EF6\u8986\u76D6\u4E86\u539F\u59CB\u7EC4\u4EF6\u4E2D\u7684\u62BD\u8C61\u57FA\u7C7B\uFF0C\u8FD9\u79CD\u8BBE\u8BA1\u6A21\u5F0F\u88AB\u79F0\u4F5C\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u6216\u7B56\u7565\u6A21\u5F0F\u3002</p></blockquote><p>Note again that the two new components, Rides and Kittens, follow the Dependency Rule. Note also that the classes that implement those features are created by factories under the control of the UI.</p><blockquote><p>\u540C\u65F6\uFF0C\u6211\u4EEC\u4E5F\u4F1A\u6CE8\u610F\u5230 Rides \u548C Kittens \u8FD9\u4E24\u4E2A\u65B0\u7EC4\u4EF6\u90FD\u9075\u5B88\u4E86\u4F9D\u8D56\u5173\u7CFB\u539F\u5219\u3002\u53E6\u5916\uFF0C\u5B9E\u73B0\u529F\u80FD\u7684\u7C7B\u4E5F\u90FD\u662F\u7531 UI \u63A7\u5236\u4E0B\u7684\u5DE5\u5382\u7C7B\u521B\u5EFA\u51FA\u6765\u7684\u3002</p></blockquote><p>Clearly, in this scheme, when the Kitty feature is implemented, the TaxiUI must change. But nothing else needs to be changed. Rather, a new jar file, or Gem, or DLL is added to the system and dynamically loaded at runtime.</p><blockquote><p>\u663E\u7136\uFF0C\u5982\u679C\u6211\u4EEC\u5728\u8FD9\u79CD\u67B6\u6784\u4E0B\u5F15\u5165\u8FD0\u9001\u732B\u54AA\u7684\u529F\u80FD\uFF0CTaxiUI \u7EC4\u4EF6\u5C31\u5FC5\u987B\u968F\u4E4B\u53D8\u66F4\uFF0C\u4F46\u5176\u4ED6\u7684\u7EC4\u4EF6\u5C31\u65E0\u987B\u53D8\u66F4\u4E86\u3002\u8FD9\u91CC\u53EA\u9700\u8981\u5F15\u5165\u4E00\u4E2A\u65B0\u7684 jar \u6587\u4EF6\u6216\u8005 Gem\u3001DLL\u3002\u7CFB\u7EDF\u5728\u8FD0\u884C\u65F6\u5C31\u4F1A\u81EA\u52A8\u52A8\u6001\u5730\u52A0\u8F7D\u5B83\u4EEC\u3002</p></blockquote><p>Thus the Kitty feature is decoupled, and independently developable and deployable.</p><blockquote><p>\u8FD9\u6837\u4E00\u6765\uFF0C\u8FD0\u9001\u732B\u54AA\u7684\u529F\u80FD\u5C31\u4E0E\u7CFB\u7EDF\u7684\u5176\u4ED6\u90E8\u5206\u5B9E\u73B0\u4E86\u89E3\u8026\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u72EC\u7ACB\u5F00\u53D1\u548C\u90E8\u7F72\u4E86\u3002</p></blockquote>',29),b=t("Using an object-oriented approach to deal with cross-cutting concerns"),m=e("h2",{id:"component-based-services-\u57FA\u4E8E\u7EC4\u4EF6\u7684\u670D\u52A1",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#component-based-services-\u57FA\u4E8E\u7EC4\u4EF6\u7684\u670D\u52A1","aria-hidden":"true"},"#"),t(" COMPONENT-BASED SERVICES \u57FA\u4E8E\u7EC4\u4EF6\u7684\u670D\u52A1")],-1),f=e("p",null,"The obvious question is: Can we do that for services? And the answer is, of course: Yes! Services do not need to be little monoliths. Services can, instead, be designed using the SOLID principles, and given a component structure so that new components can be added to them without changing the existing components within the service.",-1),v=e("blockquote",null,[e("p",null,"\u90A3\u4E48\uFF0C\u95EE\u9898\u6765\u4E86\uFF1A\u670D\u52A1\u5316\u4E5F\u53EF\u4EE5\u505A\u5230\u8FD9\u4E00\u70B9\u5417\uFF1F\u7B54\u6848\u662F\u80AF\u5B9A\u7684\u3002\u670D\u52A1\u5E76\u4E0D\u4E00\u5B9A\u5FC5\u987B\u662F\u5C0F\u578B\u7684\u5355\u4F53\u7A0B\u5E8F\u3002\u670D\u52A1\u4E5F\u53EF\u4EE5\u6309\u7167 SOLID \u539F\u5219\u6765\u8BBE\u8BA1\uFF0C\u6309\u7167\u7EC4\u4EF6\u7ED3\u6784\u6765\u90E8\u7F72\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u505A\u5230\u5728\u6DFB\u52A0/\u5220\u9664\u7EC4\u4EF6\u65F6\u4E0D\u5F71\u54CD\u670D\u52A1\u4E2D\u7684\u5176\u4ED6\u7EC4\u4EF6\u3002")],-1),y=e("p",null,"Think of a service in Java as a set of abstract classes in one or more jar files. Think of each new feature or feature extension as another jar file that contains classes that extend the abstract classes in the first jar files. Deploying a new feature then becomes not a matter of redeploying the services, but rather a matter of simply adding the new jar files to the load paths of those services. In other words, adding new features conforms to the Open-Closed Principle.",-1),g=e("blockquote",null,[e("p",null,"\u6211\u4EEC\u53EF\u4EE5\u5C06 Java \u4E2D\u7684\u670D\u52A1\u770B\u4F5C\u662F\u4E00\u4E2A\u6216\u591A\u4E2A jar \u6587\u4EF6\u4E2D\u7684\u4E00\u7EC4\u62BD\u8C61\u7C7B\uFF0C\u800C\u6BCF\u4E2A\u65B0\u529F\u80FD\u6216\u529F\u80FD\u6269\u5C55\u90FD\u662F\u53E6\u4E00\u4E2A jar \u6587\u4EF6\u4E2D\u7684\u7C7B\uFF0C\u5B83\u4EEC\u90FD\u6269\u5C55\u4E86\u4E4B\u524D jar \u6587\u4EF6\u4E2D\u7684\u62BD\u8C61\u7C7B\u3002\u8FD9\u6837\u4E00\u6765\uFF0C\u90E8\u7F72\u65B0\u529F\u80FD\u5C31\u4E0D\u518D\u662F\u90E8\u7F72\u670D\u52A1\u4E86\uFF0C\u800C\u53EA\u662F\u7B80\u5355\u5730\u5728\u670D\u52A1\u7684\u52A0\u8F7D\u8DEF\u5F84\u4E0B\u589E\u52A0\u4E00\u4E2A jar \u6587\u4EF6\u3002\u6362\u53E5\u8BDD\u8BF4\uFF0C\u8FD9\u79CD\u589E\u52A0\u65B0\u529F\u80FD\u7684\u8FC7\u7A0B\u7B26\u5408\u5F00\u95ED\u539F\u5219\uFF08OCP\uFF09\u3002")],-1),w=e("p",null,"The service diagram in Figure 27.3 shows the structure. The services still exist as before, but each has its own internal component design, allowing new features to be added as new derivative classes. Those derivative classes live within their own components.",-1),k=e("blockquote",null,[e("p",null,"\u8FD9\u79CD\u670D\u52A1\u7684\u67B6\u6784\u5982\u56FE 27.3 \u6240\u793A\u3002\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C\u5728\u8BE5\u67B6\u6784\u4E2D\u670D\u52A1\u4ECD\u7136\u548C\u4E4B\u524D\u4E00\u6837\uFF0C\u4F46\u662F\u6BCF\u4E2A\u670D\u52A1\u4E2D\u90FD\u589E\u52A0\u4E86\u5185\u90E8\u7EC4\u4EF6\u7ED3\u6784\uFF0C\u4EE5\u4FBF\u4F7F\u7528\u884D\u751F\u7C7B\u6765\u6DFB\u52A0\u65B0\u529F\u80FD\uFF0C\u800C\u8FD9\u4E9B\u884D\u751F\u7C7B\u90FD\u6709\u5404\u81EA\u6240\u751F\u5B58\u7684\u7EC4\u4EF6\u3002")],-1),q=t("Each service has its own internal component design, enabling new features to be added as new derivative classes"),T=e("h2",{id:"cross-cutting-concerns-\u6A2A\u8DE8\u578B\u53D8\u66F4",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#cross-cutting-concerns-\u6A2A\u8DE8\u578B\u53D8\u66F4","aria-hidden":"true"},"#"),t(" CROSS-CUTTING CONCERNS \u6A2A\u8DE8\u578B\u53D8\u66F4")],-1),_=e("p",null,"What we have learned is that architectural boundaries do not fall between services. Rather, those boundaries run through the services, dividing them into components.",-1),x=e("blockquote",null,[e("p",null,"\u73B0\u5728\u6211\u4EEC\u5E94\u8BE5\u5DF2\u7ECF\u660E\u767D\u4E86\uFF0C\u7CFB\u7EDF\u7684\u67B6\u6784\u8FB9\u754C\u4E8B\u5B9E\u4E0A\u5E76\u4E0D\u843D\u5728\u670D\u52A1\u4E4B\u95F4\uFF0C\u800C\u662F\u7A7F\u900F\u6240\u6709\u670D\u52A1\uFF0C\u5728\u670D\u52A1\u5185\u90E8\u4EE5\u7EC4\u4EF6\u7684\u5F62\u5F0F\u5B58\u5728\u3002")],-1),S=e("p",null,"To deal with the cross-cutting concerns that all significant systems face, services must be designed with internal component architectures that follow the Dependency Rule, as shown in the diagram in Figure 27.4. Those services do not define the architectural boundaries of the system; instead, the components within the services do.",-1),E=e("blockquote",null,[e("p",null,"\u4E3A\u4E86\u5904\u7406\u8FD9\u4E2A\u6240\u6709\u5927\u578B\u7CFB\u7EDF\u90FD\u4F1A\u9047\u5230\u7684\u6A2A\u8DE8\u578B\u53D8\u66F4\u95EE\u9898\uFF0C\u6211\u4EEC\u5FC5\u987B\u5728\u670D\u52A1\u5185\u90E8\u91C7\u7528\u9075\u5B88\u4F9D\u8D56\u5173\u7CFB\u539F\u5219\u7684\u7EC4\u4EF6\u8BBE\u8BA1\u65B9\u5F0F\uFF0C\u5982\u56FE 27.4 \u6240\u793A\u3002\u603B\u800C\u8A00\u4E4B\uFF0C\u670D\u52A1\u8FB9\u754C\u5E76\u4E0D\u80FD\u4EE3\u8868\u7CFB\u7EDF\u7684\u67B6\u6784\u8FB9\u754C\uFF0C\u670D\u52A1\u5185\u90E8\u7684\u7EC4\u4EF6\u8FB9\u754C\u624D\u662F\u3002")],-1),I=t("Services must be designed with internal component architectures that follow the Dependency Rule"),C=e("h2",{id:"conclusion-\u672C\u7AE0\u5C0F\u7ED3",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#conclusion-\u672C\u7AE0\u5C0F\u7ED3","aria-hidden":"true"},"#"),t(" CONCLUSION \u672C\u7AE0\u5C0F\u7ED3")],-1),O=e("p",null,"As useful as services are to the scalability and develop-ability of a system, they are not, in and of themselves, architecturally significant elements. The architecture of a system is defined by the boundaries drawn within that system, and by the dependencies that cross those boundaries. That architecture is not defined by the physical mechanisms by which elements communicate and execute.",-1),D=e("blockquote",null,[e("p",null,"\u867D\u7136\u670D\u52A1\u5316\u53EF\u80FD\u6709\u52A9\u4E8E\u63D0\u5347\u7CFB\u7EDF\u7684\u53EF\u6269\u5C55\u6027\u548C\u53EF\u7814\u53D1\u6027\uFF0C\u4F46\u670D\u52A1\u672C\u8EAB\u5374\u5E76\u4E0D\u80FD\u4EE3\u8868\u6574\u4E2A\u7CFB\u7EDF\u7684\u67B6\u6784\u8BBE\u8BA1\u3002\u7CFB\u7EDF\u7684\u67B6\u6784\u662F\u7531\u7CFB\u7EDF\u5185\u90E8\u7684\u67B6\u6784\u8FB9\u754C\uFF0C\u4EE5\u53CA\u8FB9\u754C\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u6240\u5B9A\u4E49\u7684\uFF0C\u4E0E\u7CFB\u7EDF\u4E2D\u5404\u7EC4\u4EF6\u4E4B\u95F4\u7684\u8C03\u7528\u548C\u901A\u4FE1\u65B9\u5F0F\u65E0\u5173\u3002")],-1),R=e("p",null,"A service might be a single component, completely surrounded by an architectural boundary. Alternatively, a service might be composed of several components separated by architectural boundaries. In rare2 cases, clients and services may be so coupled as to have no architectural significance whatever.",-1),N=e("blockquote",null,[e("p",null,"\u4E00\u4E2A\u670D\u52A1\u53EF\u80FD\u662F\u4E00\u4E2A\u72EC\u7ACB\u7EC4\u4EF6\uFF0C\u4EE5\u7CFB\u7EDF\u67B6\u6784\u8FB9\u754C\u7684\u5F62\u5F0F\u9694\u5F00\u3002\u4E00\u4E2A\u670D\u52A1\u4E5F\u53EF\u80FD\u7531\u51E0\u4E2A\u7EC4\u4EF6\u7EC4\u6210\uFF0C\u5176\u4E2D\u7684\u7EC4\u4EF6\u4EE5\u67B6\u6784\u8FB9\u754C\u7684\u5F62\u5F0F\u4E92\u76F8\u9694\u79BB\u3002\u5728\u6781\u7AEF\u60C5\u51B5\u4E0B\uFF0C\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u7AEF\u751A\u81F3\u53EF\u80FD\u4F1A\u7531\u4E8E\u8026\u5408\u5F97\u8FC7\u4E8E\u7D27\u5BC6\u800C\u4E0D\u5177\u5907\u7CFB\u7EDF\u67B6\u6784\u610F\u4E49\u4E0A\u7684\u9694\u79BB\u6027\u3002")],-1);function A(L,F){const o=l("Figures");return r(),c("div",null,[d,s(o,{figure:"27-1"},{default:a(()=>[p]),_:1}),u,s(o,{figure:"27-2"},{default:a(()=>[b]),_:1}),m,f,v,y,g,w,k,s(o,{figure:"27-3"},{default:a(()=>[q]),_:1}),T,_,x,S,E,s(o,{figure:"27-4"},{default:a(()=>[I]),_:1}),C,O,D,R,N])}const H=n(h,[["render",A],["__file","ch27.html.vue"]]);export{H as default};
